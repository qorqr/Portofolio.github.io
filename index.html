<!DOCTYPE html>
<html lang="en" x-data="portfolio()" x-init="init()">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio - Full Stack Developer</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Alpine JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    
    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <!-- Particles.js -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .dark .gradient-bg {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
        }
        .skill-bar {
            transition: width 1s ease-in-out;
        }
        .particles-js-canvas-el {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
            z-index: 1000;
            transition: width 0.1s ease;
        }
        .status-success { background-color: #10b981; }
        .status-warning { background-color: #f59e0b; }
        .status-error { background-color: #ef4444; }
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.5);
        }
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }
    </style>
</head>
<body :class="{'dark': isDark}" class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">
    
    <!-- Scroll Progress Bar -->
    <div class="scroll-progress" :style="'width: ' + scrollProgress + '%'"></div>
    
    <!-- Toast Notification -->
    <div x-show="showToast" x-transition:enter="transition ease-out duration-300" 
         x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0"
         x-transition:leave="transition ease-in duration-200" 
         x-transition:leave-start="opacity-100 translate-y-0" x-transition:leave-end="opacity-0 translate-y-2"
         class="fixed top-4 right-4 z-50 max-w-sm w-full"
         :class="{
             'bg-green-100 border-green-400 text-green-800 dark:bg-green-900 dark:text-green-200': toastType === 'success',
             'bg-red-100 border-red-400 text-red-800 dark:bg-red-900 dark:text-red-200': toastType === 'error',
             'bg-yellow-100 border-yellow-400 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200': toastType === 'warning',
             'bg-blue-100 border-blue-400 text-blue-800 dark:bg-blue-900 dark:text-blue-200': toastType === 'info'
         }"
         class="border-l-4 p-4 rounded-lg shadow-lg">
        <div class="flex items-center">
            <div class="flex-shrink-0">
                <i class="fas"
                   :class="{
                       'fa-check-circle': toastType === 'success',
                       'fa-exclamation-circle': toastType === 'error',
                       'fa-exclamation-triangle': toastType === 'warning',
                       'fa-info-circle': toastType === 'info'
                   }"></i>
            </div>
            <div class="ml-3">
                <p class="text-sm font-medium" x-text="toastMessage"></p>
            </div>
            <button @click="showToast = false" class="ml-auto -mx-1.5 -my-1.5 rounded-lg p-1.5 inline-flex h-8 w-8">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    
    <!-- Loading Screen -->
    <div x-show="isLoading" x-transition:enter="transition ease-out duration-300" 
         x-transition:leave="transition ease-in duration-200"
         class="fixed inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-gray-900 z-[9999] flex flex-col items-center justify-center">
        <div class="relative">
            <div class="w-32 h-32 rounded-full border-4 border-transparent border-t-indigo-500 border-r-purple-500 animate-spin"></div>
            <div class="absolute inset-0 flex items-center justify-center">
                <div class="text-center">
                    <i class="fas fa-code text-4xl text-white mb-4"></i>
                    <h2 class="text-2xl font-bold text-white" x-text="loadingMessage"></h2>
                    <div class="mt-4 w-48 h-2 bg-gray-700 rounded-full overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-300" 
                             :style="'width: ' + loadingProgress + '%'"></div>
                    </div>
                    <p class="text-gray-300 mt-2" x-text="loadingProgress + '%'"></p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Auth Button Fixed -->
    <div class="fixed top-4 right-4 z-50">
        <div x-show="isPublicMode">
            <button @click="loginWithGoogle()" 
                    class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-4 py-2 rounded-lg shadow-lg transition-all duration-300 flex items-center gap-2">
                <i class="fas fa-sign-in-alt"></i>
                <span>Login untuk Edit</span>
            </button>
        </div>
        
        <div x-show="!isPublicMode" class="flex items-center gap-4">
            <span class="text-sm text-gray-600 dark:text-gray-300">
                <i class="fas fa-user-circle mr-1"></i>
                <span x-text="userEmail?.split('@')[0] || 'User'"></span>
            </span>
            <button @click="signOut()" 
                    class="bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white px-4 py-2 rounded-lg shadow-lg transition-all duration-300 flex items-center gap-2">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </div>
    </div>
    
    <!-- Publish Button (Edit Mode Only) -->
    <div x-show="!isPublicMode" class="fixed bottom-4 right-4 z-40">
        <button @click="publishToPublic()" 
                class="bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl shadow-lg transition-all duration-300 flex items-center gap-3 animate-pulse">
            <i class="fas fa-cloud-upload-alt"></i>
            <span>PUBLISH KE CLOUD</span>
        </button>
    </div>
    
    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-40 transition-all duration-300" 
         :class="{'bg-white/90 dark:bg-gray-900/90 backdrop-blur-md shadow-lg': !isAtTop, 'bg-transparent': isAtTop}">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="text-2xl font-bold gradient-text">
                    <span class="text-indigo-600 dark:text-indigo-400">Portfolio</span>
                </div>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8">
                    <template x-for="item in navItems" :key="item.name">
                        <a :href="item.href" 
                           @click.prevent="scrollTo(item.href.substring(1))"
                           class="text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors font-medium"
                           :class="{'text-indigo-600 dark:text-indigo-400': activeSection === item.href.substring(1)}">
                            <span x-text="item.name"></span>
                        </a>
                    </template>
                </div>
                
                <!-- Theme Toggle -->
                <div class="flex items-center space-x-4">
                    <button @click="toggleTheme()" 
                            class="w-12 h-6 rounded-full bg-gray-300 dark:bg-gray-700 relative transition-colors">
                        <div class="absolute top-1 left-1 w-4 h-4 rounded-full bg-white dark:bg-gray-900 transition-transform duration-300" 
                             :class="{'translate-x-6': isDark}"></div>
                    </button>
                    
                    <!-- Mobile Menu Button -->
                    <button @click="mobileMenu = !mobileMenu" class="md:hidden text-gray-700 dark:text-gray-300">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div x-show="mobileMenu" x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 -translate-y-2" x-transition:enter-end="opacity-100 translate-y-0"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100 translate-y-0" x-transition:leave-end="opacity-0 -translate-y-2"
             class="md:hidden bg-white dark:bg-gray-800 shadow-lg">
            <div class="container mx-auto px-4 py-3 space-y-3">
                <template x-for="item in navItems" :key="item.name">
                    <a :href="item.href" 
                       @click.prevent="scrollTo(item.href.substring(1)); mobileMenu = false"
                       class="block py-2 text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors font-medium"
                       :class="{'text-indigo-600 dark:text-indigo-400': activeSection === item.href.substring(1)}">
                        <span x-text="item.name"></span>
                    </a>
                </template>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-20">
        <!-- Home Section -->
        <section id="home" class="min-h-screen relative overflow-hidden gradient-bg">
            <div id="particles-js" class="absolute inset-0"></div>
            
            <div class="container mx-auto px-4 py-16 relative z-10">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div class="text-center md:text-left">
                        <div class="mb-6">
                            <h1 class="text-5xl md:text-7xl font-bold text-white mb-4">
                                <span x-text="profile.name"></span>
                            </h1>
                            <p class="text-2xl md:text-3xl text-indigo-200 mb-6" x-text="profile.title"></p>
                            <p class="text-lg text-gray-200 max-w-xl" x-text="profile.bio"></p>
                        </div>
                        
                        <div class="flex flex-col sm:flex-row gap-4 mb-8">
                            <a href="#contact" 
                               @click.prevent="scrollTo('contact')"
                               class="bg-white text-indigo-600 hover:bg-gray-100 px-8 py-3 rounded-full font-bold text-lg transition-all duration-300 transform hover:-translate-y-1 text-center">
                               <i class="fas fa-envelope mr-2"></i> Contact Me
                            </a>
                            <a href="#projects" 
                               @click.prevent="scrollTo('projects')"
                               class="border-2 border-white text-white hover:bg-white/10 px-8 py-3 rounded-full font-bold text-lg transition-all duration-300 transform hover:-translate-y-1 text-center">
                               <i class="fas fa-briefcase mr-2"></i> View Projects
                            </a>
                        </div>
                        
                        <!-- Social Links -->
                        <div class="flex justify-center md:justify-start space-x-4">
                            <template x-for="link in socialLinks" :key="link.platform">
                                <a :href="link.url" target="_blank" 
                                   :class="getSocialPlatformColorClass(link.platform)"
                                   class="w-12 h-12 rounded-full flex items-center justify-center text-white transition-transform duration-300 hover:-translate-y-1">
                                    <i :class="link.icon"></i>
                                </a>
                            </template>
                            
                            <!-- Add Social Link Button (Edit Mode Only) -->
                            <button x-show="!isPublicMode" @click="addSocialLink()"
                                    class="w-12 h-12 rounded-full bg-gray-700 hover:bg-gray-800 flex items-center justify-center text-white transition-transform duration-300 hover:-translate-y-1">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="relative">
                        <div class="relative w-64 h-64 md:w-96 md:h-96 mx-auto">
                            <div class="absolute inset-0 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full animate-float"></div>
                            <img :src="profileImageSrc" 
                                 alt="Profile Picture" 
                                 class="relative z-10 w-full h-full object-cover rounded-full border-8 border-white shadow-2xl">
                            <!-- Edit Profile Image Button (Edit Mode Only) -->
                            <div x-show="!isPublicMode" class="absolute bottom-4 right-4 z-20">
                                <label for="profileImageUpload" 
                                       class="bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded-full cursor-pointer shadow-lg transition-all duration-300">
                                    <i class="fas fa-camera"></i>
                                    <input id="profileImageUpload" type="file" accept="image/*" @change="uploadProfileImage" class="hidden">
                                </label>
                            </div>
                        </div>
                        
                        <!-- Stats -->
                        <div class="grid grid-cols-3 gap-4 mt-12 max-w-lg mx-auto">
                            <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center border border-white/20">
                                <div class="text-3xl font-bold text-white" x-text="skills.length"></div>
                                <div class="text-indigo-200">Skills</div>
                            </div>
                            <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center border border-white/20">
                                <div class="text-3xl font-bold text-white" x-text="projects.length"></div>
                                <div class="text-indigo-200">Projects</div>
                            </div>
                            <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center border border-white/20">
                                <div class="text-3xl font-bold text-white" x-text="averageSkillLevel + '%'"></div>
                                <div class="text-indigo-200">Avg. Skill</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Skills Section -->
        <section id="skills" class="py-20 bg-gray-50 dark:bg-gray-800">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold text-gray-800 dark:text-white mb-4">Skills & Expertise</h2>
                    <p class="text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">A comprehensive overview of my technical skills and proficiency levels across various domains.</p>
                </div>
                
                <!-- Skill Category Filter -->
                <div class="flex flex-wrap justify-center gap-2 mb-8">
                    <button @click="activeSkillCategory = 'all'" 
                            class="px-4 py-2 rounded-full transition-all"
                            :class="activeSkillCategory === 'all' 
                                ? 'bg-indigo-600 text-white' 
                                : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600'">
                        All Skills
                    </button>
                    <template x-for="category in skillCategories" :key="category">
                        <button @click="activeSkillCategory = category" 
                                class="px-4 py-2 rounded-full transition-all flex items-center gap-2"
                                :class="activeSkillCategory === category 
                                    ? getSkillCategoryColor(category) + ' text-white' 
                                    : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600'">
                            <i :class="getCategoryIcon(category)"></i>
                            <span x-text="getCategoryName(category)"></span>
                        </button>
                    </template>
                </div>
                
                <!-- Add Skill Button (Edit Mode Only) -->
                <div x-show="!isPublicMode" class="flex justify-end mb-6">
                    <button @click="openModal('addSkill')" 
                            class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors">
                        <i class="fas fa-plus"></i>
                        Add Skill
                    </button>
                </div>
                
                <!-- Skills Grid -->
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <template x-for="skill in filteredSkills" :key="skill.id">
                        <div class="bg-white dark:bg-gray-900 rounded-xl shadow-lg p-6 transition-transform duration-300 hover:-translate-y-2">
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex items-center gap-3">
                                    <div :class="getSkillCategoryColor(skill.category)" 
                                         class="w-12 h-12 rounded-xl flex items-center justify-center text-white">
                                        <i :class="skill.icon" class="text-xl"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-lg text-gray-800 dark:text-white" x-text="skill.name"></h3>
                                        <div class="flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400">
                                            <i :class="getProficiencyIcon(skill.level)"></i>
                                            <span x-text="getProficiencyLevel(skill.level)"></span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Edit/Delete Buttons (Edit Mode Only) -->
                                <div x-show="!isPublicMode" class="flex gap-2">
                                    <button @click="editSkill(skill)" 
                                            class="text-blue-500 hover:text-blue-700">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button @click="confirmDelete('skill', skill.id, skill.name)" 
                                            class="text-red-500 hover:text-red-700">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <p class="text-gray-600 dark:text-gray-300 mb-4" x-text="skill.description"></p>
                            
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600 dark:text-gray-400">Proficiency</span>
                                    <span class="font-medium" x-text="skill.level + '%'"></span>
                                </div>
                                <div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                    <div class="h-full skill-bar rounded-full" 
                                         :class="getProficiencyClass(skill.level)"
                                         :style="'width: ' + skill.level + '%'"></div>
                                </div>
                            </div>
                            
                            <div class="flex justify-between mt-4 pt-4 border-t border-gray-100 dark:border-gray-800">
                                <div class="text-center">
                                    <div class="text-lg font-bold text-indigo-600 dark:text-indigo-400" x-text="skill.years"></div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">Years</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-lg font-bold text-green-600 dark:text-green-400" x-text="skill.projects"></div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">Projects</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-lg font-bold text-purple-600 dark:text-purple-400">
                                        <i :class="getCategoryIcon(skill.category)"></i>
                                    </div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400" x-text="getCategoryName(skill.category)"></div>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="py-20 bg-white dark:bg-gray-900">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold text-gray-800 dark:text-white mb-4">Featured Projects</h2>
                    <p class="text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">A showcase of my recent work and projects, highlighting technical skills and problem-solving abilities.</p>
                </div>
                
                <!-- Project View Toggle -->
                <div class="flex justify-between items-center mb-8">
                    <div class="flex gap-2">
                        <button @click="setProjectView('grid')" 
                                class="px-4 py-2 rounded-lg flex items-center gap-2"
                                :class="projectView === 'grid' 
                                    ? 'bg-indigo-600 text-white' 
                                    : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'">
                            <i class="fas fa-th-large"></i>
                            Grid View
                        </button>
                        <button @click="setProjectView('slider')" 
                                class="px-4 py-2 rounded-lg flex items-center gap-2"
                                :class="projectView === 'slider' 
                                    ? 'bg-indigo-600 text-white' 
                                    : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'">
                            <i class="fas fa-sliders-h"></i>
                            Slider View
                        </button>
                    </div>
                    
                    <!-- Add Project Button (Edit Mode Only) -->
                    <div x-show="!isPublicMode" class="flex gap-4">
                        <button @click="openModal('addProject')" 
                                class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors">
                            <i class="fas fa-plus"></i>
                            Add Project
                        </button>
                    </div>
                </div>
                
                <!-- Projects Grid View -->
                <div x-show="projectView === 'grid'" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <template x-for="project in projects" :key="project.id">
                        <div class="bg-gray-50 dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-transform duration-300 hover:-translate-y-2">
                            <div class="relative h-48 overflow-hidden">
                                <img :src="project.image" 
                                     :alt="project.name"
                                     @error="handleProjectImageError($event, project.id)"
                                     class="w-full h-full object-cover transition-transform duration-500 hover:scale-110">
                                <div class="absolute top-0 left-0 bg-indigo-600 text-white px-3 py-1 m-4 rounded-lg text-sm font-medium">
                                    <span x-text="getProjectTypeName(project.type)"></span>
                                </div>
                                <div class="absolute top-0 right-0 bg-green-500 text-white px-3 py-1 m-4 rounded-lg text-sm font-medium">
                                    <span x-text="project.status"></span>
                                </div>
                                
                                <!-- Edit/Delete Buttons (Edit Mode Only) -->
                                <div x-show="!isPublicMode" class="absolute top-0 right-12 m-4 flex gap-2">
                                    <button @click="editProject(project)" 
                                            class="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-lg">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button @click="confirmDelete('project', project.id, project.name)" 
                                            class="bg-red-500 hover:bg-red-600 text-white p-2 rounded-lg">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2" x-text="project.name"></h3>
                                <p class="text-gray-600 dark:text-gray-300 mb-4 line-clamp-2" x-text="project.description"></p>
                                
                                <div class="flex flex-wrap gap-2 mb-4">
                                    <template x-for="tech in project.technologies.slice(0, 3)" :key="tech">
                                        <span class="px-3 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full text-xs font-medium">
                                            <span x-text="tech"></span>
                                        </span>
                                    </template>
                                    <span x-show="project.technologies.length > 3" 
                                          class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full text-xs font-medium">
                                        +<span x-text="project.technologies.length - 3"></span> more
                                    </span>
                                </div>
                                
                                <div class="flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700">
                                    <span class="text-gray-500 dark:text-gray-400 text-sm" x-text="project.date"></span>
                                    <div class="flex gap-2">
                                        <button @click="viewProject(project.id)" 
                                                class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium text-sm">
                                            View Details
                                        </button>
                                        <a :href="project.demoUrl" target="_blank" 
                                           class="text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 font-medium text-sm">
                                            Live Demo
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
                
                <!-- Projects Slider View -->
                <div x-show="projectView === 'slider'" class="relative">
                    <div class="overflow-hidden rounded-xl">
                        <div class="flex transition-transform duration-500 ease-in-out" 
                             :style="'transform: translateX(-' + (currentSlide * 100) + '%)'">
                            <template x-for="(slide, slideIndex) in projectSlides" :key="slideIndex">
                                <div class="w-full flex-shrink-0">
                                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 p-4">
                                        <template x-for="project in slide" :key="project.id">
                                            <div class="bg-gray-50 dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                                                <!-- Project card content same as grid view -->
                                                <div class="relative h-40 overflow-hidden">
                                                    <img :src="project.image" :alt="project.name" 
                                                         @error="handleProjectImageError($event, project.id)"
                                                         class="w-full h-full object-cover">
                                                </div>
                                                <div class="p-4">
                                                    <h4 class="font-bold text-gray-800 dark:text-white mb-2" x-text="project.name"></h4>
                                                    <p class="text-gray-600 dark:text-gray-300 text-sm line-clamp-2" x-text="project.description"></p>
                                                    <button @click="viewProject(project.id)" 
                                                            class="mt-3 text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 text-sm font-medium">
                                                        View Details â†’
                                                    </button>
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                    
                    <!-- Slider Controls -->
                    <div class="flex justify-center items-center mt-8 gap-4">
                        <button @click="prevSlide()" 
                                class="w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 flex items-center justify-center transition-colors">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        
                        <div class="flex gap-2">
                            <template x-for="(slide, index) in projectSlides" :key="index">
                                <button @click="goToSlide(index)" 
                                        class="w-3 h-3 rounded-full transition-all"
                                        :class="currentSlide === index 
                                            ? 'bg-indigo-600' 
                                            : 'bg-gray-300 dark:bg-gray-600'"></button>
                            </template>
                        </div>
                        
                        <button @click="nextSlide()" 
                                class="w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 flex items-center justify-center transition-colors">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        
                        <button @click="toggleAutoSlide()" 
                                class="ml-4 px-4 py-2 rounded-lg flex items-center gap-2"
                                :class="autoSlideEnabled 
                                    ? 'bg-green-500 text-white' 
                                    : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'">
                            <i class="fas" :class="autoSlideEnabled ? 'fa-pause' : 'fa-play'"></i>
                            Auto Slide
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 bg-gray-50 dark:bg-gray-800">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold text-gray-800 dark:text-white mb-4">Get In Touch</h2>
                    <p class="text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">Have a project in mind or want to collaborate? Feel free to reach out!</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-12 max-w-6xl mx-auto">
                    <!-- Contact Info -->
                    <div>
                        <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-6">Contact Information</h3>
                        
                        <div class="space-y-6">
                            <div class="flex items-start gap-4">
                                <div class="w-12 h-12 bg-indigo-100 dark:bg-indigo-900 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-user text-indigo-600 dark:text-indigo-400 text-xl"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-800 dark:text-white">Name</h4>
                                    <p class="text-gray-600 dark:text-gray-300" x-text="profile.name"></p>
                                </div>
                            </div>
                            
                            <div class="flex items-start gap-4">
                                <div class="w-12 h-12 bg-green-100 dark:bg-green-900 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-envelope text-green-600 dark:text-green-400 text-xl"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-800 dark:text-white">Email</h4>
                                    <p class="text-gray-600 dark:text-gray-300" x-text="profile.email"></p>
                                </div>
                            </div>
                            
                            <div class="flex items-start gap-4">
                                <div class="w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-phone text-purple-600 dark:text-purple-400 text-xl"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-800 dark:text-white">Phone</h4>
                                    <p class="text-gray-600 dark:text-gray-300" x-text="profile.phone"></p>
                                </div>
                            </div>
                            
                            <!-- Edit Profile Button (Edit Mode Only) -->
                            <div x-show="!isPublicMode" class="pt-4">
                                <button @click="openModal('editProfile')" 
                                        class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors">
                                    <i class="fas fa-edit"></i>
                                    Edit Profile
                                </button>
                            </div>
                        </div>
                        
                        <!-- Social Links -->
                        <div class="mt-8">
                            <h4 class="font-bold text-gray-800 dark:text-white mb-4">Connect with me</h4>
                            <div class="flex flex-wrap gap-3">
                                <template x-for="(link, index) in socialLinks" :key="index">
                                    <div class="relative group">
                                        <a :href="link.url" target="_blank" 
                                           :class="getSocialPlatformColorClass(link.platform)"
                                           class="px-4 py-2 rounded-lg flex items-center gap-2 text-white transition-transform duration-300 hover:-translate-y-1">
                                            <i :class="link.icon"></i>
                                            <span x-text="getSocialPlatformName(link.platform)"></span>
                                        </a>
                                        
                                        <!-- Edit/Delete Social Links (Edit Mode Only) -->
                                        <div x-show="!isPublicMode" class="absolute -top-2 -right-2 hidden group-hover:flex gap-1">
                                            <button @click="editSocialLink(index)" 
                                                    class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button @click="socialLinks.splice(index, 1)" 
                                                    class="w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs">
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                    </div>
                                </template>
                                
                                <!-- Add Social Link Button (Edit Mode Only) -->
                                <div x-show="!isPublicMode" class="flex flex-wrap gap-2 mt-2">
                                    <button @click="addQuickSocialLink('github')" 
                                            class="px-3 py-1 bg-gray-800 hover:bg-gray-900 text-white rounded-lg text-sm flex items-center gap-1">
                                        <i class="fab fa-github"></i> Add GitHub
                                    </button>
                                    <button @click="addQuickSocialLink('linkedin')" 
                                            class="px-3 py-1 bg-blue-700 hover:bg-blue-800 text-white rounded-lg text-sm flex items-center gap-1">
                                        <i class="fab fa-linkedin-in"></i> Add LinkedIn
                                    </button>
                                    <button @click="addQuickSocialLink('email')" 
                                            class="px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded-lg text-sm flex items-center gap-1">
                                        <i class="fas fa-envelope"></i> Add Email
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Contact Form -->
                    <div class="bg-white dark:bg-gray-900 rounded-xl shadow-lg p-8">
                        <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-6">Send Message</h3>
                        
                        <form @submit.prevent="submitContact">
                            <div class="space-y-6">
                                <div>
                                    <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Your Name</label>
                                    <input type="text" x-model="contactForm.name" 
                                           class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                           placeholder="Enter your name"
                                           required>
                                </div>
                                
                                <div>
                                    <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Your Email</label>
                                    <input type="email" x-model="contactForm.email" 
                                           class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                           placeholder="Enter your email"
                                           required>
                                </div>
                                
                                <div>
                                    <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Your Message</label>
                                    <textarea x-model="contactForm.message" rows="5"
                                              class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                              placeholder="Enter your message..."
                                              required></textarea>
                                </div>
                                
                                <button type="submit" 
                                        :disabled="isSubmitting"
                                        class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white py-3 px-6 rounded-lg font-bold transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fas" :class="isSubmitting ? 'fa-spinner fa-spin' : 'fa-paper-plane'"></i>
                                    <span x-text="isSubmitting ? 'Sending...' : 'Send Message'"></span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <div class="text-2xl font-bold text-white mb-2">Portfolio</div>
                    <p class="text-sm" x-text="profile.name"></p>
                </div>
                
                <div class="flex items-center space-x-6">
                    <template x-for="link in socialLinks" :key="link.platform">
                        <a :href="link.url" target="_blank" class="hover:text-white transition-colors">
                            <i :class="link.icon"></i>
                        </a>
                    </template>
                </div>
                
                <div class="mt-4 md:mt-0">
                    <p class="text-sm">&copy; <span x-text="portfolioYear"></span> All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- MODALS -->

    <!-- Add/Edit Skill Modal -->
    <div x-show="modals.addSkill" x-transition:enter="transition ease-out duration-300" 
         x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200" 
         x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 dark:text-white">
                        <i class="fas fa-plus-circle mr-2"></i>
                        <span x-text="editingSkill ? 'Edit Skill' : 'Add New Skill'"></span>
                    </h3>
                    <button @click="closeModal('addSkill')" 
                            class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <!-- Skill Form Tabs -->
                <div class="mb-6">
                    <div class="flex border-b border-gray-200 dark:border-gray-700">
                        <button @click="activeSkillTab = 'basic'" 
                                class="px-4 py-2 font-medium transition-colors"
                                :class="activeSkillTab === 'basic' 
                                    ? 'border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400' 
                                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'">
                            Basic Info
                        </button>
                        <button @click="activeSkillTab = 'details'" 
                                class="px-4 py-2 font-medium transition-colors"
                                :class="activeSkillTab === 'details' 
                                    ? 'border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400' 
                                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'">
                            Details
                        </button>
                        <button @click="activeSkillTab = 'advanced'" 
                                class="px-4 py-2 font-medium transition-colors"
                                :class="activeSkillTab === 'advanced' 
                                    ? 'border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400' 
                                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'">
                            Advanced
                        </button>
                    </div>
                </div>
                
                <!-- Basic Info Tab -->
                <div x-show="activeSkillTab === 'basic'" class="space-y-6">
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Skill Name *</label>
                        <input type="text" x-model="newSkill.name" 
                               class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                               placeholder="e.g., React, Node.js, MongoDB"
                               required>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Category *</label>
                        <select x-model="newSkill.category" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <option value="frontend">Frontend</option>
                            <option value="backend">Backend</option>
                            <option value="database">Database</option>
                            <option value="mobile">Mobile</option>
                            <option value="devops">DevOps</option>
                            <option value="cloud">Cloud</option>
                            <option value="tools">Tools</option>
                            <option value="design">Design</option>
                            <option value="ai">AI/ML</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">
                            Proficiency Level: <span x-text="newSkill.level + '%'"></span>
                        </label>
                        <input type="range" x-model="newSkill.level" min="0" max="100" step="5"
                               class="w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-sm text-gray-500 dark:text-gray-400 mt-1">
                            <span>Beginner</span>
                            <span>Intermediate</span>
                            <span>Advanced</span>
                            <span>Expert</span>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Years of Experience</label>
                            <input type="number" x-model="newSkill.years" min="0" max="50"
                                   class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Projects Completed</label>
                            <input type="number" x-model="newSkill.projects" min="0"
                                   class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                    </div>
                </div>
                
                <!-- Details Tab -->
                <div x-show="activeSkillTab === 'details'" class="space-y-6">
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Description</label>
                        <textarea x-model="newSkill.description" rows="4"
                                  class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                  placeholder="Describe your experience with this skill..."></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Certifications</label>
                        <div class="flex gap-2 mb-2">
                            <input type="text" x-model="certificationInput" 
                                   @keyup.enter="addCertification()"
                                   class="flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                   placeholder="Add certification...">
                            <button @click="addCertification()" type="button"
                                    class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                                Add
                            </button>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            <template x-for="(cert, index) in newSkill.certifications" :key="index">
                                <span class="px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full text-sm flex items-center gap-1">
                                    <span x-text="cert"></span>
                                    <button @click="removeCertification(index)" type="button"
                                            class="text-green-600 hover:text-green-800">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </span>
                            </template>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Tags</label>
                        <div class="flex gap-2 mb-2">
                            <input type="text" x-model="tagInput" 
                                   @keyup.enter="addTag()"
                                   class="flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                   placeholder="Add tag...">
                            <button @click="addTag()" type="button"
                                    class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">
                                Add
                            </button>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            <template x-for="(tag, index) in newSkill.tags" :key="index">
                                <span class="px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full text-sm flex items-center gap-1">
                                    <span x-text="tag"></span>
                                    <button @click="removeTag(index)" type="button"
                                            class="text-purple-600 hover:text-purple-800">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </span>
                            </template>
                        </div>
                    </div>
                </div>
                
                <!-- Advanced Tab -->
                <div x-show="activeSkillTab === 'advanced'" class="space-y-6">
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Custom Icon</label>
                        <div class="flex items-center gap-4">
                            <div class="text-3xl" :class="newSkill.icon"></div>
                            <input type="text" x-model="newSkill.icon" 
                                   class="flex-1 px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                   placeholder="fas fa-code">
                            <button @click="newSkill.icon = getCategoryIcon(newSkill.category)" 
                                    type="button"
                                    class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">
                                Default
                            </button>
                        </div>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                            Use Font Awesome icon classes (e.g., fas fa-code, fab fa-react)
                        </p>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Custom ID</label>
                        <input type="text" x-model="newSkill.customId" 
                               class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                               placeholder="Optional custom identifier">
                    </div>
                </div>
                
                <!-- Navigation Buttons -->
                <div class="flex justify-between pt-6 border-t border-gray-200 dark:border-gray-700">
                    <button type="button" 
                            @click="prevSkillTab()"
                            :disabled="activeSkillTab === 'basic'"
                            class="px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        <i class="fas fa-arrow-left mr-2"></i> Previous
                    </button>
                    
                    <button type="button" 
                            @click="activeSkillTab === 'basic' ? activeSkillTab = 'details' : activeSkillTab === 'details' ? activeSkillTab = 'advanced' : addNewSkill()"
                            :disabled="!newSkill.name"
                            class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        <template x-if="activeSkillTab === 'advanced'">
                            <span>
                                <i class="fas fa-check mr-2"></i>
                                <span x-text="editingSkill ? 'Update Skill' : 'Add Skill'"></span>
                            </span>
                        </template>
                        <template x-if="activeSkillTab !== 'advanced'">
                            <span>
                                Next <i class="fas fa-arrow-right ml-2"></i>
                            </span>
                        </template>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Project Modal -->
    <div x-show="modals.addProject" x-transition:enter="transition ease-out duration-300" 
         x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200" 
         x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 dark:text-white">
                        <i class="fas fa-briefcase mr-2"></i>
                        <span x-text="editingProject ? 'Edit Project' : 'Add New Project'"></span>
                    </h3>
                    <button @click="closeModal('addProject')" 
                            class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <!-- Project Form Tabs -->
                <div class="mb-6">
                    <div class="flex border-b border-gray-200 dark:border-gray-700 overflow-x-auto">
                        <button @click="activeProjectTab = 'basic'" 
                                class="px-4 py-2 font-medium whitespace-nowrap transition-colors"
                                :class="activeProjectTab === 'basic' 
                                    ? 'border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400' 
                                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'">
                            Basic Info
                        </button>
                        <button @click="activeProjectTab = 'tech'" 
                                class="px-4 py-2 font-medium whitespace-nowrap transition-colors"
                                :class="activeProjectTab === 'tech' 
                                    ? 'border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400' 
                                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'">
                            Technologies
                        </button>
                        <button @click="activeProjectTab = 'media'" 
                                class="px-4 py-2 font-medium whitespace-nowrap transition-colors"
                                :class="activeProjectTab === 'media' 
                                    ? 'border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400' 
                                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'">
                            Media & Links
                        </button>
                        <button @click="activeProjectTab = 'details'" 
                                class="px-4 py-2 font-medium whitespace-nowrap transition-colors"
                                :class="activeProjectTab === 'details' 
                                    ? 'border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400' 
                                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'">
                            Details
                        </button>
                    </div>
                </div>
                
                <!-- Basic Info Tab -->
                <div x-show="activeProjectTab === 'basic'" class="space-y-6">
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Project Name *</label>
                        <input type="text" x-model="newProject.name" 
                               class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                               placeholder="e.g., E-Commerce Platform"
                               required>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Description *</label>
                        <textarea x-model="newProject.description" rows="4"
                                  class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                  placeholder="Describe the project, its purpose, and key features..."
                                  required></textarea>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Project Type</label>
                            <select x-model="newProject.type" 
                                    class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                <option value="web">Web Application</option>
                                <option value="mobile">Mobile App</option>
                                <option value="api">API</option>
                                <option value="desktop">Desktop</option>
                                <option value="ai">AI/ML</option>
                                <option value="saas">SaaS</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Status</label>
                            <select x-model="newProject.status" 
                                    class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                <option value="completed">Completed</option>
                                <option value="in-progress">In Progress</option>
                                <option value="planned">Planned</option>
                                <option value="on-hold">On Hold</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Start Date</label>
                            <input type="date" x-model="newProject.startDate" 
                                   class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">End Date</label>
                            <input type="date" x-model="newProject.endDate" 
                                   :disabled="newProject.isOngoing"
                                   class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent disabled:opacity-50">
                            <label class="flex items-center mt-2">
                                <input type="checkbox" x-model="newProject.isOngoing" 
                                       class="mr-2 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                <span class="text-sm text-gray-600 dark:text-gray-400">Ongoing Project</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Technologies Tab -->
                <div x-show="activeProjectTab === 'tech'" class="space-y-6">
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Technologies Used</label>
                        <div class="flex gap-2 mb-2">
                            <input type="text" x-model="techInput" 
                                   @keyup.enter="addTechnology()"
                                   class="flex-1 px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                   placeholder="Add technology...">
                            <button @click="addTechnology()" type="button"
                                    class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                                Add
                            </button>
                        </div>
                        
                        <!-- Popular Technologies Suggestions -->
                        <div class="mb-4">
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Popular technologies:</p>
                            <div class="flex flex-wrap gap-2">
                                <template x-for="tech in popularTechnologies.slice(0, 12)" :key="tech">
                                    <button @click="addTechFromSuggestion(tech)" type="button"
                                            class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
                                            :class="{'bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200': newProject.technologies.includes(tech)}">
                                        <span x-text="tech"></span>
                                    </button>
                                </template>
                            </div>
                        </div>
                        
                        <!-- Selected Technologies -->
                        <div class="flex flex-wrap gap-2">
                            <template x-for="tech in newProject.technologies" :key="tech">
                                <span class="px-3 py-2 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-lg flex items-center gap-2">
                                    <i :class="getTechIcon(tech)" class="text-sm"></i>
                                    <span x-text="tech"></span>
                                    <button @click="removeTech(tech)" type="button"
                                            class="text-indigo-600 hover:text-indigo-800">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </span>
                            </template>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Your Role</label>
                        <input type="text" x-model="newProject.role" 
                               class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                               placeholder="e.g., Full Stack Developer, Lead Developer, UI/UX Designer">
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Team Size</label>
                        <input type="number" x-model="newProject.teamSize" min="1" 
                               class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                </div>
                
                <!-- Media & Links Tab -->
                <div x-show="activeProjectTab === 'media'" class="space-y-6">
                    <!-- Image Upload -->
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Project Image</label>
                        <div @dragover.prevent @drop.prevent="handleDrop($event)" 
                             @click="triggerFileInput()"
                             class="border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl p-8 text-center cursor-pointer hover:border-indigo-500 dark:hover:border-indigo-500 transition-colors">
                            <div class="relative">
                                <div x-show="uploadingImage" class="absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center z-10">
                                    <div class="text-white">
                                        <i class="fas fa-spinner fa-spin text-2xl"></i>
                                        <p class="mt-2">Uploading...</p>
                                    </div>
                                </div>
                                
                                <div x-show="!newProject.image" class="space-y-4">
                                    <i class="fas fa-cloud-upload-alt text-4xl text-gray-400"></i>
                                    <div>
                                        <p class="text-gray-600 dark:text-gray-400">Drag & drop or click to upload</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-500 mt-1">Recommended: 800x600px (Max 1MB)</p>
                                    </div>
                                </div>
                                
                                <div x-show="newProject.image" class="relative">
                                    <img :src="newProject.image" alt="Project Preview" class="mx-auto max-h-48 rounded-lg">
                                    <button @click.stop="newProject.image = ''" type="button"
                                            class="absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <input type="file" id="projectImageInput" accept="image/*" @change="uploadImage" class="hidden">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Live Demo URL</label>
                            <input type="url" x-model="newProject.demoUrl" 
                                   class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                   placeholder="https://demo.example.com">
                        </div>
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Source Code URL</label>
                            <input type="url" x-model="newProject.sourceUrl" 
                                   class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                   placeholder="https://github.com/username/project">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Client/Company (Optional)</label>
                        <input type="text" x-model="newProject.client" 
                               class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                               placeholder="Client or company name">
                    </div>
                </div>
                
                <!-- Details Tab -->
                <div x-show="activeProjectTab === 'details'" class="space-y-6">
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Key Features</label>
                        <textarea x-model="newProject.features" rows="4"
                                  class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                  placeholder="List key features, one per line..."></textarea>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                            Enter one feature per line
                        </p>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Challenges & Solutions</label>
                        <textarea x-model="newProject.challenges" rows="4"
                                  class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                  placeholder="Describe challenges faced and how you solved them..."></textarea>
                    </div>
                </div>
                
                <!-- Navigation Buttons -->
                <div class="flex justify-between pt-6 border-t border-gray-200 dark:border-gray-700">
                    <button type="button" 
                            @click="prevProjectTab()"
                            :disabled="activeProjectTab === 'basic'"
                            class="px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        <i class="fas fa-arrow-left mr-2"></i> Previous
                    </button>
                    
                    <button type="button" 
                            @click="activeProjectTab === 'basic' ? activeProjectTab = 'tech' : activeProjectTab === 'tech' ? activeProjectTab = 'media' : activeProjectTab === 'media' ? activeProjectTab = 'details' : addNewProject()"
                            :disabled="!newProject.name || !newProject.description"
                            class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        <template x-if="activeProjectTab === 'details'">
                            <span>
                                <i class="fas fa-check mr-2"></i>
                                <span x-text="editingProject ? 'Update Project' : 'Add Project'"></span>
                            </span>
                        </template>
                        <template x-if="activeProjectTab !== 'details'">
                            <span>
                                Next <i class="fas fa-arrow-right ml-2"></i>
                            </span>
                        </template>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Project Detail Modal -->
    <div x-show="modals.projectDetail" x-transition:enter="transition ease-out duration-300" 
         x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200" 
         x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto">
        <div x-show="selectedProject" class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h3 class="text-3xl font-bold text-gray-800 dark:text-white" x-text="selectedProject?.name"></h3>
                        <div class="flex items-center gap-4 mt-2">
                            <span class="px-3 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full text-sm font-medium">
                                <span x-text="getProjectTypeName(selectedProject?.type)"></span>
                            </span>
                            <span class="px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full text-sm font-medium"
                                  x-text="selectedProject?.status"></span>
                            <span class="text-gray-500 dark:text-gray-400 text-sm" x-text="selectedProject?.date"></span>
                        </div>
                    </div>
                    <button @click="closeModal('projectDetail')" 
                            class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="md:col-span-2 space-y-6">
                        <div>
                            <h4 class="text-xl font-bold text-gray-800 dark:text-white mb-3">Project Overview</h4>
                            <p class="text-gray-600 dark:text-gray-300" x-text="selectedProject?.description"></p>
                        </div>
                        
                        <div x-show="selectedProject?.features && selectedProject?.features.length > 0">
                            <h4 class="text-xl font-bold text-gray-800 dark:text-white mb-3">Key Features</h4>
                            <ul class="grid grid-cols-2 gap-2">
                                <template x-for="feature in selectedProject?.features" :key="feature">
                                    <li class="flex items-center gap-2 text-gray-600 dark:text-gray-300">
                                        <i class="fas fa-check text-green-500"></i>
                                        <span x-text="feature"></span>
                                    </li>
                                </template>
                            </ul>
                        </div>
                        
                        <div x-show="selectedProject?.technologies && selectedProject?.technologies.length > 0">
                            <h4 class="text-xl font-bold text-gray-800 dark:text-white mb-3">Technologies Used</h4>
                            <div class="flex flex-wrap gap-2">
                                <template x-for="tech in selectedProject?.technologies" :key="tech">
                                    <span class="px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 rounded-lg flex items-center gap-2">
                                        <i :class="getTechIcon(tech)" class="text-sm"></i>
                                        <span x-text="tech"></span>
                                    </span>
                                </template>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="rounded-xl overflow-hidden">
                            <img :src="selectedProject?.image" :alt="selectedProject?.name" 
                                 @error="handleProjectImageError($event, selectedProject?.id)"
                                 class="w-full h-48 object-cover">
                        </div>
                        
                        <div class="space-y-4">
                            <div x-show="selectedProject?.demoUrl">
                                <a :href="selectedProject?.demoUrl" target="_blank" 
                                   class="block w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white text-center py-3 rounded-lg font-bold transition-all duration-300">
                                    <i class="fas fa-external-link-alt mr-2"></i> View Live Demo
                                </a>
                            </div>
                            
                            <div x-show="selectedProject?.sourceUrl">
                                <a :href="selectedProject?.sourceUrl" target="_blank" 
                                   class="block w-full bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-900 hover:to-black text-white text-center py-3 rounded-lg font-bold transition-all duration-300">
                                    <i class="fab fa-github mr-2"></i> View Source Code
                                </a>
                            </div>
                            
                            <!-- Edit/Delete Buttons (Edit Mode Only) -->
                            <div x-show="!isPublicMode" class="space-y-2">
                                <button @click="editProject(selectedProject); closeModal('projectDetail')" 
                                        class="w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-bold transition-colors">
                                    <i class="fas fa-edit mr-2"></i> Edit Project
                                </button>
                                <button @click="confirmDelete('project', selectedProject?.id, selectedProject?.name); closeModal('projectDetail')" 
                                        class="w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-bold transition-colors">
                                    <i class="fas fa-trash mr-2"></i> Delete Project
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div x-show="modals.editProfile" x-transition:enter="transition ease-out duration-300" 
         x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200" 
         x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 dark:text-white">
                        <i class="fas fa-user-edit mr-2"></i> Edit Profile
                    </h3>
                    <button @click="closeModal('editProfile')" 
                            class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <div class="space-y-6">
                    <!-- Profile Image -->
                    <div class="flex items-center gap-6">
                        <div class="relative">
                            <img :src="profileImageSrc" alt="Profile" 
                                 class="w-24 h-24 rounded-full object-cover border-4 border-white dark:border-gray-800 shadow-lg">
                            <label for="editProfileImageUpload" 
                                   class="absolute bottom-0 right-0 bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded-full cursor-pointer shadow-lg transition-all duration-300">
                                <i class="fas fa-camera"></i>
                                <input id="editProfileImageUpload" type="file" accept="image/*" @change="uploadProfileImage" class="hidden">
                            </label>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-800 dark:text-white">Profile Image</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Upload a clear professional photo</p>
                        </div>
                    </div>
                    
                    <!-- Profile Form -->
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Full Name *</label>
                            <input type="text" x-model="profile.name" 
                                   class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                   required>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Job Title *</label>
                            <input type="text" x-model="profile.title" 
                                   class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                   required>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Email *</label>
                            <input type="email" x-model="profile.email" 
                                   class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                   required>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Phone</label>
                            <input type="tel" x-model="profile.phone" 
                                   class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Bio *</label>
                        <textarea x-model="profile.bio" rows="4"
                                  class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                  required></textarea>
                    </div>
                    
                    <div class="flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700">
                        <button @click="closeModal('editProfile')" 
                                class="px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                            Cancel
                        </button>
                        <button @click="updateProfile()" 
                                class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            Save Changes
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div x-show="modals.deleteConfirm" x-transition:enter="transition ease-out duration-300" 
         x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200" 
         x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full">
            <div class="p-6">
                <div class="text-center">
                    <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4">
                        <i class="fas fa-exclamation-triangle text-red-600 dark:text-red-400 text-xl"></i>
                    </div>
                    
                    <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">
                        Confirm Deletion
                    </h3>
                    
                    <p class="text-gray-600 dark:text-gray-300 mb-6">
                        Are you sure you want to delete 
                        <span class="font-bold text-red-600" x-text="deleteItem.name"></span>? 
                        This action cannot be undone.
                    </p>
                    
                    <div class="flex justify-center gap-4">
                        <button @click="closeModal('deleteConfirm')" 
                                class="px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                            Cancel
                        </button>
                        <button @click="executeDelete()" 
                                class="px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                            Delete
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div x-show="showAuthModal" x-transition:enter="transition ease-out duration-300" 
         x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200" 
         x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800 dark:text-white">
                    <i class="fas fa-lock mr-2"></i>Login Diperlukan
                </h3>
                <button @click="showAuthModal = false" 
                        class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <p class="text-gray-600 dark:text-gray-300 mb-6">
                Login dengan Google untuk mengaktifkan mode edit dan menyimpan perubahan Anda ke cloud.
            </p>
            
            <div class="space-y-4">
                <button @click="loginWithGoogle(); showAuthModal = false" 
                        class="w-full bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 px-4 py-3 rounded-lg flex items-center justify-center gap-3 transition-all duration-300">
                    <i class="fab fa-google text-red-500"></i>
                    <span>Login dengan Google</span>
                </button>
                
                <div class="text-center text-sm text-gray-500 dark:text-gray-400">
                    Hanya perlu login sekali
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBAuVIJp4jZCzxuBIBFez2SdLMi7MNHNJk",
            authDomain: "portofolio-4a7eb.firebaseapp.com",
            projectId: "portofolio-4a7eb",
            storageBucket: "portofolio-4a7eb.firebasestorage.app",
            messagingSenderId: "36345970852",
            appId: "1:36345970852:web:d0a47e15126f7038fce631"
        };

        // Predefined public portfolio data
        const predefinedPublicData = {
            profile: {
                name: 'Zuyyina Firdausi Muhammad',
                title: 'Full Stack Developer',
                email: 'muhammadzuyyina@gmail.com',
                phone: '+62 822 9569 2941',
                bio: 'Experienced Full Stack Developer with expertise in modern web technologies. Passionate about creating efficient, scalable, and user-friendly applications.',
                image: null
            },
            skills: [
                {
                    id: 1,
                    name: 'React',
                    category: 'frontend',
                    level: 95,
                    years: 3,
                    projects: 15,
                    icon: 'fab fa-react',
                    description: 'Modern React with Hooks, Context API, and advanced patterns'
                },
                {
                    id: 2,
                    name: 'Node.js',
                    category: 'backend',
                    level: 90,
                    years: 3,
                    projects: 12,
                    icon: 'fab fa-node-js',
                    description: 'Building scalable server-side applications and APIs'
                },
                {
                    id: 3,
                    name: 'MongoDB',
                    category: 'database',
                    level: 85,
                    years: 2,
                    projects: 8,
                    icon: 'fas fa-database',
                    description: 'NoSQL database design and optimization'
                },
                {
                    id: 4,
                    name: 'Tailwind CSS',
                    category: 'frontend',
                    level: 90,
                    years: 2,
                    projects: 10,
                    icon: 'fas fa-paint-brush',
                    description: 'Utility-first CSS framework for rapid UI development'
                },
                {
                    id: 5,
                    name: 'Docker',
                    category: 'devops',
                    level: 80,
                    years: 1,
                    projects: 5,
                    icon: 'fab fa-docker',
                    description: 'Containerization and deployment automation'
                },
                {
                    id: 6,
                    name: 'Python',
                    category: 'backend',
                    level: 75,
                    years: 2,
                    projects: 7,
                    icon: 'fab fa-python',
                    description: 'Backend development and automation scripts'
                }
            ],
            projects: [
                {
                    id: 1,
                    name: 'E-Commerce Platform',
                    description: 'A full-featured e-commerce platform with real-time inventory management, payment processing, and customer analytics. Built with React, Node.js, and MongoDB.',
                    type: 'web',
                    technologies: ['React', 'Node.js', 'MongoDB', 'Express.js', 'Tailwind CSS', 'Stripe API'],
                    image: 'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    demoUrl: '#',
                    sourceUrl: '#',
                    features: ['Real-time inventory', 'Payment integration', 'Admin dashboard', 'Customer analytics'],
                    status: 'completed',
                    date: '2024'
                },
                {
                    id: 2,
                    name: 'Task Management App',
                    description: 'Collaborative task management application with real-time updates, team features, and drag-and-drop interface. Built with Vue.js and Firebase.',
                    type: 'web',
                    technologies: ['Vue.js', 'Firebase', 'Vuex', 'Vue Router', 'Tailwind CSS'],
                    image: 'https://images.unsplash.com/photo-1611224923853-80b023f02d71?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    demoUrl: '#',
                    sourceUrl: '#',
                    features: ['Real-time collaboration', 'Team management', 'File attachments', 'Drag & drop'],
                    status: 'completed',
                    date: '2024'
                },
                {
                    id: 3,
                    name: 'Weather Dashboard',
                    description: 'Real-time weather dashboard with multiple city support, 7-day forecast, and interactive maps. Uses OpenWeather API and Chart.js.',
                    type: 'web',
                    technologies: ['React', 'Chart.js', 'OpenWeather API', 'Leaflet.js', 'CSS3'],
                    image: 'https://images.unsplash.com/photo-1592210454359-9043f067919b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    demoUrl: '#',
                    sourceUrl: '#',
                    features: ['Multiple cities', '7-day forecast', 'Interactive maps', 'Data visualization'],
                    status: 'completed',
                    date: '2023'
                },
                {
                    id: 4,
                    name: 'Fitness Tracker App',
                    description: 'Mobile fitness tracking application with workout plans, progress tracking, and social features. Built with React Native and Firebase.',
                    type: 'mobile',
                    technologies: ['React Native', 'Firebase', 'Redux', 'Expo', 'Chart.js'],
                    image: 'https://images.unsplash.com/photo-1536922246289-88c42f957773?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    demoUrl: '#',
                    sourceUrl: '#',
                    features: ['Workout plans', 'Progress tracking', 'Social features', 'Offline mode'],
                    status: 'completed',
                    date: '2023'
                },
                {
                    id: 5,
                    name: 'Chat Application',
                    description: 'Real-time chat application with group chat, file sharing, and voice messages. Built with Socket.io, Node.js, and React.',
                    type: 'web',
                    technologies: ['React', 'Socket.io', 'Node.js', 'Express', 'MongoDB'],
                    image: 'https://images.unsplash.com/photo-1587560699334-cc4ff634909a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    demoUrl: '#',
                    sourceUrl: '#',
                    features: ['Group chat', 'File sharing', 'Voice messages', 'Typing indicators'],
                    status: 'completed',
                    date: '2023'
                },
                {
                    id: 6,
                    name: 'Portfolio CMS',
                    description: 'Content management system for managing portfolio projects, skills, and blog posts. Built with Next.js and Sanity.io.',
                    type: 'web',
                    technologies: ['Next.js', 'Sanity.io', 'TypeScript', 'Tailwind CSS', 'Vercel'],
                    image: 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    demoUrl: '#',
                    sourceUrl: '#',
                    features: ['Content management', 'Blog system', 'SEO optimized', 'Dark mode'],
                    status: 'completed',
                    date: '2024'
                }
            ],
            socialLinks: [
                {
                    platform: 'github',
                    icon: 'fab fa-github',
                    url: 'https://github.com/username'
                },
                {
                    platform: 'linkedin',
                    icon: 'fab fa-linkedin-in',
                    url: 'https://linkedin.com/in/username'
                },
                {
                    platform: 'twitter',
                    icon: 'fab fa-twitter',
                    url: 'https://twitter.com/username'
                },
                {
                    platform: 'email',
                    icon: 'fas fa-envelope',
                    url: 'mailto:muhammadzuyyina@gmail.com'
                }
            ]
        };

        function portfolio() {
            return {
                // STATE BARU: Mode Management
                isPublicMode: true,
                isOwner: false,
                showAuthModal: false,
                
                // STATE YANG DIUPDATE: Load status
                isLoading: true,
                loadingMessage: 'Loading portfolio...',
                loadingProgress: 0,
                portfolioDataLoaded: false,

                // State lainnya
                isDark: true,
                mobileMenu: false,
                activeSection: 'home',
                scrollProgress: 0,
                isAtTop: true,
                showToast: false,
                toastMessage: '',
                toastType: 'success',
                showDataPanel: false,
                techInput: '',
                certificationInput: '',
                tagInput: '',
                activeSkillCategory: 'all',
                activeSkillTab: 'basic',
                activeProjectTab: 'basic',
                selectedProject: null,
                editingSkill: null,
                editingProject: null,
                uploadingImage: false,
                uploadingProfileImage: false,
                isSubmitting: false,
                deleteItem: { type: '', id: null, name: '' },

                // Firebase State
                firebaseApp: null,
                firestore: null,
                auth: null,
                userId: null,
                userEmail: null,
                isOnline: false,
                isSyncing: false,
                syncHistory: [],
                lastSyncTime: 'Never',

                // Data Status
                dataStatus: 'synced',
                storageAvailable: true,
                dataIntegrity: false,
                storageUsage: '0 KB',

                // Project Slider State
                projectView: 'grid',
                currentSlide: 0,
                projectSlides: [],
                autoSlideEnabled: false,
                autoSlideInterval: null,
                projectsPerSlide: 3,

                // Storage Configuration
                storageConfig: {
                    maxImageSize: 1 * 1024 * 1024,
                    compressionQuality: 0.7,
                    enableCompression: true,
                    maxTotalSize: 5 * 1024 * 1024,
                    backupCount: 3
                },

                // Profile Data
                profile: { ...predefinedPublicData.profile },
                skills: [...predefinedPublicData.skills],
                projects: [...predefinedPublicData.projects],
                socialLinks: [...predefinedPublicData.socialLinks],
                portfolioYear: new Date().getFullYear(),

                // Navigation
                navItems: [
                    { name: 'Home', href: '#home' },
                    { name: 'Skills', href: '#skills' },
                    { name: 'Projects', href: '#projects' },
                    { name: 'Contact', href: '#contact' }
                ],

                // Skill Categories
                skillCategories: [
                    'frontend', 'backend', 'database', 'mobile', 
                    'devops', 'cloud', 'tools', 'design', 'ai'
                ],

                // Popular Technologies
                popularTechnologies: [
                    'HTML5', 'CSS3', 'JavaScript', 'TypeScript', 'React', 'Vue.js', 'Angular', 
                    'Svelte', 'Next.js', 'Nuxt.js', 'Tailwind CSS', 'Bootstrap', 'SASS/SCSS',
                    'Node.js', 'Express.js', 'Python', 'Django', 'Flask', 'PHP', 'Laravel', 
                    'Java', 'Spring Boot', 'Go', 'Ruby', 'Ruby on Rails', 'C#', '.NET',
                    'MongoDB', 'MySQL', 'PostgreSQL', 'Firebase', 'Redis', 'SQLite', 'Supabase',
                    'React Native', 'Flutter', 'Electron', 'Swift', 'Kotlin',
                    'Docker', 'Kubernetes', 'AWS', 'Google Cloud', 'Azure', 'Vercel', 'Netlify',
                    'Git', 'GitHub Actions', 'Jenkins', 'Nginx',
                    'GraphQL', 'REST API', 'Jest', 'Cypress', 'Webpack', 'Figma', 'Adobe XD'
                ],

                // New Skill Data
                newSkill: {
                    name: '',
                    category: 'frontend',
                    level: 50,
                    years: 1,
                    projects: 0,
                    icon: 'fas fa-code',
                    description: '',
                    certifications: [],
                    tags: [],
                    customId: ''
                },

                // New Project Data
                newProject: {
                    name: '',
                    description: '',
                    type: 'web',
                    technologies: [],
                    image: '',
                    demoUrl: '',
                    sourceUrl: '',
                    startDate: '',
                    endDate: '',
                    isOngoing: false,
                    role: '',
                    teamSize: 1,
                    status: 'completed',
                    client: '',
                    challenges: '',
                    features: []
                },

                // Contact Form
                contactForm: {
                    name: '',
                    email: '',
                    message: ''
                },

                // Modals
                modals: {
                    projectDetail: false,
                    addProject: false,
                    addSkill: false,
                    editProfile: false,
                    deleteConfirm: false
                },

                // COMPUTED PROPERTIES
                get filteredSkills() {
                    if (this.activeSkillCategory === 'all') {
                        return this.skills;
                    }
                    return this.skills.filter(skill => skill.category === this.activeSkillCategory);
                },

                get averageSkillLevel() {
                    if (this.skills.length === 0) return 0;
                    const total = this.skills.reduce((sum, skill) => sum + skill.level, 0);
                    return Math.round(total / this.skills.length);
                },

                get totalProjectCount() {
                    return this.skills.reduce((total, skill) => total + skill.projects, 0);
                },

                get totalExperienceYears() {
                    const startYear = 2023;
                    const currentYear = new Date().getFullYear();
                    return Math.max(1, currentYear - startYear);
                },

                get totalItems() {
                    return this.skills.length + this.projects.length;
                },

                get connectionStatusText() {
                    if (!this.isOnline) return 'Offline';
                    if (this.isSyncing) return 'Syncing...';
                    if (this.userId) return 'Cloud Sync Active';
                    return 'Cloud Data Loaded';
                },

                get dataStatusText() {
                    if (this.dataStatus === 'synced') return 'Data Synced';
                    if (this.dataStatus === 'unsynced') return 'Data Not Synced';
                    return 'Data Error';
                },

                get profileImageSrc() {
                    if (!this.profile.image || this.profile.image.trim() === '') {
                        return this.generateDefaultAvatar();
                    }
                    return this.profile.image;
                },

                // INITIALIZATION
                init() {
                    console.log('ðŸš€ Portfolio initialization started');
                    
                    this.setupEventListeners();
                    
                    const savedTheme = localStorage.getItem('theme');
                    this.isDark = savedTheme ? savedTheme === 'dark' : true;

                    this.initParticles();

                    this.isOnline = navigator.onLine;
                    console.log('ðŸŒ Online status:', this.isOnline);
                    
                    window.addEventListener('online', () => {
                        this.isOnline = true;
                        console.log('ðŸŒ Went online');
                        this.showToastMessage('You are back online', 'success');
                        if (this.isOnline) {
                            setTimeout(() => this.initFirebasePublic(), 1000);
                        }
                    });
                    
                    window.addEventListener('offline', () => {
                        this.isOnline = false;
                        console.log('ðŸŒ Went offline');
                        this.showToastMessage('You are offline', 'warning');
                    });

                    // Cek jika user sudah login sebelumnya
                    const savedAuth = localStorage.getItem('firebase_auth');
                    if (savedAuth) {
                        try {
                            const authData = JSON.parse(savedAuth);
                            console.log('ðŸ”‘ Found saved auth data:', authData.email);
                            
                            // Set user data
                            this.userId = authData.uid;
                            this.userEmail = authData.email;
                            this.isOwner = true;
                            this.isPublicMode = false;
                            
                            console.log('âœ… Restored login from localStorage');
                            
                        } catch (e) {
                            console.error('Error parsing saved auth:', e);
                        }
                    }

                    console.log('â³ Initializing Firebase for public access...');
                    setTimeout(() => {
                        this.initFirebasePublic();
                    }, 1000);
                    
                    this.updateProjectSlides();
                    
                    setTimeout(() => {
                        this.isLoading = false;
                        console.log('âœ… Portfolio loaded successfully');
                    }, 1500);
                },

                // FIREBASE INITIALIZATION UNTUK PUBLIC ACCESS
                initFirebasePublic() {
                    console.log('ðŸš€ Attempting to initialize Firebase for public access...');
                    
                    try {
                        if (typeof firebase === 'undefined') {
                            console.error('âŒ Firebase SDK not loaded!');
                            this.showToastMessage('Firebase SDK not loaded. Using predefined data.', 'warning');
                            this.usePredefinedData();
                            return;
                        }
                        
                        console.log('âœ… Firebase SDK is loaded');
                        
                        try {
                            if (!firebase.apps || firebase.apps.length === 0) {
                                console.log('ðŸ”„ Initializing new Firebase app...');
                                this.firebaseApp = firebase.initializeApp(firebaseConfig);
                                console.log('âœ… Firebase app initialized');
                            } else {
                                console.log('âœ… Using existing Firebase app');
                                this.firebaseApp = firebase.app();
                            }
                        } catch (initError) {
                            console.error('âŒ Firebase app initialization error:', initError);
                            this.showToastMessage('Using predefined portfolio data', 'info');
                            this.usePredefinedData();
                            return;
                        }
                        
                        try {
                            this.firestore = firebase.firestore(this.firebaseApp);
                            console.log('âœ… Firestore initialized');
                        } catch (firestoreError) {
                            console.error('âŒ Firestore initialization error:', firestoreError);
                            this.showToastMessage('Using predefined portfolio data', 'info');
                            this.usePredefinedData();
                            return;
                        }
                        
                        try {
                            this.auth = firebase.auth(this.firebaseApp);
                            console.log('âœ… Auth initialized');
                        } catch (authError) {
                            console.warn('âš ï¸ Auth initialization warning:', authError);
                        }
                        
                        this.loadPublicData();
                        
                    } catch (error) {
                        console.error('âŒ General Firebase init error:', error);
                        this.showToastMessage('Using predefined portfolio data', 'info');
                        this.usePredefinedData();
                    }
                },

                // LOAD PUBLIC DATA DARI FIREBASE
                loadPublicData() {
                    if (!this.firestore || !this.isOnline) {
                        console.log('âš ï¸ Cannot load from Firebase: Firestore or internet not available');
                        this.usePredefinedData();
                        return;
                    }
                    
                    console.log('ðŸ“¥ Loading public data from Firebase...');
                    
                    this.isLoading = true;
                    this.loadingMessage = 'Loading portfolio data...';
                    
                    const timeoutPromise = new Promise((_, reject) => {
                        setTimeout(() => {
                            reject(new Error('Timeout loading data from Firebase'));
                        }, 10000);
                    });
                    
                    const loadPromise = this.firestore.collection('publicPortfolios').doc('main').get();
                    
                    Promise.race([loadPromise, timeoutPromise])
                        .then((doc) => {
                            if (doc.exists) {
                                const data = doc.data();
                                console.log('âœ… Public data loaded successfully from Firebase');
                                
                                this.updateDataFromFirebase(data);
                                
                                if (data.lastUpdated) {
                                    this.lastSyncTime = new Date(data.lastUpdated.toDate()).toLocaleString();
                                } else {
                                    this.lastSyncTime = 'Recently';
                                }
                                
                                this.dataStatus = 'synced';
                                this.showToastMessage('Portfolio data loaded from cloud', 'success');
                                
                            } else {
                                console.log('âš ï¸ No public data found in Firebase, using predefined data');
                                this.usePredefinedData();
                            }
                        })
                        .catch((error) => {
                            console.error('âŒ Load public data error:', error);
                            this.showToastMessage('Using predefined portfolio data', 'info');
                            this.usePredefinedData();
                        })
                        .finally(() => {
                            this.isLoading = false;
                            this.portfolioDataLoaded = true;
                        });
                },

                // UPDATE DATA DARI FIREBASE
                updateDataFromFirebase(data) {
                    try {
                        console.log('ðŸ”„ Updating data from Firebase...');
                        
                        if (data.skills && Array.isArray(data.skills)) {
                            this.skills = data.skills;
                            console.log(`âœ… Loaded ${this.skills.length} skills`);
                        }
                        
                        if (data.projects && Array.isArray(data.projects)) {
                            this.projects = data.projects;
                            this.updateProjectSlides();
                            console.log(`âœ… Loaded ${this.projects.length} projects`);
                        }
                        
                        if (data.profile) {
                            Object.assign(this.profile, data.profile);
                            console.log('âœ… Profile data loaded');
                        }
                        
                        if (data.socialLinks) {
                            this.socialLinks = data.socialLinks.map(link => ({
                                platform: link.platform,
                                url: link.url || '',
                                icon: link.icon || this.getSocialIcon(link.platform)
                            }));
                            console.log(`âœ… Loaded ${this.socialLinks.length} social links`);
                        }
                        
                        this.saveToLocalStorage();
                        
                    } catch (error) {
                        console.error('Error updating data from Firebase:', error);
                        this.showToastMessage('Error loading cloud data', 'warning');
                    }
                },

                // USE PREDEFINED DATA (fallback)
                usePredefinedData() {
                    console.log('ðŸ“Š Using predefined portfolio data');
                    
                    this.skills = [...predefinedPublicData.skills];
                    this.projects = [...predefinedPublicData.projects];
                    this.profile = { ...predefinedPublicData.profile };
                    this.socialLinks = [...predefinedPublicData.socialLinks];
                    
                    this.updateProjectSlides();
                    this.saveToLocalStorage();
                    
                    this.isLoading = false;
                    this.portfolioDataLoaded = true;
                },

                // AUTH METHODS
                loginWithGoogle() {
                    console.log('ðŸ”‘ Memulai login Google...');
                    this.isSyncing = true;
                    this.showToastMessage('Sedang login...', 'info');
                    
                    try {
                        // Pastikan Firebase diinisialisasi
                        if (!this.firebaseApp) {
                            console.log('ðŸ”„ Menginisialisasi Firebase untuk auth...');
                            this.firebaseApp = firebase.initializeApp(firebaseConfig);
                            this.auth = firebase.auth(this.firebaseApp);
                        }
                        
                        const provider = new firebase.auth.GoogleAuthProvider();
                        provider.addScope('profile');
                        provider.addScope('email');
                        provider.setCustomParameters({ prompt: 'select_account' });
                        
                        console.log('ðŸ”‘ Login dengan popup...');
                        
                        this.auth.signInWithPopup(provider)
                            .then((result) => {
                                console.log('ðŸŽ‰ Login BERHASIL! User:', result.user.email);
                                
                                this.userId = result.user.uid;
                                this.userEmail = result.user.email;
                                this.isSyncing = false;
                                this.isPublicMode = false;
                                this.isOwner = true;
                                
                                // Simpan data auth
                                this.saveAuthData(result.user);
                                
                                this.showToastMessage(`ðŸŽ‰ Selamat datang ${result.user.displayName || result.user.email}! Mode edit diaktifkan.`, 'success');
                                
                                // Muat data pengguna
                                setTimeout(() => {
                                    this.loadUserData();
                                }, 500);
                                
                            })
                            .catch((error) => {
                                console.error('âŒ Error login:', error);
                                this.isSyncing = false;
                                
                                let errorMessage = 'Login gagal';
                                if (error.code === 'auth/popup-blocked') {
                                    errorMessage = 'Popup login diblokir. Silakan izinkan pop-up.';
                                } else if (error.code === 'auth/popup-closed-by-user') {
                                    errorMessage = 'Login dibatalkan';
                                } else if (error.code === 'auth/network-request-failed') {
                                    errorMessage = 'Error jaringan. Cek koneksi internet Anda.';
                                }
                                
                                this.showToastMessage(`âŒ ${errorMessage}`, 'error');
                            });
                            
                    } catch (setupError) {
                        console.error('âŒ Setup login error:', setupError);
                        this.isSyncing = false;
                        this.showToastMessage('Setup login gagal. Silakan coba lagi.', 'error');
                    }
                },

                saveAuthData(user) {
                    try {
                        const authData = {
                            uid: user.uid,
                            email: user.email,
                            displayName: user.displayName,
                            photoURL: user.photoURL,
                            lastLogin: new Date().toISOString(),
                        };
                        
                        localStorage.setItem('firebase_auth', JSON.stringify(authData));
                        console.log('âœ… Data auth disimpan');
                        
                    } catch (error) {
                        console.error('âŒ Error menyimpan data auth:', error);
                    }
                },

                signOut() {
                    if (!this.auth) {
                        this.showToastMessage('Firebase Auth tidak terinisialisasi', 'warning');
                        return;
                    }
                    
                    if (confirm('Apakah Anda yakin ingin logout?')) {
                        this.auth.signOut()
                            .then(() => {
                                console.log('âœ… Logout berhasil');
                                
                                localStorage.removeItem('firebase_auth');
                                this.userId = null;
                                this.userEmail = null;
                                this.isOwner = false;
                                this.isPublicMode = true;
                                
                                // Muat ulang data publik
                                this.loadPublicData();
                                
                                this.showToastMessage('Logout berhasil', 'success');
                                
                            })
                            .catch((error) => {
                                console.error('Error logout:', error);
                                this.showToastMessage('Logout gagal', 'error');
                            });
                    }
                },

                loadUserData() {
                    if (!this.userId || !this.firestore || !this.isOnline) {
                        console.log('âš ï¸ Tidak bisa memuat data pengguna');
                        return;
                    }
                    
                    console.log('ðŸ“¥ Memuat data pengguna untuk:', this.userId);
                    this.showToastMessage('Memuat data pribadi Anda...', 'info');
                    
                    this.firestore.collection('portfolios').doc(this.userId).get()
                        .then((doc) => {
                            if (doc.exists) {
                                const data = doc.data();
                                console.log('âœ… Data pengguna dimuat');
                                
                                // Gabungkan dengan data publik
                                this.mergeUserData(data);
                                this.showToastMessage('Data Anda dimuat dari cloud', 'success');
                            } else {
                                console.log('âš ï¸ Tidak ada data pengguna ditemukan, menggunakan data saat ini');
                                this.showToastMessage('Membuat profil baru untuk Anda', 'info');
                            }
                        })
                        .catch((error) => {
                            console.error('âŒ Error memuat data pengguna:', error);
                            this.showToastMessage('Error memuat data pribadi', 'warning');
                        });
                },

                mergeUserData(userData) {
                    try {
                        console.log('ðŸ”„ Menggabungkan data pengguna...');
                        
                        if (userData.skills && Array.isArray(userData.skills)) {
                            this.skills = userData.skills;
                            console.log(`âœ… Dimuat ${this.skills.length} skill`);
                        }
                        
                        if (userData.projects && Array.isArray(userData.projects)) {
                            this.projects = userData.projects;
                            this.updateProjectSlides();
                            console.log(`âœ… Dimuat ${this.projects.length} proyek`);
                        }
                        
                        if (userData.profile) {
                            Object.assign(this.profile, userData.profile);
                            console.log('âœ… Data profil dimuat');
                        }
                        
                        if (userData.socialLinks) {
                            this.socialLinks = userData.socialLinks.map(link => ({
                                platform: link.platform,
                                url: link.url || '',
                                icon: link.icon || this.getSocialIcon(link.platform)
                            }));
                            console.log(`âœ… Dimuat ${this.socialLinks.length} link sosial`);
                        }
                        
                        this.saveToLocalStorage();
                        
                    } catch (error) {
                        console.error('Error menggabungkan data pengguna:', error);
                        this.showToastMessage('Error menggabungkan data', 'warning');
                    }
                },

                publishToPublic() {
                    if (!this.userId) {
                        this.showToastMessage('Silakan login terlebih dahulu untuk publish', 'warning');
                        setTimeout(() => {
                            this.loginWithGoogle();
                        }, 500);
                        return;
                    }
                    
                    if (!this.firestore) {
                        this.showToastMessage('Firebase Firestore tidak tersedia', 'error');
                        return;
                    }
                    
                    if (!this.isOnline) {
                        this.showToastMessage('Anda offline. Tidak bisa publish ke cloud.', 'warning');
                        return;
                    }
                    
                    if (!confirm('Publish perubahan Anda untuk membuatnya terlihat publik?')) {
                        return;
                    }
                    
                    this.isSyncing = true;
                    this.showToastMessage('Mempublish portfolio Anda...', 'info');
                    
                    const data = {
                        skills: this.skills,
                        projects: this.projects,
                        profile: this.profile,
                        socialLinks: this.socialLinks,
                        lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                        updatedBy: this.userEmail,
                        version: '2.0',
                        published: true
                    };
                    
                    console.log('Mempublish data ke koleksi publik...');
                    
                    this.firestore.collection('publicPortfolios').doc('main')
                        .set(data, { merge: true })
                        .then(() => {
                            console.log('âœ… Terpublish ke koleksi publik');
                            
                            // Juga simpan ke koleksi pribadi pengguna
                            return this.firestore.collection('portfolios').doc(this.userId)
                                .set({ ...data, userId: this.userId }, { merge: true });
                        })
                        .then(() => {
                            console.log('âœ… Disimpan ke koleksi pengguna');
                            
                            this.lastSyncTime = new Date().toLocaleTimeString();
                            this.dataStatus = 'synced';
                            this.isSyncing = false;
                            
                            this.showToastMessage('âœ… Portfolio berhasil dipublish!', 'success');
                            this.addToSyncHistory('Data dipublish', 'success');
                            
                        })
                        .catch((error) => {
                            console.error('âŒ Error publish:', error);
                            this.isSyncing = false;
                            
                            let errorMessage = 'Publish gagal';
                            if (error.code === 'permission-denied') {
                                errorMessage = 'Izin ditolak. Anda mungkin tidak punya akses tulis.';
                            }
                            
                            this.showToastMessage(`âŒ ${errorMessage}`, 'error');
                            this.addToSyncHistory('Publish gagal', 'error');
                        });
                },

                // TOGGLE MODE (Public/Edit)
                toggleMode() {
                    if (this.isPublicMode) {
                        if (!this.userId) {
                            this.showAuthModal = true;
                            this.showToastMessage('Please login to enable edit mode', 'info');
                            return;
                        }
                        this.isPublicMode = false;
                        this.showToastMessage('Edit mode enabled', 'success');
                    } else {
                        this.isPublicMode = true;
                        this.showToastMessage('View mode enabled', 'info');
                    }
                },

                // EVENT LISTENERS
                setupEventListeners() {
                    window.addEventListener('scroll', this.handleScroll.bind(this));
                    window.addEventListener('resize', this.handleResize.bind(this));
                    
                    window.addEventListener('beforeunload', () => {
                        if (!this.isPublicMode) {
                            this.saveToLocalStorage();
                        }
                    });
                },

                handleScroll() {
                    const winScroll = document.documentElement.scrollTop || document.body.scrollTop;
                    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                    this.scrollProgress = height > 0 ? (winScroll / height) * 100 : 0;
                    
                    this.isAtTop = window.scrollY < 50;
                    
                    const sections = ['home', 'skills', 'projects', 'contact'];
                    for (const section of sections) {
                        const element = document.getElementById(section);
                        if (element) {
                            const rect = element.getBoundingClientRect();
                            if (rect.top <= 100 && rect.bottom >= 100) {
                                this.activeSection = section;
                                break;
                            }
                        }
                    }
                },

                handleResize() {
                    if (window.innerWidth < 768) {
                        this.projectsPerSlide = 1;
                    } else if (window.innerWidth < 1024) {
                        this.projectsPerSlide = 2;
                    } else {
                        this.projectsPerSlide = 3;
                    }
                    
                    this.updateProjectSlides();
                },

                toggleTheme() {
                    this.isDark = !this.isDark;
                    localStorage.setItem('theme', this.isDark ? 'dark' : 'light');
                    
                    if (window.pJSDom && window.pJSDom.length > 0) {
                        const particles = window.pJSDom[0].pJS;
                        if (particles) {
                            particles.particles.color.value = this.isDark ? "#ffffff" : "#6366f1";
                            particles.particles.line_linked.color = this.isDark ? "#ffffff" : "#6366f1";
                            particles.fn.particlesRefresh();
                        }
                    }
                },

                scrollTo(sectionId) {
                    const element = document.getElementById(sectionId);
                    if (element) {
                        const offset = 80;
                        const elementPosition = element.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - offset;

                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                    }
                    this.mobileMenu = false;
                },

                // MODAL METHODS
                openModal(modalName) {
                    if (this.isPublicMode && (modalName === 'addSkill' || modalName === 'addProject' || modalName === 'editProfile' || modalName === 'deleteConfirm')) {
                        this.showToastMessage('Please switch to edit mode to make changes', 'info');
                        return;
                    }
                    this.modals[modalName] = true;
                    document.body.style.overflow = 'hidden';
                },

                closeModal(modalName) {
                    this.modals[modalName] = false;
                    document.body.style.overflow = 'auto';
                    
                    if (modalName === 'addSkill') {
                        this.resetSkillForm();
                    } else if (modalName === 'addProject') {
                        this.resetProjectForm();
                    }
                },

                // SKILL METHODS
                addNewSkill() {
                    if (this.isPublicMode) return;
                    
                    try {
                        this.isSubmitting = true;

                        const newSkill = {
                            id: this.editingSkill ? this.editingSkill.id : Date.now(),
                            ...this.newSkill,
                            icon: this.getSkillIcon(this.newSkill.category)
                        };

                        if (this.editingSkill) {
                            const index = this.skills.findIndex(s => s.id === this.editingSkill.id);
                            if (index !== -1) {
                                this.skills[index] = newSkill;
                            }
                            this.showToastMessage('Skill updated successfully', 'success');
                        } else {
                            this.skills.push(newSkill);
                            this.showToastMessage('Skill added successfully', 'success');
                        }

                        this.saveToLocalStorage();
                        this.closeModal('addSkill');
                        this.resetSkillForm();
                    } catch (error) {
                        this.showToastMessage('Error saving skill', 'error');
                        console.error('Error adding skill:', error);
                    } finally {
                        this.isSubmitting = false;
                    }
                },

                // PROJECT METHODS
                addNewProject() {
                    if (this.isPublicMode) return;
                    
                    try {
                        this.isSubmitting = true;

                        const newProject = {
                            id: this.editingProject ? this.editingProject.id : Date.now(),
                            ...this.newProject,
                            date: new Date().getFullYear().toString()
                        };

                        if (this.editingProject) {
                            const index = this.projects.findIndex(p => p.id === this.editingProject.id);
                            if (index !== -1) {
                                this.projects[index] = newProject;
                            }
                            this.showToastMessage('Project updated successfully', 'success');
                        } else {
                            this.projects.push(newProject);
                            this.showToastMessage('Project added successfully', 'success');
                        }

                        this.updateProjectSlides();
                        this.saveToLocalStorage();
                        this.closeModal('addProject');
                        this.resetProjectForm();
                    } catch (error) {
                        this.showToastMessage('Error saving project', 'error');
                        console.error('Error adding project:', error);
                    } finally {
                        this.isSubmitting = false;
                    }
                },

                // DELETE METHODS
                confirmDelete(type, id, name) {
                    if (this.isPublicMode) return;
                    
                    this.deleteItem = { type, id, name };
                    this.openModal('deleteConfirm');
                },

                executeDelete() {
                    if (this.isPublicMode) return;
                    
                    if (this.deleteItem.type === 'skill') {
                        this.skills = this.skills.filter(skill => skill.id !== this.deleteItem.id);
                        this.showToastMessage('Skill deleted successfully', 'success');
                    } else if (this.deleteItem.type === 'project') {
                        this.projects = this.projects.filter(project => project.id !== this.deleteItem.id);
                        this.updateProjectSlides();
                        this.showToastMessage('Project deleted successfully', 'success');
                    }
                    
                    this.saveToLocalStorage();
                    this.closeModal('deleteConfirm');
                },

                // PROFILE METHODS
                updateProfile() {
                    if (this.isPublicMode) return;
                    
                    try {
                        this.saveToLocalStorage();
                        this.showToastMessage('Profile updated successfully', 'success');
                        this.closeModal('editProfile');
                    } catch (error) {
                        this.showToastMessage('Error updating profile', 'error');
                        console.error('Error updating profile:', error);
                    }
                },

                // CONTACT FORM
                submitContact() {
                    try {
                        this.isSubmitting = true;
                        
                        if (!this.contactForm.name || !this.contactForm.email || !this.contactForm.message) {
                            this.showToastMessage('Please fill in all fields', 'error');
                            this.isSubmitting = false;
                            return;
                        }
                        
                        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        if (!emailRegex.test(this.contactForm.email)) {
                            this.showToastMessage('Please enter a valid email address', 'error');
                            this.isSubmitting = false;
                            return;
                        }
                        
                        console.log('Starting email sending process...');
                        
                        const serviceID = 'service_fkkrcdr';
                        const templateID = 'template_g9cfnn2';
                        const publicKey = 'GIIXeb6Xt3whWfqvo';
                        
                        if (typeof emailjs === 'undefined') {
                            console.error('EmailJS is not loaded');
                            this.showToastMessage('Email service not available. Please refresh the page.', 'error');
                            this.isSubmitting = false;
                            return;
                        }
                        
                        emailjs.init(publicKey);
                        
                        const templateParams = {
                            from_name: this.contactForm.name,
                            from_email: this.contactForm.email,
                            message: this.contactForm.message,
                            to_name: this.profile.name,
                            to_email: this.profile.email,
                            reply_to: this.contactForm.email
                        };
                        
                        emailjs.send(serviceID, templateID, templateParams)
                            .then((response) => {
                                console.log('Email response:', response);
                                
                                if (response.status === 200) {
                                    this.showToastMessage('Message sent successfully! I\'ll get back to you soon.', 'success');
                                    
                                    this.contactForm = {
                                        name: '',
                                        email: '',
                                        message: ''
                                    };
                                } else {
                                    throw new Error(`EmailJS responded with status: ${response.status}`);
                                }
                            })
                            .catch((error) => {
                                console.error('Email sending error:', error);
                                
                                let errorMessage = 'Error sending message. Please try again later.';
                                
                                if (error.text) {
                                    console.error('EmailJS error text:', error.text);
                                }
                                
                                this.showToastMessage(errorMessage, 'error');
                            })
                            .finally(() => {
                                this.isSubmitting = false;
                            });
                        
                    } catch (error) {
                        console.error('Email sending error:', error);
                        this.showToastMessage('Error sending message. Please try again later.', 'error');
                        this.isSubmitting = false;
                    }
                },

                // HELPER METHODS
                generateDefaultAvatar() {
                    const name = this.profile.name || 'John Doe';
                    const initials = name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
                    const bgColor = '6366f1';
                    const textColor = 'ffffff';
                    const size = '400';
                    
                    return `https://ui-avatars.com/api/?name=${encodeURIComponent(initials)}&background=${bgColor}&color=${textColor}&size=${size}&bold=true&font-size=0.5`;
                },

                showToastMessage(message, type = 'success') {
                    this.toastMessage = message;
                    this.toastType = type;
                    this.showToast = true;
                    
                    setTimeout(() => {
                        this.showToast = false;
                    }, 3000);
                },

                initParticles() {
                    if (typeof particlesJS === 'function') {
                        particlesJS('particles-js', {
                            particles: {
                                number: { 
                                    value: 80, 
                                    density: { 
                                        enable: true, 
                                        value_area: 800 
                                    } 
                                },
                                color: { 
                                    value: this.isDark ? "#ffffff" : "#6366f1" 
                                },
                                shape: { 
                                    type: "circle" 
                                },
                                opacity: { 
                                    value: 0.3, 
                                    random: true
                                },
                                size: { 
                                    value: 3, 
                                    random: true
                                },
                                line_linked: {
                                    enable: true,
                                    distance: 150,
                                    color: this.isDark ? "#ffffff" : "#6366f1",
                                    opacity: 0.2,
                                    width: 1
                                },
                                move: {
                                    enable: true,
                                    speed: 1,
                                    direction: "none",
                                    random: true,
                                    straight: false
                                }
                            },
                            interactivity: {
                                events: {
                                    onhover: { 
                                        enable: true, 
                                        mode: "grab" 
                                    }
                                }
                            }
                        });
                    }
                },

                // DATA MANAGEMENT METHODS
                saveToLocalStorage() {
                    if (this.isPublicMode) return;
                    
                    try {
                        localStorage.setItem('portfolioSkills', JSON.stringify(this.skills));
                        localStorage.setItem('portfolioProjects', JSON.stringify(this.projects));
                        localStorage.setItem('portfolioProfile', JSON.stringify(this.profile));
                        
                        const linksToSave = this.socialLinks.map(link => ({
                            platform: link.platform,
                            url: link.url,
                            icon: link.icon
                        }));
                        localStorage.setItem('portfolioSocialLinks', JSON.stringify(linksToSave));
                        
                        localStorage.setItem('portfolioCacheTime', new Date().toISOString());
                        
                        console.log('âœ… Data saved locally');
                        this.calculateStorageUsage();
                        
                    } catch (error) {
                        console.error('âŒ Save error:', error);
                    }
                },

                calculateStorageUsage() {
                    try {
                        let totalBytes = 0;
                        for (let i = 0; i < localStorage.length; i++) {
                            const key = localStorage.key(i);
                            if (key && key.startsWith('portfolio')) {
                                const value = localStorage.getItem(key);
                                totalBytes += new Blob([value]).size;
                            }
                        }
                        
                        this.storageUsage = this.formatBytes(totalBytes);
                    } catch (error) {
                        console.error('Error calculating storage usage:', error);
                        this.storageUsage = 'Unknown';
                    }
                },

                formatBytes(bytes, decimals = 2) {
                    if (bytes === 0) return '0 Bytes';
                    
                    const k = 1024;
                    const dm = decimals < 0 ? 0 : decimals;
                    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                    
                    const i = Math.floor(Math.log(bytes) / Math.log(k));
                    
                    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
                },

                addToSyncHistory(action, status) {
                    this.syncHistory.unshift({
                        action,
                        status,
                        timestamp: new Date().toISOString()
                    });
                    
                    if (this.syncHistory.length > 10) {
                        this.syncHistory.pop();
                    }
                    
                    localStorage.setItem('portfolioSyncHistory', JSON.stringify(this.syncHistory));
                },

                // PROJECT SLIDER METHODS
                updateProjectSlides() {
                    this.projectSlides = [];
                    
                    if (this.projects.length <= 6) {
                        this.projectView = 'grid';
                        return;
                    }
                    
                    for (let i = 0; i < this.projects.length; i += this.projectsPerSlide) {
                        this.projectSlides.push(this.projects.slice(i, i + this.projectsPerSlide));
                    }
                    
                    if (this.currentSlide >= this.projectSlides.length) {
                        this.currentSlide = 0;
                    }
                },

                setProjectView(view) {
                    this.projectView = view;
                    if (view === 'slider') {
                        this.currentSlide = 0;
                    }
                },

                nextSlide() {
                    if (this.currentSlide < this.projectSlides.length - 1) {
                        this.currentSlide++;
                    }
                },

                prevSlide() {
                    if (this.currentSlide > 0) {
                        this.currentSlide--;
                    }
                },

                goToSlide(index) {
                    if (index >= 0 && index < this.projectSlides.length) {
                        this.currentSlide = index;
                    }
                },

                toggleAutoSlide() {
                    this.autoSlideEnabled = !this.autoSlideEnabled;
                    
                    if (this.autoSlideEnabled) {
                        this.autoSlideInterval = setInterval(() => {
                            if (this.currentSlide < this.projectSlides.length - 1) {
                                this.currentSlide++;
                            } else {
                                this.currentSlide = 0;
                            }
                        }, 5000);
                    } else if (this.autoSlideInterval) {
                        clearInterval(this.autoSlideInterval);
                        this.autoSlideInterval = null;
                    }
                },

                // CATEGORY & ICON HELPER METHODS
                getCategoryName(category) {
                    const names = {
                        'frontend': 'Frontend',
                        'backend': 'Backend',
                        'database': 'Database',
                        'mobile': 'Mobile',
                        'devops': 'DevOps',
                        'cloud': 'Cloud',
                        'tools': 'Tools',
                        'design': 'Design',
                        'ai': 'AI/ML'
                    };
                    return names[category] || category;
                },

                getCategoryIcon(category) {
                    const icons = {
                        'frontend': 'fas fa-code',
                        'backend': 'fas fa-server',
                        'database': 'fas fa-database',
                        'mobile': 'fas fa-mobile-alt',
                        'devops': 'fas fa-cogs',
                        'cloud': 'fas fa-cloud',
                        'tools': 'fas fa-tools',
                        'design': 'fas fa-palette',
                        'ai': 'fas fa-brain'
                    };
                    return icons[category] || 'fas fa-code';
                },

                getSkillCategoryColor(category) {
                    const colors = {
                        'frontend': 'bg-blue-500',
                        'backend': 'bg-green-500',
                        'database': 'bg-yellow-500',
                        'mobile': 'bg-purple-500',
                        'devops': 'bg-red-500',
                        'cloud': 'bg-indigo-500',
                        'tools': 'bg-pink-500',
                        'design': 'bg-teal-500',
                        'ai': 'bg-orange-500'
                    };
                    return colors[category] || 'bg-slate-500';
                },

                getSkillIcon(category) {
                    return this.getCategoryIcon(category);
                },

                getProficiencyLevel(level) {
                    if (level >= 90) return 'Expert';
                    if (level >= 70) return 'Advanced';
                    if (level >= 50) return 'Intermediate';
                    if (level >= 30) return 'Beginner';
                    return 'Novice';
                },

                getProficiencyClass(level) {
                    if (level >= 90) return 'status-success';
                    if (level >= 70) return 'status-success';
                    if (level >= 50) return 'status-warning';
                    return 'status-error';
                },

                getProficiencyIcon(level) {
                    if (level >= 90) return 'fas fa-fire';
                    if (level >= 70) return 'fas fa-chart-line';
                    if (level >= 50) return 'fas fa-seedling';
                    return 'fas fa-leaf';
                },

                getProjectTypeName(type) {
                    const names = {
                        'web': 'Web App',
                        'mobile': 'Mobile App',
                        'api': 'API',
                        'desktop': 'Desktop',
                        'ai': 'AI/ML',
                        'saas': 'SaaS'
                    };
                    return names[type] || type;
                },

                getTechIcon(tech) {
                    const iconMap = {
                        'React': 'fab fa-react',
                        'Vue.js': 'fab fa-vuejs',
                        'Angular': 'fab fa-angular',
                        'Node.js': 'fab fa-node-js',
                        'Python': 'fab fa-python',
                        'Django': 'fab fa-python',
                        'Flask': 'fab fa-python',
                        'Java': 'fab fa-java',
                        'PHP': 'fab fa-php',
                        'Laravel': 'fab fa-laravel',
                        'Ruby': 'fab fa-ruby',
                        'Rails': 'fab fa-ruby',
                        'Go': 'fab fa-golang',
                        'Rust': 'fab fa-rust',
                        'Swift': 'fab fa-swift',
                        'Kotlin': 'fab fa-android',
                        'C#': 'fab fa-microsoft',
                        '.NET': 'fab fa-microsoft',
                        'Docker': 'fab fa-docker',
                        'Kubernetes': 'fab fa-docker',
                        'AWS': 'fab fa-aws',
                        'Azure': 'fab fa-microsoft',
                        'Google Cloud': 'fab fa-google',
                        'Firebase': 'fab fa-firebase',
                        'MongoDB': 'fas fa-database',
                        'MySQL': 'fas fa-database',
                        'PostgreSQL': 'fas fa-database',
                        'Redis': 'fas fa-database',
                        'SQLite': 'fas fa-database',
                        'Git': 'fab fa-git-alt',
                        'GitHub': 'fab fa-github',
                        'GitLab': 'fab fa-gitlab',
                        'Bitbucket': 'fab fa-bitbucket',
                        'HTML5': 'fab fa-html5',
                        'CSS3': 'fab fa-css3-alt',
                        'JavaScript': 'fab fa-js',
                        'TypeScript': 'fab fa-js',
                        'SASS': 'fab fa-sass',
                        'Bootstrap': 'fab fa-bootstrap',
                        'Tailwind CSS': 'fas fa-paint-brush',
                        'Material-UI': 'fas fa-palette',
                        'Figma': 'fab fa-figma',
                        'Adobe XD': 'fas fa-palette',
                        'Sketch': 'fas fa-palette',
                        'Jest': 'fas fa-vial',
                        'Cypress': 'fas fa-vial',
                        'Webpack': 'fas fa-cube',
                        'Babel': 'fas fa-cog',
                        'ESLint': 'fas fa-code',
                        'Prettier': 'fas fa-code',
                        'Nginx': 'fas fa-server',
                        'Apache': 'fas fa-server',
                        'Linux': 'fab fa-linux',
                        'Windows': 'fab fa-windows',
                        'macOS': 'fab fa-apple'
                    };
                    
                    return iconMap[tech] || 'fas fa-code';
                },

                // SOCIAL MEDIA HELPER METHODS
                getSocialIcon(platform) {
                    const iconMap = {
                        'github': 'fab fa-github',
                        'gitlab': 'fab fa-gitlab',
                        'bitbucket': 'fab fa-bitbucket',
                        'linkedin': 'fab fa-linkedin-in',
                        'twitter': 'fab fa-twitter',
                        'instagram': 'fab fa-instagram',
                        'facebook': 'fab fa-facebook-f',
                        'whatsapp': 'fab fa-whatsapp',
                        'telegram': 'fab fa-telegram',
                        'discord': 'fab fa-discord',
                        'youtube': 'fab fa-youtube',
                        'tiktok': 'fab fa-tiktok',
                        'twitch': 'fab fa-twitch',
                        'medium': 'fab fa-medium',
                        'devto': 'fab fa-dev',
                        'hashnode': 'fab fa-hashnode',
                        'dribbble': 'fab fa-dribbble',
                        'behance': 'fab fa-behance',
                        'figma': 'fab fa-figma',
                        'stackoverflow': 'fab fa-stack-overflow',
                        'codepen': 'fab fa-codepen',
                        'upwork': 'fab fa-upwork',
                        'fiverr': 'fas fa-dollar-sign',
                        'freelancer': 'fas fa-briefcase',
                        'udemy': 'fas fa-graduation-cap',
                        'coursera': 'fas fa-graduation-cap',
                        'pluralsight': 'fas fa-graduation-cap',
                        'notion': 'fas fa-sticky-note',
                        'email': 'fas fa-envelope',
                        'personal': 'fas fa-globe',
                        'other': 'fas fa-external-link-alt'
                    };
                    
                    return iconMap[platform] || 'fas fa-external-link-alt';
                },

                getSocialPlaceholder(platform) {
                    const placeholders = {
                        'github': 'https://github.com/username',
                        'linkedin': 'https://linkedin.com/in/username',
                        'twitter': 'https://twitter.com/username',
                        'instagram': 'https://instagram.com/username',
                        'facebook': 'https://facebook.com/username',
                        'whatsapp': 'https://wa.me/phone-number',
                        'telegram': 'https://t.me/username',
                        'discord': 'https://discord.gg/invite',
                        'youtube': 'https://youtube.com/c/username',
                        'tiktok': 'https://tiktok.com/@username',
                        'twitch': 'https://twitch.tv/username',
                        'medium': 'https://medium.com/@username',
                        'devto': 'https://dev.to/username',
                        'hashnode': 'https://username.hashnode.dev',
                        'dribbble': 'https://dribbble.com/username',
                        'behance': 'https://behance.net/username',
                        'figma': 'https://figma.com/@username',
                        'stackoverflow': 'https://stackoverflow.com/users/username',
                        'codepen': 'https://codepen.io/username',
                        'upwork': 'https://upwork.com/freelancers/~username',
                        'fiverr': 'https://fiverr.com/username',
                        'freelancer': 'https://freelancer.com/u/username',
                        'udemy': 'https://udemy.com/user/username',
                        'coursera': 'https://coursera.org/user/username',
                        'pluralsight': 'https://pluralsight.com/profile/username',
                        'notion': 'https://notion.so/username',
                        'email': 'mailto:email@example.com',
                        'personal': 'https://yourwebsite.com',
                        'other': 'https://example.com'
                    };
                    return placeholders[platform] || 'https://example.com';
                },

                getSocialPlatformName(platform) {
                    const names = {
                        'github': 'GitHub',
                        'gitlab': 'GitLab',
                        'bitbucket': 'Bitbucket',
                        'linkedin': 'LinkedIn',
                        'twitter': 'Twitter',
                        'instagram': 'Instagram',
                        'facebook': 'Facebook',
                        'whatsapp': 'WhatsApp',
                        'telegram': 'Telegram',
                        'discord': 'Discord',
                        'youtube': 'YouTube',
                        'tiktok': 'TikTok',
                        'twitch': 'Twitch',
                        'medium': 'Medium',
                        'devto': 'Dev.to',
                        'hashnode': 'Hashnode',
                        'dribbble': 'Dribbble',
                        'behance': 'Behance',
                        'figma': 'Figma',
                        'stackoverflow': 'Stack Overflow',
                        'codepen': 'CodePen',
                        'upwork': 'Upwork',
                        'fiverr': 'Fiverr',
                        'freelancer': 'Freelancer',
                        'udemy': 'Udemy',
                        'coursera': 'Coursera',
                        'pluralsight': 'Pluralsight',
                        'notion': 'Notion',
                        'email': 'Email',
                        'personal': 'Personal Website',
                        'other': 'Other'
                    };
                    return names[platform] || platform.charAt(0).toUpperCase() + platform.slice(1);
                },

                getSocialPlatformColorClass(platform) {
                    const colorMap = {
                        'github': 'bg-gray-800 hover:bg-gray-900',
                        'gitlab': 'bg-orange-600 hover:bg-orange-700',
                        'bitbucket': 'bg-blue-600 hover:bg-blue-700',
                        'linkedin': 'bg-blue-700 hover:bg-blue-800',
                        'twitter': 'bg-blue-400 hover:bg-blue-500',
                        'instagram': 'bg-gradient-to-r from-purple-600 to-pink-500 hover:from-purple-700 hover:to-pink-600',
                        'facebook': 'bg-blue-600 hover:bg-blue-700',
                        'whatsapp': 'bg-green-500 hover:bg-green-600',
                        'telegram': 'bg-blue-500 hover:bg-blue-600',
                        'discord': 'bg-indigo-600 hover:bg-indigo-700',
                        'youtube': 'bg-red-600 hover:bg-red-700',
                        'tiktok': 'bg-black hover:bg-gray-900',
                        'twitch': 'bg-purple-600 hover:bg-purple-700',
                        'medium': 'bg-gray-800 hover:bg-gray-900',
                        'devto': 'bg-gray-900 hover:bg-black',
                        'hashnode': 'bg-blue-600 hover:bg-blue-700',
                        'dribbble': 'bg-pink-500 hover:bg-pink-600',
                        'behance': 'bg-blue-800 hover:bg-blue-900',
                        'figma': 'bg-orange-500 hover:bg-orange-600',
                        'stackoverflow': 'bg-orange-500 hover:bg-orange-600',
                        'codepen': 'bg-gray-800 hover:bg-gray-900',
                        'upwork': 'bg-green-600 hover:bg-green-700',
                        'fiverr': 'bg-green-500 hover:bg-green-600',
                        'freelancer': 'bg-blue-500 hover:bg-blue-600',
                        'udemy': 'bg-purple-700 hover:bg-purple-800',
                        'coursera': 'bg-blue-800 hover:bg-blue-900',
                        'pluralsight': 'bg-orange-500 hover:bg-orange-600',
                        'notion': 'bg-gray-800 hover:bg-gray-900',
                        'email': 'bg-gray-600 hover:bg-gray-700',
                        'personal': 'bg-indigo-600 hover:bg-indigo-700',
                        'other': 'bg-slate-600 hover:bg-slate-700'
                    };
                    return colorMap[platform] || 'bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700';
                },

                isValidUrl(url) {
                    try {
                        new URL(url);
                        return true;
                    } catch (_) {
                        return false;
                    }
                },

                getSocialUsername(url) {
                    if (!url) return '';
                    try {
                        const urlObj = new URL(url);
                        const pathname = urlObj.pathname;
                        if (url.includes('github.com')) return pathname.split('/')[1] || '';
                        if (url.includes('linkedin.com/in/')) return pathname.split('/in/')[1] || '';
                        if (url.includes('twitter.com/')) return pathname.split('/')[1] || '';
                        if (url.includes('instagram.com/')) return pathname.split('/')[1] || '';
                        return urlObj.hostname;
                    } catch (_) {
                        return '';
                    }
                },

                // RESET METHODS
                resetSkillForm() {
                    this.newSkill = {
                        name: '',
                        category: 'frontend',
                        level: 50,
                        years: 1,
                        projects: 0,
                        icon: 'fas fa-code',
                        description: '',
                        certifications: [],
                        tags: [],
                        customId: ''
                    };
                    this.certificationInput = '';
                    this.tagInput = '';
                    this.editingSkill = null;
                },

                resetProjectForm() {
                    this.newProject = {
                        name: '',
                        description: '',
                        type: 'web',
                        technologies: [],
                        image: '',
                        demoUrl: '',
                        sourceUrl: '',
                        startDate: '',
                        endDate: '',
                        isOngoing: false,
                        role: '',
                        teamSize: 1,
                        status: 'completed',
                        client: '',
                        challenges: '',
                        features: []
                    };
                    this.techInput = '';
                    this.editingProject = null;
                },

                // EDIT SKILL/PROJECT METHODS
                editSkill(skill) {
                    if (this.isPublicMode) return;
                    
                    this.editingSkill = { ...skill };
                    this.newSkill = { ...skill };
                    this.openModal('addSkill');
                },

                editProject(project) {
                    if (this.isPublicMode) return;
                    
                    this.editingProject = { ...project };
                    this.newProject = { ...project };
                    this.openModal('addProject');
                },

                viewProject(projectId) {
                    this.selectedProject = this.projects.find(p => p.id === projectId);
                    this.openModal('projectDetail');
                },

                // SKILL FORM HELPERS
                addCertification() {
                    if (this.certificationInput.trim()) {
                        this.newSkill.certifications.push(this.certificationInput.trim());
                        this.certificationInput = '';
                    }
                },

                removeCertification(index) {
                    this.newSkill.certifications.splice(index, 1);
                },

                addTag() {
                    if (this.tagInput.trim()) {
                        this.newSkill.tags.push(this.tagInput.trim());
                        this.tagInput = '';
                    }
                },

                removeTag(index) {
                    this.newSkill.tags.splice(index, 1);
                },

                nextSkillTab() {
                    if (this.activeSkillTab === 'basic') {
                        this.activeSkillTab = 'details';
                    } else if (this.activeSkillTab === 'details') {
                        this.activeSkillTab = 'advanced';
                    }
                },

                prevSkillTab() {
                    if (this.activeSkillTab === 'advanced') {
                        this.activeSkillTab = 'details';
                    } else if (this.activeSkillTab === 'details') {
                        this.activeSkillTab = 'basic';
                    }
                },

                // PROJECT FORM HELPERS
                addTechnology() {
                    if (this.techInput.trim() && !this.newProject.technologies.includes(this.techInput.trim())) {
                        this.newProject.technologies.push(this.techInput.trim());
                        this.techInput = '';
                    }
                },

                addTechFromSuggestion(tech) {
                    if (!this.newProject.technologies.includes(tech)) {
                        this.newProject.technologies.push(tech);
                    }
                },

                removeTech(tech) {
                    this.newProject.technologies = this.newProject.technologies.filter(t => t !== tech);
                },

                nextProjectTab() {
                    if (this.activeProjectTab === 'basic') {
                        this.activeProjectTab = 'tech';
                    } else if (this.activeProjectTab === 'tech') {
                        this.activeProjectTab = 'media';
                    } else if (this.activeProjectTab === 'media') {
                        this.activeProjectTab = 'details';
                    }
                },

                prevProjectTab() {
                    if (this.activeProjectTab === 'details') {
                        this.activeProjectTab = 'media';
                    } else if (this.activeProjectTab === 'media') {
                        this.activeProjectTab = 'tech';
                    } else if (this.activeProjectTab === 'tech') {
                        this.activeProjectTab = 'basic';
                    }
                },

                // IMAGE UPLOAD METHODS
                triggerFileInput() {
                    document.getElementById('projectImageInput').click();
                },

                uploadImage(event) {
                    const file = event.target.files[0];
                    if (file) {
                        if (file.size > this.storageConfig.maxImageSize) {
                            this.showToastMessage('Image size too large. Max 1MB.', 'error');
                            return;
                        }
                        
                        this.uploadingImage = true;
                        
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            this.newProject.image = e.target.result;
                            this.uploadingImage = false;
                            this.showToastMessage('Image uploaded successfully', 'success');
                        };
                        reader.readAsDataURL(file);
                    }
                },

                uploadProfileImage(event) {
                    const file = event.target.files[0];
                    if (file) {
                        if (file.size > this.storageConfig.maxImageSize) {
                            this.showToastMessage('Image size too large. Max 1MB.', 'error');
                            return;
                        }
                        
                        this.uploadingProfileImage = true;
                        
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            this.profile.image = e.target.result;
                            this.uploadingProfileImage = false;
                            this.showToastMessage('Profile image updated successfully', 'success');
                        };
                        reader.readAsDataURL(file);
                    }
                },

                handleDrop(event) {
                    event.preventDefault();
                    const file = event.dataTransfer.files[0];
                    if (file && file.type.startsWith('image/')) {
                        this.uploadImage({ target: { files: [file] } });
                    }
                },

                handleProjectImageError(event, projectId) {
                    console.error('Error loading project image:', event);
                    event.target.src = 'https://images.unsplash.com/photo-1551650975-87deedd944c3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
                    
                    const projectIndex = this.projects.findIndex(p => p.id === projectId);
                    if (projectIndex !== -1) {
                        this.projects[projectIndex].image = event.target.src;
                    }
                },

                // SOCIAL LINKS METHODS
                addSocialLink() {
                    if (this.isPublicMode) return;
                    
                    this.socialLinks.push({
                        platform: 'github',
                        url: '',
                        icon: 'fab fa-github'
                    });
                },

                addQuickSocialLink(platform) {
                    if (this.isPublicMode) return;
                    
                    const placeholder = this.getSocialPlaceholder(platform);
                    this.socialLinks.push({
                        platform: platform,
                        url: placeholder.includes('username') ? '' : placeholder,
                        icon: this.getSocialIcon(platform)
                    });
                },

                removeSocialLink(index) {
                    if (this.isPublicMode) return;
                    
                    this.socialLinks.splice(index, 1);
                },

                moveSocialLink(index, direction) {
                    if (this.isPublicMode) return;
                    
                    if (direction === 'up' && index > 0) {
                        const temp = this.socialLinks[index];
                        this.socialLinks[index] = this.socialLinks[index - 1];
                        this.socialLinks[index - 1] = temp;
                    } else if (direction === 'down' && index < this.socialLinks.length - 1) {
                        const temp = this.socialLinks[index];
                        this.socialLinks[index] = this.socialLinks[index + 1];
                        this.socialLinks[index + 1] = temp;
                    }
                },

                handlePlatformChange(link, index) {
                    if (this.isPublicMode) return;
                    
                    link.icon = this.getSocialIcon(link.platform);
                    if (!link.url || link.url.includes('username') || link.url === this.getSocialPlaceholder(this.socialLinks[index].platform)) {
                        link.url = this.getSocialPlaceholder(link.platform);
                    }
                },

                editSocialLink(index) {
                    if (this.isPublicMode) return;
                    
                    const newUrl = prompt('Enter new URL for ' + this.getSocialPlatformName(this.socialLinks[index].platform), this.socialLinks[index].url);
                    if (newUrl !== null) {
                        this.socialLinks[index].url = newUrl;
                        this.saveToLocalStorage();
                        this.showToastMessage('Social link updated', 'success');
                    }
                },

                // DATA IMPORT/EXPORT METHODS
                importSampleData() {
                    if (this.isPublicMode) {
                        this.showToastMessage('Please switch to edit mode to import data', 'info');
                        return;
                    }
                    
                    if (confirm('This will replace your current data with sample data. Continue?')) {
                        this.skills = [...predefinedPublicData.skills];
                        this.projects = [...predefinedPublicData.projects];
                        this.socialLinks = [...predefinedPublicData.socialLinks];
                        
                        this.updateProjectSlides();
                        this.saveToLocalStorage();
                        
                        this.showToastMessage('Sample data loaded successfully', 'success');
                        this.showDataPanel = false;
                    }
                },

                exportToJSON() {
                    const data = {
                        skills: this.skills,
                        projects: this.projects,
                        profile: this.profile,
                        socialLinks: this.socialLinks,
                        exportedAt: new Date().toISOString()
                    };
                    
                    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `portfolio-backup-${new Date().toISOString().split('T')[0]}.json`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    this.showToastMessage('Data exported successfully', 'success');
                },

                clearAllData() {
                    if (this.isPublicMode) {
                        this.showToastMessage('Please switch to edit mode to clear data', 'info');
                        return;
                    }
                    
                    if (confirm('This will delete ALL your data. This action cannot be undone. Continue?')) {
                        localStorage.clear();
                        this.skills = [];
                        this.projects = [];
                        this.socialLinks = [];
                        this.profile = { ...predefinedPublicData.profile };
                        this.syncHistory = [];
                        
                        this.updateProjectSlides();
                        this.showToastMessage('All data cleared', 'success');
                        this.showDataPanel = false;
                    }
                },

                runDataHealthCheck() {
                    try {
                        const issues = [];
                        
                        if (this.skills.length === 0) issues.push('No skills found');
                        
                        this.skills.forEach((skill, index) => {
                            if (!skill.name) issues.push(`Skill ${index + 1}: Missing name`);
                            if (skill.level < 0 || skill.level > 100) issues.push(`Skill ${skill.name}: Invalid level`);
                        });
                        
                        if (this.projects.length === 0) issues.push('No projects found');
                        
                        this.projects.forEach((project, index) => {
                            if (!project.name) issues.push(`Project ${index + 1}: Missing name`);
                            if (!project.description) issues.push(`Project ${project.name}: Missing description`);
                        });
                        
                        if (!this.profile.name) issues.push('Profile: Missing name');
                        if (!this.profile.email) issues.push('Profile: Missing email');
                        
                        if (issues.length === 0) {
                            this.dataIntegrity = true;
                            this.showToastMessage('Data health check passed!', 'success');
                        } else {
                            this.dataIntegrity = false;
                            console.warn('Data health issues:', issues);
                            this.showToastMessage(`Found ${issues.length} data issues`, 'warning');
                        }
                        
                        this.calculateStorageUsage();
                        
                    } catch (error) {
                        console.error('Health check error:', error);
                        this.showToastMessage('Health check failed', 'error');
                    }
                },

                formatTimeAgo(timestamp) {
                    const now = new Date();
                    const past = new Date(timestamp);
                    const diff = now - past;
                    
                    const minutes = Math.floor(diff / 60000);
                    const hours = Math.floor(diff / 3600000);
                    const days = Math.floor(diff / 86400000);
                    
                    if (minutes < 1) return 'Just now';
                    if (minutes < 60) return `${minutes}m ago`;
                    if (hours < 24) return `${hours}h ago`;
                    return `${days}d ago`;
                }
            };
        }
    </script>
</body>
</html>