<!DOCTYPE html>
<html lang="en" x-data="portfolio()" x-init="init()">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Stack Developer Portfolio | Modern Web Solutions</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        'primary-dark': '#4f46e5',
                        secondary: '#8b5cf6',
                        dark: '#0f172a',
                        light: '#f8fafc',
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 3s ease-in-out infinite',
                        'bounce-slow': 'bounce 2s infinite',
                        'gradient': 'gradient 3s ease infinite',
                        'slide-in': 'slideIn 0.5s ease-out',
                        'fade-in': 'fadeIn 0.5s ease-out',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        gradient: {
                            '0%, 100%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Alpine JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    
    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <!-- Particles.js -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --dark: #0f172a;
            --light: #f8fafc;
            --gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --gradient-dark: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
        }

        body {
            scroll-behavior: smooth;
            font-family: 'Inter', sans-serif;
        }

        /* Improved Loading */
        .loading-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* Enhanced Cards */
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
        }

        .card-hover:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 25px 50px -12px rgba(99, 102, 241, 0.25);
            border-color: rgba(99, 102, 241, 0.5);
        }

        /* Enhanced Buttons */
        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 14px 32px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
            z-index: -1;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
        }

        .btn-outline {
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 14px 32px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            background: transparent;
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.2);
        }

        /* Enhanced Modal */
        .modal-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            animation: slideIn 0.3s ease-out;
        }

        .dark .modal-content {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
        }

        /* Enhanced Form Inputs */
        .form-input {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 14px 20px;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
            background: white;
        }

        .dark .form-input {
            background: rgba(30, 41, 59, 0.9);
            border-color: #475569;
            color: white;
        }

        .dark .form-input:focus {
            background: #1e293b;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2);
        }

        /* Enhanced Skill Bars */
        .skill-bar-container {
            background: rgba(226, 232, 240, 0.3);
            border-radius: 10px;
            overflow: hidden;
            height: 10px;
        }

        .dark .skill-bar-container {
            background: rgba(71, 85, 105, 0.3);
        }

        .skill-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 10px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .skill-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Enhanced Navigation */
        .nav-link {
            position: relative;
            padding: 10px 20px;
            color: #64748b;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 3px;
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .nav-link:hover::after,
        .nav-link.active::after {
            width: 80%;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--primary);
        }

        .dark .nav-link {
            color: #cbd5e1;
        }

        /* Enhanced Auth Button */
        .auth-container {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 50;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .auth-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 12px 28px;
            border-radius: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
            border: none;
            cursor: pointer;
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(99, 102, 241, 0.4);
        }

        .auth-btn.logout {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        /* Enhanced Social Links */
        .social-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 16px;
        }

        .social-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 24px;
            transition: all 0.3s ease;
            text-align: center;
        }

        .social-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 15px 30px rgba(99, 102, 241, 0.2);
        }

        .social-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 16px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
            transition: all 0.3s ease;
        }

        .social-card:hover .social-icon {
            transform: scale(1.1) rotate(5deg);
        }

        /* Enhanced Technology Spectrum */
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 20px;
        }

        .tech-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 24px;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .tech-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
            transition: 0.5s;
        }

        .tech-card:hover::before {
            left: 100%;
        }

        .tech-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary);
            box-shadow: 0 20px 40px rgba(99, 102, 241, 0.15);
        }

        .tech-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: white;
            transition: all 0.3s ease;
        }

        .tech-card:hover .tech-icon {
            transform: scale(1.1) rotate(-5deg);
        }

        /* Enhanced Contact Form */
        .contact-form {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 40px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(226, 232, 240, 0.1);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--primary), var(--secondary));
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(var(--primary-dark), var(--secondary));
        }

        /* Improved Typography */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
        }

        .gradient-text {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Section Spacing */
        section {
            padding: 100px 0;
        }

        /* Background Patterns */
        .bg-pattern {
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(99, 102, 241, 0.1) 0%, transparent 55%),
                radial-gradient(circle at 75% 75%, rgba(139, 92, 246, 0.1) 0%, transparent 55%);
        }

        /* Responsive Improvements */
        @media (max-width: 768px) {
            .tech-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 16px;
            }
            
            .social-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .auth-container {
                top: 16px;
                right: 16px;
                flex-direction: column;
                align-items: flex-end;
            }
            
            section {
                padding: 60px 0;
            }
            
            .modal-content {
                margin: 16px;
            }
        }

        /* Animation Classes */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease-out;
        }

        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Publish Button Enhancement */
        .publish-btn {
            position: fixed;
            bottom: 32px;
            right: 32px;
            z-index: 40;
            background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
            color: white;
            padding: 16px 32px;
            border-radius: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 20px 40px rgba(99, 102, 241, 0.3);
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
            border: none;
            cursor: pointer;
        }

        .publish-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 25px 50px rgba(99, 102, 241, 0.4);
            animation: none;
        }

        /* Enhanced Project Cards */
        .project-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .project-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 30px 60px rgba(99, 102, 241, 0.2);
        }

        .project-image {
            height: 240px;
            object-fit: cover;
            transition: transform 0.6s ease;
        }

        .project-card:hover .project-image {
            transform: scale(1.05);
        }

        /* Enhanced Modal Transitions */
        .modal-enter {
            animation: modalEnter 0.3s ease-out;
        }

        @keyframes modalEnter {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* Glass Effect Enhancement */
        .glass {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .dark .glass {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.7), rgba(15, 23, 42, 0.5));
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Gradient Background Animation */
        .gradient-bg {
            background: linear-gradient(-45deg, #6366f1, #8b5cf6, #ec4899, #6366f1);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }

        /* Floating Elements */
        .floating {
            animation: float 6s ease-in-out infinite;
        }

        .floating-2 {
            animation: float 8s ease-in-out infinite;
            animation-delay: 1s;
        }

        .floating-3 {
            animation: float 10s ease-in-out infinite;
            animation-delay: 2s;
        }

        /* Circular Profile Image */
        .profile-circle {
            width: 280px;
            height: 280px;
            border-radius: 50%;
            border: 8px solid;
            border-image: linear-gradient(135deg, #6366f1, #8b5cf6) 1;
            overflow: hidden;
            position: relative;
            margin: 0 auto;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
        }

        .profile-circle img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Chip/Tag Styles */
        .chip {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .chip:hover {
            transform: translateY(-2px);
        }

        /* Dropdown Styles */
        .dropdown-option {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .dropdown-option:hover {
            background: rgba(99, 102, 241, 0.1);
        }

        /* Draggable Item */
        .draggable-item {
            cursor: grab;
            transition: transform 0.2s ease;
        }

        .draggable-item:active {
            cursor: grabbing;
            transform: scale(0.98);
        }

        /* Sortable List */
        .sortable-list {
            min-height: 100px;
            border: 2px dashed rgba(99, 102, 241, 0.3);
            border-radius: 12px;
            padding: 20px;
        }

        .sortable-item {
            background: white;
            padding: 16px;
            margin-bottom: 10px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            cursor: move;
            transition: all 0.3s ease;
        }

        .dark .sortable-item {
            background: #1e293b;
            border-color: #475569;
        }

        .sortable-item:hover {
            transform: translateX(5px);
            border-color: #6366f1;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.1);
        }
    </style>
</head>
<body :class="{'dark': isDark}" class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300 overflow-x-hidden">
    
    <!-- Background Elements -->
    <div class="fixed inset-0 bg-pattern z-0"></div>
    <div class="fixed top-0 left-0 w-96 h-96 bg-gradient-to-br from-indigo-500/10 to-purple-500/10 rounded-full blur-3xl floating"></div>
    <div class="fixed bottom-0 right-0 w-96 h-96 bg-gradient-to-br from-pink-500/10 to-blue-500/10 rounded-full blur-3xl floating-2"></div>
    
    <!-- Scroll Progress Bar -->
    <div class="fixed top-0 left-0 h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 z-50" 
         :style="'width: ' + scrollProgress + '%'"></div>
    
    <!-- Improved Auth Container -->
    <div class="auth-container">
        <div x-show="isPublicMode">
            <button @click="loginWithGoogle()" class="auth-btn">
                <i class="fas fa-sign-in-alt"></i>
                <span>Login to Edit</span>
            </button>
        </div>
        
        <div x-show="!isPublicMode" class="flex items-center gap-4">
            <div class="glass px-4 py-2 rounded-xl">
                <span class="text-sm flex items-center gap-2">
                    <i class="fas fa-user-circle text-primary"></i>
                    <span x-text="userEmail?.split('@')[0] || 'User'" class="font-medium"></span>
                </span>
            </div>
            <button @click="signOut()" class="auth-btn logout">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </div>
    </div>
    
    <!-- Improved Publish Button -->
    <div x-show="!isPublicMode" class="publish-btn" @click="publishToPublic()">
        <i class="fas fa-cloud-upload-alt text-xl"></i>
        <span>PUBLISH TO CLOUD</span>
    </div>
    
    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-40 py-4">
        <div class="container mx-auto px-6">
            <div class="flex justify-between items-center">
                <div class="text-3xl font-bold">
                    <span class="gradient-text">Portfolio</span>
                    <span class="text-sm ml-2 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 px-3 py-1 rounded-full font-normal">
                        <i class="fas fa-code mr-1"></i>Dev
                    </span>
                </div>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8">
                    <template x-for="item in navItems" :key="item.name">
                        <a :href="item.href" 
                           @click.prevent="scrollTo(item.href.substring(1))"
                           class="nav-link"
                           :class="{'active': activeSection === item.href.substring(1)}">
                            <span x-text="item.name"></span>
                        </a>
                    </template>
                </div>
                
                <!-- Theme Toggle -->
                <div class="flex items-center space-x-6">
                    <button @click="toggleTheme()" 
                            class="w-14 h-7 rounded-full bg-gray-300 dark:bg-gray-700 relative transition-colors duration-300">
                        <div class="absolute top-1 left-1 w-5 h-5 rounded-full bg-white dark:bg-gray-900 transition-transform duration-300 shadow-lg" 
                             :class="{'translate-x-7': isDark}"></div>
                        <div class="absolute top-1 left-2">
                            <i class="fas fa-sun text-yellow-500 text-xs"></i>
                        </div>
                        <div class="absolute top-1 right-2">
                            <i class="fas fa-moon text-blue-400 text-xs"></i>
                        </div>
                    </button>
                    
                    <!-- Mobile Menu Button -->
                    <button @click="mobileMenu = !mobileMenu" class="md:hidden text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div x-show="mobileMenu" class="md:hidden glass mt-4 rounded-2xl">
            <div class="container mx-auto px-6 py-4 space-y-2">
                <template x-for="item in navItems" :key="item.name">
                    <a :href="item.href" 
                       @click.prevent="scrollTo(item.href.substring(1)); mobileMenu = false"
                       class="block py-3 text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors font-medium border-b border-gray-200 dark:border-gray-700 last:border-0"
                       :class="{'text-indigo-600 dark:text-indigo-400': activeSection === item.href.substring(1)}">
                        <span x-text="item.name"></span>
                    </a>
                </template>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-24">
        <!-- Home Section -->
        <section id="home" class="min-h-screen relative">
            <div id="particles-js" class="absolute inset-0"></div>
            
            <div class="container mx-auto px-6 py-16 relative z-10">
                <div class="grid lg:grid-cols-2 gap-16 items-center">
                    <!-- Left Column: Hero Content -->
                    <div class="text-center lg:text-left">
                        <div class="mb-12">
                            <div class="inline-flex items-center gap-3 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 px-6 py-3 rounded-full mb-8">
                                <i class="fas fa-terminal"></i>
                                <span class="text-lg font-semibold">Full Stack Developer</span>
                            </div>
                            
                            <h1 class="text-5xl md:text-7xl font-bold mb-8">
                                <span class="gradient-text" x-text="profile.name"></span>
                            </h1>
                            
                            <p class="text-2xl md:text-3xl text-gray-700 dark:text-gray-300 mb-8 leading-relaxed">
                                Building <span class="gradient-text font-bold">Digital Experiences</span> that matter
                            </p>
                            
                            <p class="text-xl text-gray-600 dark:text-gray-400 max-w-2xl leading-relaxed" x-text="profile.bio"></p>
                        </div>
                        
                        <!-- CTA Buttons -->
                        <div class="flex flex-col sm:flex-row gap-6 mb-12">
                            <button @click="scrollTo('contact')" class="btn-primary">
                                <i class="fas fa-envelope mr-3"></i>Contact Me
                            </button>
                            
                            <button @click="scrollTo('projects')" class="btn-outline">
                                <i class="fas fa-briefcase mr-3"></i>View Projects
                            </button>
                        </div>
                        
                        <!-- Stats -->
                        <div class="grid grid-cols-3 gap-6 max-w-lg">
                            <div class="card-hover p-6 text-center">
                                <div class="text-4xl font-bold gradient-text mb-2" x-text="skills.length"></div>
                                <div class="text-gray-600 dark:text-gray-400 font-medium">Tech Skills</div>
                            </div>
                            <div class="card-hover p-6 text-center">
                                <div class="text-4xl font-bold gradient-text mb-2" x-text="projects.length"></div>
                                <div class="text-gray-600 dark:text-gray-400 font-medium">Projects</div>
                            </div>
                            <div class="card-hover p-6 text-center">
                                <div class="text-4xl font-bold gradient-text mb-2" x-text="averageSkillLevel + '%'"></div>
                                <div class="text-gray-600 dark:text-gray-400 font-medium">Avg. Proficiency</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Column: Profile & Social -->
                    <div class="relative">
                        <div class="relative mx-auto lg:mx-0 max-w-md">
                            <!-- Profile Image with Circular Border -->
                            <div class="profile-circle mb-12">
                                <img :src="profileImageSrc" 
                                     alt="Profile Picture" 
                                     class="w-full h-full object-cover">
                                
                                <!-- Edit Profile Image Button -->
                                <div x-show="!isPublicMode" class="absolute bottom-6 right-6">
                                    <label for="profileImageUpload" class="btn-primary cursor-pointer !p-3 !rounded-full">
                                        <i class="fas fa-camera"></i>
                                    </label>
                                    <input id="profileImageUpload" type="file" accept="image/*" @change="uploadProfileImage" class="hidden">
                                </div>
                            </div>
                            
                            <!-- Quick Tech Stack -->
                            <div class="flex flex-wrap justify-center gap-3">
                                <template x-for="tech in technologySpectrum.slice(0, 5)" :key="tech.id">
                                    <div class="tech-card !p-4 !rounded-full" :style="'background: ' + getTechColor(tech.color)">
                                        <i :class="tech.icon" :class="getTechTextColor(tech.color)" class="text-2xl"></i>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Scroll Indicator -->
            <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce-slow">
                <button @click="scrollTo('skills')" class="text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors">
                    <i class="fas fa-chevron-down text-3xl"></i>
                </button>
            </div>
        </section>

        <!-- Skills Section -->
        <section id="skills" class="relative">
            <div class="container mx-auto px-6">
                <div class="text-center mb-20">
                    <h2 class="text-5xl font-bold mb-8">
                        <span class="gradient-text">Skills & Expertise</span>
                    </h2>
                    <p class="text-2xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto leading-relaxed">
                        Mastering the full stack with expertise in modern web technologies
                    </p>
                </div>
                
                <!-- Technology Spectrum - Enhanced -->
                <div class="mb-20">
                    <div class="flex justify-between items-center mb-12">
                        <h3 class="text-3xl font-bold">
                            <i class="fas fa-layer-group mr-3 gradient-text"></i>
                            Technology Spectrum
                        </h3>
                        
                        <!-- Edit Technology Spectrum Button -->
                        <button x-show="!isPublicMode" @click="openModal('editTechnologySpectrum')" class="btn-primary">
                            <i class="fas fa-edit mr-2"></i> Edit Spectrum
                        </button>
                    </div>
                    
                    <div class="tech-grid">
                        <template x-for="tech in technologySpectrum" :key="tech.id">
                            <div class="tech-card">
                                <div class="tech-icon" :style="'background: ' + getTechColor(tech.color)">
                                    <i :class="tech.icon" class="text-white"></i>
                                </div>
                                <h4 class="font-bold text-xl mb-3" x-text="tech.name"></h4>
                                <p class="text-gray-600 dark:text-gray-400" x-text="tech.description"></p>
                            </div>
                        </template>
                    </div>
                </div>
                
                <!-- Detailed Skills -->
                <div class="mb-12">
                    <div class="flex justify-between items-center mb-12">
                        <h3 class="text-3xl font-bold">
                            <i class="fas fa-chart-line mr-3 gradient-text"></i>
                            Detailed Skills Analysis
                        </h3>
                        
                        <!-- Add Skill Button -->
                        <button x-show="!isPublicMode" @click="openModal('addSkill')" class="btn-primary">
                            <i class="fas fa-plus"></i> Add Skill
                        </button>
                    </div>
                    
                    <!-- Skill Category Filter -->
                    <div class="flex flex-wrap justify-center gap-3 mb-12">
                        <button @click="activeSkillCategory = 'all'" 
                                class="px-6 py-3 rounded-xl transition-all duration-300"
                                :class="activeSkillCategory === 'all' 
                                    ? 'btn-primary' 
                                    : 'btn-outline'">
                            <i class="fas fa-layer-group mr-2"></i>
                            All Skills
                        </button>
                        <template x-for="category in skillCategories" :key="category">
                            <button @click="activeSkillCategory = category" 
                                    class="px-6 py-3 rounded-xl transition-all duration-300"
                                    :class="activeSkillCategory === category 
                                        ? 'btn-primary' 
                                        : 'btn-outline'">
                                <i :class="getCategoryIcon(category)" class="mr-2"></i>
                                <span x-text="getCategoryName(category)"></span>
                            </button>
                        </template>
                    </div>
                    
                    <!-- Skills Grid -->
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <template x-for="skill in filteredSkills" :key="skill.id">
                            <div class="card-hover p-8">
                                <div class="flex justify-between items-start mb-6">
                                    <div class="flex items-center gap-4">
                                        <div :class="getSkillCategoryColor(skill.category)" 
                                             class="w-16 h-16 rounded-2xl flex items-center justify-center text-white shadow-lg">
                                            <i :class="skill.icon" class="text-2xl"></i>
                                        </div>
                                        <div>
                                            <h3 class="font-bold text-2xl mb-2" x-text="skill.name"></h3>
                                            <div class="flex items-center gap-2">
                                                <i :class="getProficiencyIcon(skill.level)" class="text-yellow-500"></i>
                                                <span class="text-gray-600 dark:text-gray-400" x-text="getProficiencyLevel(skill.level)"></span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Edit/Delete Buttons -->
                                    <div x-show="!isPublicMode" class="flex gap-2">
                                        <button @click="editSkill(skill)" class="w-10 h-10 bg-blue-500 hover:bg-blue-600 text-white rounded-xl flex items-center justify-center">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button @click="confirmDelete('skill', skill.id, skill.name)" class="w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <p class="text-gray-600 dark:text-gray-300 mb-6" x-text="skill.description"></p>
                                
                                <div class="space-y-4">
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-600 dark:text-gray-400 font-medium">Proficiency</span>
                                        <span class="font-bold gradient-text" x-text="skill.level + '%'"></span>
                                    </div>
                                    <div class="skill-bar-container">
                                        <div class="skill-bar" :style="'width: ' + skill.level + '%'"></div>
                                    </div>
                                    
                                    <div class="flex justify-between text-sm text-gray-500">
                                        <span x-text="skill.years + ' years'"></span>
                                        <span x-text="skill.projects + ' projects'"></span>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="relative">
            <div class="container mx-auto px-6">
                <div class="text-center mb-20">
                    <h2 class="text-5xl font-bold mb-8">
                        <span class="gradient-text">Featured Projects</span>
                    </h2>
                    <p class="text-2xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto leading-relaxed">
                        A curated collection of innovative solutions
                    </p>
                </div>
                
                <!-- Project View Toggle -->
                <div class="flex flex-col sm:flex-row justify-between items-center gap-6 mb-12">
                    <div class="flex gap-3">
                        <button @click="setProjectView('grid')" 
                                class="px-6 py-3 rounded-xl transition-all duration-300"
                                :class="projectView === 'grid' ? 'btn-primary' : 'btn-outline'">
                            <i class="fas fa-th-large mr-2"></i>
                            Grid View
                        </button>
                        <button @click="setProjectView('slider')" 
                                class="px-6 py-3 rounded-xl transition-all duration-300"
                                :class="projectView === 'slider' ? 'btn-primary' : 'btn-outline'">
                            <i class="fas fa-sliders-h mr-2"></i>
                            Slider View
                        </button>
                    </div>
                    
                    <!-- Add Project Button -->
                    <button x-show="!isPublicMode" @click="openModal('addProject')" class="btn-primary">
                        <i class="fas fa-plus mr-2"></i> Add Project
                    </button>
                </div>
                
                <!-- Projects Grid View -->
                <div x-show="projectView === 'grid'" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <template x-for="project in projects" :key="project.id">
                        <div class="project-card">
                            <div class="relative overflow-hidden">
                                <img :src="project.image" 
                                     :alt="project.name"
                                     class="project-image">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
                            </div>
                            
                            <div class="p-8">
                                <h3 class="text-2xl font-bold mb-4" x-text="project.name"></h3>
                                <p class="text-gray-600 dark:text-gray-300 mb-6" x-text="project.description"></p>
                                
                                <div class="flex flex-wrap gap-2 mb-6">
                                    <template x-for="tech in project.technologies.slice(0, 3)" :key="tech">
                                        <span class="px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-lg text-sm font-medium">
                                            <i :class="getTechIcon(tech)" class="mr-2"></i>
                                            <span x-text="tech"></span>
                                        </span>
                                    </template>
                                </div>
                                
                                <div class="flex justify-between items-center pt-6 border-t border-gray-100 dark:border-gray-700">
                                    <div class="flex items-center gap-2">
                                        <i class="fas fa-calendar text-gray-400"></i>
                                        <span class="text-gray-500 dark:text-gray-400" x-text="project.date"></span>
                                    </div>
                                    <div class="flex gap-2">
                                        <button @click="viewProject(project.id)" class="btn-primary !py-2 !px-4">
                                            View Details
                                        </button>
                                        <button x-show="!isPublicMode" @click="editProject(project)" class="w-10 h-10 bg-blue-500 hover:bg-blue-600 text-white rounded-xl flex items-center justify-center">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="relative">
            <div class="container mx-auto px-6">
                <div class="text-center mb-20">
                    <h2 class="text-5xl font-bold mb-8">
                        <span class="gradient-text">Get In Touch</span>
                    </h2>
                    <p class="text-2xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto leading-relaxed">
                        Ready to bring your ideas to life?
                    </p>
                </div>
                
                <div class="grid lg:grid-cols-3 gap-12">
                    <!-- Contact Info -->
                    <div class="lg:col-span-1">
                        <div class="contact-form">
                            <h3 class="text-2xl font-bold mb-8">
                                <i class="fas fa-id-card mr-3 gradient-text"></i>
                                Contact Information
                            </h3>
                            
                            <div class="space-y-8 mb-10">
                                <div class="flex items-start gap-6">
                                    <div class="w-14 h-14 bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-user text-2xl text-indigo-600 dark:text-indigo-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-lg mb-2">Name</h4>
                                        <p class="text-gray-600 dark:text-gray-300" x-text="profile.name"></p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start gap-6">
                                    <div class="w-14 h-14 bg-gradient-to-br from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-envelope text-2xl text-green-600 dark:text-green-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-lg mb-2">Email</h4>
                                        <p class="text-gray-600 dark:text-gray-300" x-text="profile.email"></p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start gap-6">
                                    <div class="w-14 h-14 bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-phone text-2xl text-purple-600 dark:text-purple-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-lg mb-2">Phone</h4>
                                        <p class="text-gray-600 dark:text-gray-300" x-text="profile.phone"></p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start gap-6">
                                    <div class="w-14 h-14 bg-gradient-to-br from-orange-100 to-red-100 dark:from-orange-900/30 dark:to-red-900/30 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-map-marker-alt text-2xl text-orange-600 dark:text-orange-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-lg mb-2">Location</h4>
                                        <p class="text-gray-600 dark:text-gray-300" x-text="profile.location"></p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Edit Profile Button -->
                            <button x-show="!isPublicMode" @click="openModal('editProfile')" class="btn-primary w-full">
                                <i class="fas fa-edit mr-2"></i>
                                Edit Profile
                            </button>
                        </div>
                    </div>
                    
                    <!-- Enhanced Connect With Me Section -->
                    <div class="lg:col-span-2">
                        <div class="contact-form">
                            <div class="flex justify-between items-center mb-8">
                                <h3 class="text-2xl font-bold">
                                    <i class="fas fa-share-alt mr-3 gradient-text"></i>
                                    Connect With Me
                                </h3>
                                
                                <!-- Edit Social Links Button -->
                                <button x-show="!isPublicMode" @click="openModal('editSocialLinks')" class="btn-primary">
                                    <i class="fas fa-edit mr-2"></i>
                                    Edit Social Links
                                </button>
                            </div>
                            
                            <div class="social-grid mb-10">
                                <template x-for="link in socialLinks" :key="link.platform">
                                    <a :href="link.url" target="_blank" class="social-card">
                                        <div class="social-icon" :style="'background: ' + getSocialPlatformColor(link.platform)">
                                            <i :class="link.icon"></i>
                                        </div>
                                        <h4 class="font-bold text-lg mb-2" x-text="getSocialPlatformName(link.platform)"></h4>
                                        <p class="text-gray-600 dark:text-gray-400 text-sm" x-text="getSocialUsername(link.url)"></p>
                                    </a>
                                </template>
                            </div>
                            
                            <!-- Contact Form -->
                            <h4 class="text-xl font-bold mb-6">Send me a message</h4>
                            <form @submit.prevent="submitContact">
                                <div class="grid md:grid-cols-2 gap-6 mb-6">
                                    <div>
                                        <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">
                                            Your Name
                                        </label>
                                        <input type="text" x-model="contactForm.name" 
                                               class="form-input w-full"
                                               placeholder="Enter your name"
                                               required>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">
                                            Your Email
                                        </label>
                                        <input type="email" x-model="contactForm.email" 
                                               class="form-input w-full"
                                               placeholder="Enter your email"
                                               required>
                                    </div>
                                </div>
                                
                                <div class="mb-6">
                                    <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">
                                        Your Message
                                    </label>
                                    <textarea x-model="contactForm.message" rows="5"
                                              class="form-input w-full resize-none"
                                              placeholder="Tell me about your project..."
                                              required></textarea>
                                </div>
                                
                                <button type="submit" 
                                        :disabled="isSubmitting"
                                        class="btn-primary w-full">
                                    <i class="fas" :class="isSubmitting ? 'fa-spinner fa-spin' : 'fa-paper-plane'"></i>
                                    <span x-text="isSubmitting ? 'Sending...' : 'Send Message'"></span>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 py-12">
        <div class="container mx-auto px-6">
            <div class="grid md:grid-cols-3 gap-12 items-center">
                <div>
                    <div class="text-3xl font-bold text-white mb-3">Portfolio<span class="gradient-text">.dev</span></div>
                    <p class="text-gray-400" x-text="profile.name"></p>
                </div>
                
                <div class="flex justify-center">
                    <div class="flex flex-wrap gap-4">
                        <template x-for="link in socialLinks" :key="link.platform">
                            <a :href="link.url" target="_blank" 
                               class="w-12 h-12 rounded-full glass flex items-center justify-center hover:scale-110 transition-all duration-300">
                                <i :class="link.icon" class="text-xl"></i>
                            </a>
                        </template>
                    </div>
                </div>
                
                <div class="text-right">
                    <p class="text-sm text-gray-400">&copy; <span x-text="portfolioYear"></span> All rights reserved.</p>
                    <p class="text-sm text-gray-500 mt-2">Made with <i class="fas fa-heart text-red-500 mx-1"></i> by Developer</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Enhanced Modals -->
    <!-- Add/Edit Skill Modal -->
    <div x-show="modals.addSkill" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="modal-content max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex justify-between items-center mb-8">
                    <h3 class="text-3xl font-bold">
                        <i class="fas fa-magic mr-3 gradient-text"></i>
                        <span x-text="editingSkill ? 'Edit Skill' : 'Add New Skill'"></span>
                    </h3>
                    <button @click="closeModal('addSkill')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Skill Name *</label>
                        <div class="relative">
                            <input type="text" x-model="newSkill.name" 
                                   @input="filterSkillSuggestions()"
                                   class="form-input w-full pr-10"
                                   placeholder="Start typing or select from list..."
                                   required>
                            <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
                                <i class="fas fa-chevron-down text-gray-400"></i>
                            </div>
                        </div>
                        
                        <!-- Skill Suggestions -->
                        <div x-show="skillSuggestions.length > 0" class="mt-2 max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg">
                            <template x-for="suggestion in skillSuggestions" :key="suggestion">
                                <div @click="selectSkillSuggestion(suggestion)" 
                                     class="dropdown-option">
                                    <i :class="getTechIcon(suggestion)" class="mr-3"></i>
                                    <span x-text="suggestion"></span>
                                </div>
                            </template>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Category</label>
                            <select x-model="newSkill.category" class="form-input w-full">
                                <option value="frontend">Frontend Development</option>
                                <option value="backend">Backend Development</option>
                                <option value="database">Database</option>
                                <option value="mobile">Mobile Development</option>
                                <option value="devops">DevOps</option>
                                <option value="design">UI/UX Design</option>
                                <option value="tools">Tools</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">
                                Proficiency: <span class="gradient-text font-bold" x-text="newSkill.level + '%'"></span>
                            </label>
                            <input type="range" x-model="newSkill.level" min="0" max="100" step="5"
                                   class="w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Description</label>
                        <textarea x-model="newSkill.description" rows="4"
                                  class="form-input w-full resize-none"
                                  placeholder="Describe your experience with this skill..."></textarea>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Years Experience</label>
                            <input type="number" x-model="newSkill.years" min="0" max="50"
                                   class="form-input w-full">
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Projects Completed</label>
                            <input type="number" x-model="newSkill.projects" min="0"
                                   class="form-input w-full">
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-end gap-4 mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
                    <button @click="closeModal('addSkill')" class="btn-outline">
                        Cancel
                    </button>
                    <button @click="addNewSkill()" :disabled="!newSkill.name" class="btn-primary">
                        <span x-text="editingSkill ? 'Update Skill' : 'Add Skill'"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Project Modal -->
    <div x-show="modals.addProject" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="modal-content max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex justify-between items-center mb-8">
                    <h3 class="text-3xl font-bold">
                        <i class="fas fa-rocket mr-3 gradient-text"></i>
                        <span x-text="editingProject ? 'Edit Project' : 'Add New Project'"></span>
                    </h3>
                    <button @click="closeModal('addProject')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Project Name *</label>
                        <input type="text" x-model="newProject.name" 
                               class="form-input w-full"
                               placeholder="e.g., E-Commerce Platform"
                               required>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Project Type</label>
                        <select x-model="newProject.type" class="form-input w-full">
                            <option value="web">Web Application</option>
                            <option value="mobile">Mobile App</option>
                            <option value="api">API</option>
                            <option value="desktop">Desktop</option>
                            <option value="ai">AI/ML Project</option>
                            <option value="saas">SaaS Product</option>
                        </select>
                    </div>
                </div>
                
                <div class="mb-6">
                    <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Description *</label>
                    <textarea x-model="newProject.description" rows="4"
                              class="form-input w-full resize-none"
                              placeholder="Describe the project..."
                              required></textarea>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Technologies</label>
                        <div class="relative">
                            <input type="text" x-model="techInput" 
                                   @input="filterTechSuggestions()"
                                   @keyup.enter="addTechnology()"
                                   class="form-input w-full pr-10"
                                   placeholder="Select technologies...">
                            <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
                                <i class="fas fa-chevron-down text-gray-400"></i>
                            </div>
                        </div>
                        
                        <!-- Technology Suggestions -->
                        <div x-show="techSuggestions.length > 0" class="mt-2 max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg">
                            <template x-for="tech in techSuggestions" :key="tech">
                                <div @click="addTechFromSuggestion(tech)" 
                                     class="dropdown-option">
                                    <i :class="getTechIcon(tech)" class="mr-3"></i>
                                    <span x-text="tech"></span>
                                </div>
                            </template>
                        </div>
                        
                        <!-- Selected Technologies -->
                        <div class="flex flex-wrap gap-2 mt-3">
                            <template x-for="tech in newProject.technologies" :key="tech">
                                <span class="chip bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300">
                                    <i :class="getTechIcon(tech)" class="mr-2"></i>
                                    <span x-text="tech"></span>
                                    <button @click="removeTech(tech)" type="button" class="ml-2 text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </span>
                            </template>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Project Image URL</label>
                        <input type="text" x-model="newProject.image" 
                               class="form-input w-full"
                               placeholder="https://example.com/image.jpg">
                    </div>
                </div>
                
                <div class="flex justify-end gap-4 mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
                    <button @click="closeModal('addProject')" class="btn-outline">
                        Cancel
                    </button>
                    <button @click="addNewProject()" :disabled="!newProject.name || !newProject.description" class="btn-primary">
                        <span x-text="editingProject ? 'Update Project' : 'Add Project'"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Project Detail Modal -->
    <div x-show="modals.projectDetail" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div x-show="selectedProject" class="modal-content max-w-6xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex justify-between items-start mb-8">
                    <div>
                        <h3 class="text-3xl font-bold mb-4" x-text="selectedProject?.name"></h3>
                        <div class="flex flex-wrap gap-3">
                            <span class="px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-lg">
                                <i class="fas fa-layer-group mr-2"></i>
                                <span x-text="getProjectTypeName(selectedProject?.type)"></span>
                            </span>
                            <span :class="getProjectStatusClass(selectedProject?.status)" 
                                  class="px-4 py-2 rounded-lg">
                                <span x-text="selectedProject?.status"></span>
                            </span>
                        </div>
                    </div>
                    <button @click="closeModal('projectDetail')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <div class="space-y-8">
                    <div class="rounded-2xl overflow-hidden">
                        <img :src="selectedProject?.image" 
                             :alt="selectedProject?.name"
                             class="w-full h-96 object-cover">
                    </div>
                    
                    <div>
                        <h4 class="text-2xl font-bold mb-4">Project Overview</h4>
                        <p class="text-gray-600 dark:text-gray-300 leading-relaxed" x-text="selectedProject?.description"></p>
                    </div>
                    
                    <div x-show="selectedProject?.technologies?.length > 0">
                        <h4 class="text-2xl font-bold mb-4">Technologies Used</h4>
                        <div class="flex flex-wrap gap-3">
                            <template x-for="tech in selectedProject?.technologies" :key="tech">
                                <span class="px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-lg flex items-center gap-2">
                                    <i :class="getTechIcon(tech)"></i>
                                    <span x-text="tech"></span>
                                </span>
                            </template>
                        </div>
                    </div>
                    
                    <div class="flex gap-4">
                        <button @click="closeModal('projectDetail')" class="btn-outline flex-1">
                            Close
                        </button>
                        <button x-show="!isPublicMode" @click="editProject(selectedProject); closeModal('projectDetail')" class="btn-primary flex-1">
                            <i class="fas fa-edit mr-2"></i>
                            Edit Project
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div x-show="modals.editProfile" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="modal-content max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex justify-between items-center mb-8">
                    <h3 class="text-3xl font-bold">
                        <i class="fas fa-user-edit mr-3 gradient-text"></i>
                        Edit Profile
                    </h3>
                    <button @click="closeModal('editProfile')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Full Name *</label>
                        <input type="text" x-model="profile.name" 
                               class="form-input w-full"
                               placeholder="Your full name"
                               required>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Email *</label>
                            <input type="email" x-model="profile.email" 
                                   class="form-input w-full"
                                   placeholder="your.email@example.com"
                                   required>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Phone</label>
                            <input type="tel" x-model="profile.phone" 
                                   class="form-input w-full"
                                   placeholder="+1 234 567 8900">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Location</label>
                        <input type="text" x-model="profile.location" 
                               class="form-input w-full"
                               placeholder="City, Country">
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Bio *</label>
                        <textarea x-model="profile.bio" rows="4"
                                  class="form-input w-full resize-none"
                                  placeholder="Tell us about yourself..."
                                  required></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-3 font-semibold">Profile Image URL</label>
                        <input type="text" x-model="profile.image" 
                               class="form-input w-full"
                               placeholder="https://example.com/profile.jpg">
                        <p class="text-sm text-gray-500 mt-2">Leave empty to use generated avatar</p>
                    </div>
                </div>
                
                <div class="flex justify-end gap-4 mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
                    <button @click="closeModal('editProfile')" class="btn-outline">
                        Cancel
                    </button>
                    <button @click="updateProfile()" :disabled="!profile.name || !profile.email || !profile.bio" class="btn-primary">
                        Save Profile
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Social Links Modal -->
    <div x-show="modals.editSocialLinks" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="modal-content max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex justify-between items-center mb-8">
                    <h3 class="text-3xl font-bold">
                        <i class="fas fa-share-alt mr-3 gradient-text"></i>
                        Edit Social Links
                    </h3>
                    <button @click="closeModal('editSocialLinks')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <div class="mb-8">
                    <h4 class="text-xl font-bold mb-4">Quick Add Popular Platforms</h4>
                    <div class="flex flex-wrap gap-2 mb-6">
                        <template x-for="platform in popularSocialPlatforms" :key="platform.name">
                            <button @click="addQuickSocialLink(platform.name)" 
                                    class="chip" :style="'background: ' + getSocialPlatformColor(platform.name)">
                                <i :class="platform.icon" class="mr-2"></i>
                                <span x-text="platform.name"></span>
                            </button>
                        </template>
                    </div>
                </div>
                
                <div class="space-y-6">
                    <template x-for="(link, index) in socialLinks" :key="index">
                        <div class="card-hover p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-bold text-lg" x-text="getSocialPlatformName(link.platform)"></h4>
                                <div class="flex gap-2">
                                    <button @click="moveSocialLink(index, 'up')" :disabled="index === 0" 
                                            class="w-10 h-10 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-arrow-up"></i>
                                    </button>
                                    <button @click="moveSocialLink(index, 'down')" :disabled="index === socialLinks.length - 1" 
                                            class="w-10 h-10 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-arrow-down"></i>
                                    </button>
                                    <button @click="removeSocialLink(index)" 
                                            class="w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Platform</label>
                                    <select x-model="link.platform" @change="handlePlatformChange(link, index)" 
                                            class="form-input w-full">
                                        <template x-for="platform in allSocialPlatforms" :key="platform.name">
                                            <option :value="platform.name" x-text="platform.name"></option>
                                        </template>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">URL</label>
                                    <input type="url" x-model="link.url" 
                                           class="form-input w-full"
                                           :placeholder="getSocialPlaceholder(link.platform)">
                                </div>
                            </div>
                            
                            <div class="mt-4 flex items-center gap-4">
                                <div class="w-10 h-10 rounded-full flex items-center justify-center" 
                                     :style="'background: ' + getSocialPlatformColor(link.platform)">
                                    <i :class="link.icon" class="text-white"></i>
                                </div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">
                                    Preview: <a :href="link.url" target="_blank" class="text-primary hover:underline" x-text="link.url || 'Not set'"></a>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
                
                <div class="mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
                    <button @click="addSocialLink()" class="btn-outline w-full">
                        <i class="fas fa-plus mr-2"></i>
                        Add Another Platform
                    </button>
                </div>
                
                <div class="flex justify-end gap-4 mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
                    <button @click="closeModal('editSocialLinks')" class="btn-outline">
                        Cancel
                    </button>
                    <button @click="saveSocialLinks()" class="btn-primary">
                        Save Social Links
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Technology Spectrum Modal -->
    <div x-show="modals.editTechnologySpectrum" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="modal-content max-w-6xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex justify-between items-center mb-8">
                    <h3 class="text-3xl font-bold">
                        <i class="fas fa-layer-group mr-3 gradient-text"></i>
                        Edit Technology Spectrum
                    </h3>
                    <button @click="closeModal('editTechnologySpectrum')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <div class="mb-8">
                    <h4 class="text-xl font-bold mb-4">Add New Technology</h4>
                    <div class="grid md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Technology Name</label>
                            <input type="text" x-model="newTech.name" 
                                   class="form-input w-full"
                                   placeholder="e.g., React">
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Category</label>
                            <select x-model="newTech.category" class="form-input w-full">
                                <option value="frontend">Frontend</option>
                                <option value="backend">Backend</option>
                                <option value="database">Database</option>
                                <option value="devops">DevOps</option>
                                <option value="mobile">Mobile</option>
                                <option value="design">Design</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 dark:text-gray-300 mb-2 font-medium">Color</label>
                            <select x-model="newTech.color" class="form-input w-full">
                                <option value="blue">Blue</option>
                                <option value="green">Green</option>
                                <option value="purple">Purple</option>
                                <option value="pink">Pink</option>
                                <option value="orange">Orange</option>
                                <option value="red">Red</option>
                                <option value="teal">Teal</option>
                            </select>
                        </div>
                        
                        <div class="flex items-end">
                            <button @click="addTechnologyToSpectrum()" class="btn-primary w-full">
                                <i class="fas fa-plus mr-2"></i>
                                Add
                            </button>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-xl font-bold mb-4">Current Technologies</h4>
                    <div class="sortable-list" @dragover.prevent @drop="handleTechDrop">
                        <template x-for="(tech, index) in technologySpectrum" :key="tech.id">
                            <div class="sortable-item draggable-item" 
                                 draggable="true"
                                 @dragstart="handleTechDragStart(index)"
                                 @dragend="handleTechDragEnd">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 rounded-lg flex items-center justify-center" 
                                             :style="'background: ' + getTechColor(tech.color)">
                                            <i :class="tech.icon" class="text-white text-xl"></i>
                                        </div>
                                        <div>
                                            <h5 class="font-bold text-lg" x-text="tech.name"></h5>
                                            <p class="text-gray-600 dark:text-gray-400 text-sm" x-text="tech.description"></p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex gap-2">
                                        <button @click="editTechnology(tech)" 
                                                class="w-10 h-10 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center justify-center">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button @click="removeTechnologyFromSpectrum(tech.id)" 
                                                class="w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-lg flex items-center justify-center">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
                
                <div class="flex justify-end gap-4 mt-8 pt-8 border-t border-gray-200 dark:border-gray-700">
                    <button @click="closeModal('editTechnologySpectrum')" class="btn-outline">
                        Cancel
                    </button>
                    <button @click="saveTechnologySpectrum()" class="btn-primary">
                        Save Changes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div x-show="modals.deleteConfirm" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="modal-content max-w-md w-full">
            <div class="p-8">
                <div class="text-center mb-8">
                    <div class="w-16 h-16 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-exclamation-triangle text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-2">Confirm Delete</h3>
                    <p class="text-gray-600 dark:text-gray-400">
                        Are you sure you want to delete 
                        <span class="font-bold text-primary" x-text="deleteItem.name"></span>?
                        This action cannot be undone.
                    </p>
                </div>
                
                <div class="flex justify-center gap-4">
                    <button @click="closeModal('deleteConfirm')" class="btn-outline">
                        Cancel
                    </button>
                    <button @click="executeDelete()" class="btn-primary bg-red-500 hover:bg-red-600 !border-red-500">
                        <i class="fas fa-trash mr-2"></i>
                        Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBAuVIJp4jZCzxuBIBFez2SdLMi7MNHNJk",
            authDomain: "portofolio-4a7eb.firebaseapp.com",
            projectId: "portofolio-4a7eb",
            storageBucket: "portofolio-4a7eb.firebasestorage.app",
            messagingSenderId: "36345970852",
            appId: "1:36345970852:web:d0a47e15126f7038fce631"
        };

        // Database of all technologies with icons
        const technologyDatabase = {
            frontend: [
                { name: 'HTML5', icon: 'fab fa-html5' },
                { name: 'CSS3', icon: 'fab fa-css3-alt' },
                { name: 'JavaScript', icon: 'fab fa-js' },
                { name: 'TypeScript', icon: 'fab fa-js-square' },
                { name: 'React', icon: 'fab fa-react' },
                { name: 'Vue.js', icon: 'fab fa-vuejs' },
                { name: 'Angular', icon: 'fab fa-angular' },
                { name: 'Svelte', icon: 'fas fa-code' },
                { name: 'Next.js', icon: 'fas fa-arrow-right' },
                { name: 'Nuxt.js', icon: 'fas fa-arrow-right' },
                { name: 'Tailwind CSS', icon: 'fas fa-wind' },
                { name: 'Bootstrap', icon: 'fab fa-bootstrap' },
                { name: 'SASS', icon: 'fab fa-sass' },
                { name: 'Webpack', icon: 'fas fa-cube' },
                { name: 'Babel', icon: 'fas fa-cogs' },
                { name: 'Redux', icon: 'fas fa-database' },
                { name: 'GraphQL', icon: 'fas fa-project-diagram' }
            ],
            backend: [
                { name: 'Node.js', icon: 'fab fa-node-js' },
                { name: 'Express.js', icon: 'fas fa-server' },
                { name: 'Python', icon: 'fab fa-python' },
                { name: 'Django', icon: 'fab fa-python' },
                { name: 'Flask', icon: 'fab fa-python' },
                { name: 'Java', icon: 'fab fa-java' },
                { name: 'Spring Boot', icon: 'fab fa-java' },
                { name: 'PHP', icon: 'fab fa-php' },
                { name: 'Laravel', icon: 'fab fa-laravel' },
                { name: 'Ruby', icon: 'fab fa-ruby' },
                { name: 'Ruby on Rails', icon: 'fab fa-ruby' },
                { name: 'Go', icon: 'fab fa-golang' },
                { name: 'C#', icon: 'fas fa-code' },
                { name: '.NET', icon: 'fab fa-microsoft' },
                { name: 'FastAPI', icon: 'fas fa-bolt' },
                { name: 'NestJS', icon: 'fas fa-feather-alt' },
                { name: 'Socket.io', icon: 'fas fa-plug' }
            ],
            database: [
                { name: 'MongoDB', icon: 'fas fa-database' },
                { name: 'PostgreSQL', icon: 'fas fa-database' },
                { name: 'MySQL', icon: 'fas fa-database' },
                { name: 'Redis', icon: 'fas fa-database' },
                { name: 'Firebase', icon: 'fas fa-fire' },
                { name: 'SQLite', icon: 'fas fa-database' },
                { name: 'Oracle', icon: 'fas fa-database' },
                { name: 'Elasticsearch', icon: 'fas fa-search' },
                { name: 'Cassandra', icon: 'fas fa-database' }
            ],
            devops: [
                { name: 'Docker', icon: 'fab fa-docker' },
                { name: 'Kubernetes', icon: 'fas fa-ship' },
                { name: 'AWS', icon: 'fab fa-aws' },
                { name: 'Google Cloud', icon: 'fab fa-google' },
                { name: 'Azure', icon: 'fab fa-microsoft' },
                { name: 'Git', icon: 'fab fa-git-alt' },
                { name: 'GitHub Actions', icon: 'fab fa-github' },
                { name: 'Jenkins', icon: 'fas fa-tools' },
                { name: 'Terraform', icon: 'fas fa-mountain' },
                { name: 'Ansible', icon: 'fas fa-cogs' },
                { name: 'Nginx', icon: 'fas fa-server' },
                { name: 'Linux', icon: 'fab fa-linux' }
            ],
            mobile: [
                { name: 'React Native', icon: 'fab fa-react' },
                { name: 'Flutter', icon: 'fas fa-mobile-alt' },
                { name: 'Android', icon: 'fab fa-android' },
                { name: 'iOS', icon: 'fab fa-apple' },
                { name: 'Ionic', icon: 'fas fa-mobile' },
                { name: 'Xamarin', icon: 'fab fa-microsoft' }
            ],
            design: [
                { name: 'Figma', icon: 'fab fa-figma' },
                { name: 'Adobe XD', icon: 'fas fa-palette' },
                { name: 'Sketch', icon: 'fas fa-palette' },
                { name: 'Photoshop', icon: 'fas fa-image' },
                { name: 'Illustrator', icon: 'fas fa-paint-brush' }
            ],
            tools: [
                { name: 'GitHub', icon: 'fab fa-github' },
                { name: 'GitLab', icon: 'fab fa-gitlab' },
                { name: 'Bitbucket', icon: 'fab fa-bitbucket' },
                { name: 'Jira', icon: 'fab fa-jira' },
                { name: 'Confluence', icon: 'fab fa-atlassian' },
                { name: 'Slack', icon: 'fab fa-slack' },
                { name: 'VS Code', icon: 'fas fa-code' },
                { name: 'Postman', icon: 'fas fa-paper-plane' },
                { name: 'Swagger', icon: 'fas fa-file-code' }
            ]
        };

        // Database of all social media platforms
        const socialPlatformsDatabase = [
            { name: 'GitHub', icon: 'fab fa-github', placeholder: 'https://github.com/username', category: 'coding' },
            { name: 'GitLab', icon: 'fab fa-gitlab', placeholder: 'https://gitlab.com/username', category: 'coding' },
            { name: 'Bitbucket', icon: 'fab fa-bitbucket', placeholder: 'https://bitbucket.org/username', category: 'coding' },
            { name: 'Stack Overflow', icon: 'fab fa-stack-overflow', placeholder: 'https://stackoverflow.com/users/username', category: 'coding' },
            { name: 'LinkedIn', icon: 'fab fa-linkedin-in', placeholder: 'https://linkedin.com/in/username', category: 'professional' },
            { name: 'Twitter', icon: 'fab fa-twitter', placeholder: 'https://twitter.com/username', category: 'social' },
            { name: 'Instagram', icon: 'fab fa-instagram', placeholder: 'https://instagram.com/username', category: 'social' },
            { name: 'Facebook', icon: 'fab fa-facebook-f', placeholder: 'https://facebook.com/username', category: 'social' },
            { name: 'YouTube', icon: 'fab fa-youtube', placeholder: 'https://youtube.com/c/username', category: 'social' },
            { name: 'Twitch', icon: 'fab fa-twitch', placeholder: 'https://twitch.tv/username', category: 'social' },
            { name: 'Discord', icon: 'fab fa-discord', placeholder: 'https://discord.gg/invite', category: 'social' },
            { name: 'Telegram', icon: 'fab fa-telegram', placeholder: 'https://t.me/username', category: 'social' },
            { name: 'WhatsApp', icon: 'fab fa-whatsapp', placeholder: 'https://wa.me/phone-number', category: 'social' },
            { name: 'Medium', icon: 'fab fa-medium', placeholder: 'https://medium.com/@username', category: 'blogging' },
            { name: 'Dev.to', icon: 'fab fa-dev', placeholder: 'https://dev.to/username', category: 'blogging' },
            { name: 'Hashnode', icon: 'fas fa-hashtag', placeholder: 'https://username.hashnode.dev', category: 'blogging' },
            { name: 'Dribbble', icon: 'fab fa-dribbble', placeholder: 'https://dribbble.com/username', category: 'design' },
            { name: 'Behance', icon: 'fab fa-behance', placeholder: 'https://behance.net/username', category: 'design' },
            { name: 'Figma', icon: 'fab fa-figma', placeholder: 'https://figma.com/@username', category: 'design' },
            { name: 'CodePen', icon: 'fab fa-codepen', placeholder: 'https://codepen.io/username', category: 'coding' },
            { name: 'HackerRank', icon: 'fas fa-code', placeholder: 'https://hackerrank.com/username', category: 'coding' },
            { name: 'LeetCode', icon: 'fas fa-laptop-code', placeholder: 'https://leetcode.com/username', category: 'coding' },
            { name: 'Reddit', icon: 'fab fa-reddit', placeholder: 'https://reddit.com/user/username', category: 'social' },
            { name: 'Pinterest', icon: 'fab fa-pinterest', placeholder: 'https://pinterest.com/username', category: 'social' },
            { name: 'TikTok', icon: 'fab fa-tiktok', placeholder: 'https://tiktok.com/@username', category: 'social' },
            { name: 'Snapchat', icon: 'fab fa-snapchat', placeholder: 'https://snapchat.com/add/username', category: 'social' },
            { name: 'Spotify', icon: 'fab fa-spotify', placeholder: 'https://open.spotify.com/user/username', category: 'music' },
            { name: 'SoundCloud', icon: 'fab fa-soundcloud', placeholder: 'https://soundcloud.com/username', category: 'music' },
            { name: 'Goodreads', icon: 'fab fa-goodreads', placeholder: 'https://goodreads.com/user/show/username', category: 'books' },
            { name: 'Product Hunt', icon: 'fas fa-rocket', placeholder: 'https://producthunt.com/@username', category: 'startup' },
            { name: 'AngelList', icon: 'fas fa-angellist', placeholder: 'https://angel.co/u/username', category: 'startup' },
            { name: 'Upwork', icon: 'fas fa-briefcase', placeholder: 'https://upwork.com/freelancers/~username', category: 'freelance' },
            { name: 'Fiverr', icon: 'fas fa-dollar-sign', placeholder: 'https://fiverr.com/username', category: 'freelance' },
            { name: 'Freelancer', icon: 'fas fa-briefcase', placeholder: 'https://freelancer.com/u/username', category: 'freelance' },
            { name: 'Kaggle', icon: 'fab fa-kaggle', placeholder: 'https://kaggle.com/username', category: 'data' },
            { name: 'ResearchGate', icon: 'fas fa-flask', placeholder: 'https://researchgate.net/profile/username', category: 'academic' }
        ];

        // Database of all skills for auto-suggest
        const skillsDatabase = [
            // Frontend Skills
            'HTML5', 'CSS3', 'JavaScript', 'TypeScript', 'React', 'Vue.js', 'Angular', 'Svelte',
            'Next.js', 'Nuxt.js', 'Gatsby', 'Redux', 'MobX', 'GraphQL', 'Apollo', 'Webpack',
            'Babel', 'ESLint', 'Prettier', 'Jest', 'Testing Library', 'Cypress', 'Storybook',
            'Tailwind CSS', 'Bootstrap', 'Material-UI', 'Chakra UI', 'Styled Components',
            'SASS/SCSS', 'LESS', 'PWA', 'WebSockets', 'WebRTC',
            
            // Backend Skills
            'Node.js', 'Express.js', 'NestJS', 'Fastify', 'Python', 'Django', 'Flask', 'FastAPI',
            'Java', 'Spring Boot', 'Kotlin', 'PHP', 'Laravel', 'Symfony', 'Ruby', 'Ruby on Rails',
            'Go', 'Rust', 'C#', '.NET', 'ASP.NET', 'C++', 'Scala', 'Haskell',
            'REST API', 'GraphQL API', 'Microservices', 'Serverless', 'WebSockets', 'OAuth', 'JWT',
            
            // Database Skills
            'MongoDB', 'PostgreSQL', 'MySQL', 'SQLite', 'Redis', 'Elasticsearch', 'Cassandra',
            'DynamoDB', 'Firebase', 'Supabase', 'Prisma', 'Sequelize', 'TypeORM', 'Mongoose',
            'Database Design', 'SQL Optimization', 'NoSQL', 'Data Modeling', 'ETL',
            
            // DevOps Skills
            'Docker', 'Kubernetes', 'AWS', 'Google Cloud', 'Azure', 'DigitalOcean', 'Heroku',
            'Vercel', 'Netlify', 'Git', 'GitHub Actions', 'GitLab CI', 'Jenkins', 'CircleCI',
            'Travis CI', 'Terraform', 'Ansible', 'Prometheus', 'Grafana', 'ELK Stack',
            'Nginx', 'Apache', 'Linux', 'Shell Scripting', 'Bash', 'PowerShell',
            
            // Mobile Skills
            'React Native', 'Flutter', 'Ionic', 'Swift', 'Kotlin', 'Java (Android)', 'Objective-C',
            'Xamarin', 'Cordova', 'Mobile UI/UX', 'App Store', 'Google Play', 'Push Notifications',
            
            // Design Skills
            'UI Design', 'UX Design', 'Figma', 'Adobe XD', 'Sketch', 'Photoshop', 'Illustrator',
            'InDesign', 'Design Systems', 'Prototyping', 'Wireframing', 'User Research',
            'Accessibility', 'Responsive Design', 'Motion Design',
            
            // Soft Skills
            'Problem Solving', 'Team Leadership', 'Project Management', 'Agile/Scrum',
            'Communication', 'Time Management', 'Mentoring', 'Public Speaking', 'Technical Writing',
            
            // Other Skills
            'Machine Learning', 'Data Science', 'Blockchain', 'Web3', 'Smart Contracts',
            'Cybersecurity', 'SEO', 'Performance Optimization', 'Internationalization',
            'Payment Integration', 'Web Analytics', 'Chatbots', 'AR/VR'
        ];

        // Predefined public portfolio data
        const predefinedPublicData = {
            profile: {
                name: 'Zuyyina Firdausi Muhammad',
                title: 'Full Stack Developer',
                email: 'muhammadzuyyina@gmail.com',
                phone: '+62 822 9569 2941',
                location: 'Indonesia',
                bio: 'Experienced Full Stack Developer with expertise in modern web technologies. Passionate about creating efficient, scalable, and user-friendly applications.',
                image: null
            },
            skills: [
                {
                    id: 1,
                    name: 'React',
                    category: 'frontend',
                    level: 95,
                    years: 3,
                    projects: 15,
                    icon: 'fab fa-react',
                    description: 'Modern React with Hooks, Context API, and advanced patterns'
                },
                {
                    id: 2,
                    name: 'Node.js',
                    category: 'backend',
                    level: 90,
                    years: 3,
                    projects: 12,
                    icon: 'fab fa-node-js',
                    description: 'Building scalable server-side applications and APIs'
                },
                {
                    id: 3,
                    name: 'MongoDB',
                    category: 'database',
                    level: 85,
                    years: 2,
                    projects: 8,
                    icon: 'fas fa-database',
                    description: 'NoSQL database design and optimization'
                },
                {
                    id: 4,
                    name: 'Tailwind CSS',
                    category: 'frontend',
                    level: 90,
                    years: 2,
                    projects: 10,
                    icon: 'fas fa-paint-brush',
                    description: 'Utility-first CSS framework for rapid UI development'
                },
                {
                    id: 5,
                    name: 'Docker',
                    category: 'devops',
                    level: 80,
                    years: 1,
                    projects: 5,
                    icon: 'fab fa-docker',
                    description: 'Containerization and deployment automation'
                },
                {
                    id: 6,
                    name: 'Python',
                    category: 'backend',
                    level: 75,
                    years: 2,
                    projects: 7,
                    icon: 'fab fa-python',
                    description: 'Backend development and automation scripts'
                }
            ],
            projects: [
                {
                    id: 1,
                    name: 'E-Commerce Platform',
                    description: 'A full-featured e-commerce platform with real-time inventory management, payment processing, and customer analytics. Built with React, Node.js, and MongoDB.',
                    type: 'web',
                    technologies: ['React', 'Node.js', 'MongoDB', 'Express.js', 'Tailwind CSS', 'Stripe API'],
                    image: 'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    demoUrl: '#',
                    sourceUrl: '#',
                    features: ['Real-time inventory', 'Payment integration', 'Admin dashboard', 'Customer analytics'],
                    status: 'completed',
                    date: '2024'
                },
                {
                    id: 2,
                    name: 'Task Management App',
                    description: 'Collaborative task management application with real-time updates, team features, and drag-and-drop interface. Built with Vue.js and Firebase.',
                    type: 'web',
                    technologies: ['Vue.js', 'Firebase', 'Vuex', 'Vue Router', 'Tailwind CSS'],
                    image: 'https://images.unsplash.com/photo-1611224923853-80b023f02d71?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    demoUrl: '#',
                    sourceUrl: '#',
                    features: ['Real-time collaboration', 'Team management', 'File attachments', 'Drag & drop'],
                    status: 'completed',
                    date: '2024'
                },
                {
                    id: 3,
                    name: 'Weather Dashboard',
                    description: 'Real-time weather dashboard with multiple city support, 7-day forecast, and interactive maps. Uses OpenWeather API and Chart.js.',
                    type: 'web',
                    technologies: ['React', 'Chart.js', 'OpenWeather API', 'Leaflet.js', 'CSS3'],
                    image: 'https://images.unsplash.com/photo-1592210454359-9043f067919b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    demoUrl: '#',
                    sourceUrl: '#',
                    features: ['Multiple cities', '7-day forecast', 'Interactive maps', 'Data visualization'],
                    status: 'completed',
                    date: '2023'
                }
            ],
            socialLinks: [
                {
                    platform: 'GitHub',
                    url: 'https://github.com/username',
                    icon: 'fab fa-github'
                },
                {
                    platform: 'LinkedIn',
                    url: 'https://linkedin.com/in/username',
                    icon: 'fab fa-linkedin-in'
                },
                {
                    platform: 'Twitter',
                    url: 'https://twitter.com/username',
                    icon: 'fab fa-twitter'
                },
                {
                    platform: 'Email',
                    url: 'mailto:muhammadzuyyina@gmail.com',
                    icon: 'fas fa-envelope'
                }
            ],
            technologySpectrum: [
                {
                    id: 1,
                    name: 'React',
                    icon: 'fab fa-react',
                    description: 'Frontend Library',
                    category: 'frontend',
                    color: 'blue',
                    order: 1
                },
                {
                    id: 2,
                    name: 'Node.js',
                    icon: 'fab fa-node-js',
                    description: 'JavaScript Runtime',
                    category: 'backend',
                    color: 'green',
                    order: 2
                },
                {
                    id: 3,
                    name: 'MongoDB',
                    icon: 'fas fa-database',
                    description: 'NoSQL Database',
                    category: 'database',
                    color: 'teal',
                    order: 3
                },
                {
                    id: 4,
                    name: 'Docker',
                    icon: 'fab fa-docker',
                    description: 'Container Platform',
                    category: 'devops',
                    color: 'blue',
                    order: 4
                },
                {
                    id: 5,
                    name: 'Python',
                    icon: 'fab fa-python',
                    description: 'Backend Language',
                    category: 'backend',
                    color: 'orange',
                    order: 5
                },
                {
                    id: 6,
                    name: 'AWS',
                    icon: 'fab fa-aws',
                    description: 'Cloud Platform',
                    category: 'devops',
                    color: 'orange',
                    order: 6
                },
                {
                    id: 7,
                    name: 'Vue.js',
                    icon: 'fab fa-vuejs',
                    description: 'Progressive Framework',
                    category: 'frontend',
                    color: 'green',
                    order: 7
                },
                {
                    id: 8,
                    name: 'PostgreSQL',
                    icon: 'fas fa-database',
                    description: 'Relational Database',
                    category: 'database',
                    color: 'blue',
                    order: 8
                }
            ]
        };

        function portfolio() {
            return {
                // STATE BARU: Mode Management
                isPublicMode: true,
                isOwner: false,
                showAuthModal: false,
                
                // STATE YANG DIUPDATE: Load status
                isLoading: true,
                loadingMessage: 'Loading portfolio...',
                loadingProgress: 0,
                portfolioDataLoaded: false,

                // State lainnya
                isDark: true,
                mobileMenu: false,
                activeSection: 'home',
                scrollProgress: 0,
                isAtTop: true,
                showToast: false,
                toastMessage: '',
                toastType: 'success',
                showDataPanel: false,
                techInput: '',
                skillSuggestions: [],
                techSuggestions: [],
                activeSkillCategory: 'all',
                selectedProject: null,
                editingSkill: null,
                editingProject: null,
                uploadingImage: false,
                uploadingProfileImage: false,
                isSubmitting: false,
                deleteItem: { type: '', id: null, name: '' },
                draggingTechIndex: null,

                // Firebase State
                firebaseApp: null,
                firestore: null,
                auth: null,
                userId: null,
                userEmail: null,
                isOnline: false,
                isSyncing: false,
                syncHistory: [],
                lastSyncTime: 'Never',

                // Data Status
                dataStatus: 'synced',
                storageAvailable: true,
                dataIntegrity: false,
                storageUsage: '0 KB',

                // Project Slider State
                projectView: 'grid',
                currentSlide: 0,
                projectSlides: [],
                autoSlideEnabled: false,
                autoSlideInterval: null,
                projectsPerSlide: 3,

                // Storage Configuration
                storageConfig: {
                    maxImageSize: 1 * 1024 * 1024,
                    compressionQuality: 0.7,
                    enableCompression: true,
                    maxTotalSize: 5 * 1024 * 1024,
                    backupCount: 3
                },

                // Profile Data
                profile: { ...predefinedPublicData.profile },
                skills: [...predefinedPublicData.skills],
                projects: [...predefinedPublicData.projects],
                socialLinks: [...predefinedPublicData.socialLinks],
                technologySpectrum: [...predefinedPublicData.technologySpectrum],
                portfolioYear: new Date().getFullYear(),

                // Navigation
                navItems: [
                    { name: 'Home', href: '#home' },
                    { name: 'Skills', href: '#skills' },
                    { name: 'Projects', href: '#projects' },
                    { name: 'Contact', href: '#contact' }
                ],

                // Skill Categories
                skillCategories: [
                    'frontend', 'backend', 'database', 'mobile', 
                    'devops', 'cloud', 'tools', 'design', 'ai'
                ],

                // Popular Social Platforms
                popularSocialPlatforms: [
                    { name: 'GitHub', icon: 'fab fa-github' },
                    { name: 'LinkedIn', icon: 'fab fa-linkedin-in' },
                    { name: 'Twitter', icon: 'fab fa-twitter' },
                    { name: 'Instagram', icon: 'fab fa-instagram' },
                    { name: 'YouTube', icon: 'fab fa-youtube' },
                    { name: 'Facebook', icon: 'fab fa-facebook-f' },
                    { name: 'Email', icon: 'fas fa-envelope' }
                ],

                // All Social Platforms
                allSocialPlatforms: socialPlatformsDatabase,

                // New Technology for Spectrum
                newTech: {
                    name: '',
                    icon: 'fas fa-code',
                    description: '',
                    category: 'frontend',
                    color: 'blue',
                    order: 0
                },

                // New Skill Data
                newSkill: {
                    name: '',
                    category: 'frontend',
                    level: 70,
                    years: 1,
                    projects: 0,
                    icon: 'fas fa-code',
                    description: ''
                },

                // New Project Data
                newProject: {
                    name: '',
                    description: '',
                    type: 'web',
                    technologies: [],
                    image: '',
                    demoUrl: '',
                    sourceUrl: '',
                    startDate: '',
                    endDate: '',
                    isOngoing: false,
                    role: '',
                    teamSize: 1,
                    status: 'completed',
                    client: '',
                    challenges: '',
                    features: []
                },

                // Contact Form
                contactForm: {
                    name: '',
                    email: '',
                    message: ''
                },

                // Modals
                modals: {
                    projectDetail: false,
                    addProject: false,
                    addSkill: false,
                    editProfile: false,
                    editSocialLinks: false,
                    editTechnologySpectrum: false,
                    deleteConfirm: false
                },

                // COMPUTED PROPERTIES
                get filteredSkills() {
                    if (this.activeSkillCategory === 'all') {
                        return this.skills;
                    }
                    return this.skills.filter(skill => skill.category === this.activeSkillCategory);
                },

                get averageSkillLevel() {
                    if (this.skills.length === 0) return 70;
                    const total = this.skills.reduce((sum, skill) => sum + skill.level, 0);
                    const avg = total / this.skills.length;
                    return Math.round(avg >= 70 ? avg : 70);
                },

                get totalProjectCount() {
                    return this.skills.reduce((total, skill) => total + skill.projects, 0);
                },

                get totalExperienceYears() {
                    const startYear = 2020;
                    const currentYear = new Date().getFullYear();
                    return Math.max(1, currentYear - startYear);
                },

                get totalItems() {
                    return this.skills.length + this.projects.length;
                },

                get connectionStatusText() {
                    if (!this.isOnline) return 'Offline';
                    if (this.isSyncing) return 'Syncing...';
                    if (this.userId) return 'Cloud Sync Active';
                    return 'Cloud Data Loaded';
                },

                get dataStatusText() {
                    if (this.dataStatus === 'synced') return 'Data Synced';
                    if (this.dataStatus === 'unsynced') return 'Data Not Synced';
                    return 'Data Error';
                },

                get profileImageSrc() {
                    if (!this.profile.image || this.profile.image.trim() === '') {
                        return this.generateDefaultAvatar();
                    }
                    return this.profile.image;
                },

                // INITIALIZATION
                init() {
                    console.log(' Portfolio initialization started');
                    
                    this.setupEventListeners();
                    
                    const savedTheme = localStorage.getItem('theme');
                    this.isDark = savedTheme ? savedTheme === 'dark' : true;

                    this.initParticles();

                    this.isOnline = navigator.onLine;
                    console.log(' Online status:', this.isOnline);
                    
                    window.addEventListener('online', () => {
                        this.isOnline = true;
                        console.log(' Went online');
                        this.showToastMessage('You are back online', 'success');
                        if (this.isOnline) {
                            setTimeout(() => this.initFirebasePublic(), 1000);
                        }
                    });
                    
                    window.addEventListener('offline', () => {
                        this.isOnline = false;
                        console.log(' Went offline');
                        this.showToastMessage('You are offline', 'warning');
                    });

                    // Cek jika user sudah login sebelumnya
                    const savedAuth = localStorage.getItem('firebase_auth');
                    if (savedAuth) {
                        try {
                            const authData = JSON.parse(savedAuth);
                            console.log(' Found saved auth data:', authData.email);
                            
                            // Set user data
                            this.userId = authData.uid;
                            this.userEmail = authData.email;
                            this.isOwner = true;
                            this.isPublicMode = false;
                            
                            console.log(' Restored login from localStorage');
                            
                            // Muat data pengguna
                            setTimeout(() => {
                                this.loadUserData();
                            }, 500);
                            
                        } catch (e) {
                            console.error('Error parsing saved auth:', e);
                        }
                    }

                    console.log(' Initializing Firebase for public access...');
                    setTimeout(() => {
                        this.initFirebasePublic();
                    }, 1000);
                    
                    this.updateProjectSlides();
                    
                    setTimeout(() => {
                        this.isLoading = false;
                        console.log(' Portfolio loaded successfully');
                    }, 1500);
                },

                // FIREBASE INITIALIZATION UNTUK PUBLIC ACCESS
                initFirebasePublic() {
                    console.log(' Attempting to initialize Firebase for public access...');
                    
                    try {
                        if (typeof firebase === 'undefined') {
                            console.error(' Firebase SDK not loaded!');
                            this.showToastMessage('Firebase SDK not loaded. Using predefined data.', 'warning');
                            this.usePredefinedData();
                            return;
                        }
                        
                        console.log(' Firebase SDK is loaded');
                        
                        try {
                            if (!firebase.apps || firebase.apps.length === 0) {
                                console.log(' Initializing new Firebase app...');
                                this.firebaseApp = firebase.initializeApp(firebaseConfig);
                                console.log(' Firebase app initialized');
                            } else {
                                console.log(' Using existing Firebase app');
                                this.firebaseApp = firebase.app();
                            }
                        } catch (initError) {
                            console.error(' Firebase app initialization error:', initError);
                            this.showToastMessage('Using predefined portfolio data', 'info');
                            this.usePredefinedData();
                            return;
                        }
                        
                        try {
                            this.firestore = firebase.firestore(this.firebaseApp);
                            console.log(' Firestore initialized');
                        } catch (firestoreError) {
                            console.error(' Firestore initialization error:', firestoreError);
                            this.showToastMessage('Using predefined portfolio data', 'info');
                            this.usePredefinedData();
                            return;
                        }
                        
                        try {
                            this.auth = firebase.auth(this.firebaseApp);
                            console.log(' Auth initialized');
                        } catch (authError) {
                            console.warn(' Auth initialization warning:', authError);
                        }
                        
                        this.loadPublicData();
                        
                    } catch (error) {
                        console.error(' General Firebase init error:', error);
                        this.showToastMessage('Using predefined portfolio data', 'info');
                        this.usePredefinedData();
                    }
                },

                // LOAD PUBLIC DATA DARI FIREBASE
                loadPublicData() {
                    if (!this.firestore || !this.isOnline) {
                        console.log(' Cannot load from Firebase: Firestore or internet not available');
                        this.usePredefinedData();
                        return;
                    }
                    
                    console.log(' Loading public data from Firebase...');
                    
                    this.isLoading = true;
                    this.loadingMessage = 'Loading portfolio data...';
                    
                    const timeoutPromise = new Promise((_, reject) => {
                        setTimeout(() => {
                            reject(new Error('Timeout loading data from Firebase'));
                        }, 10000);
                    });
                    
                    const loadPromise = this.firestore.collection('publicPortfolios').doc('main').get();
                    
                    Promise.race([loadPromise, timeoutPromise])
                        .then((doc) => {
                            if (doc.exists) {
                                const data = doc.data();
                                console.log(' Public data loaded successfully from Firebase');
                                
                                this.updateDataFromFirebase(data);
                                
                                if (data.lastUpdated) {
                                    this.lastSyncTime = new Date(data.lastUpdated.toDate()).toLocaleString();
                                } else {
                                    this.lastSyncTime = 'Recently';
                                }
                                
                                this.dataStatus = 'synced';
                                this.showToastMessage('Portfolio data loaded from cloud', 'success');
                                
                            } else {
                                console.log(' No public data found in Firebase, using predefined data');
                                this.usePredefinedData();
                            }
                        })
                        .catch((error) => {
                            console.error(' Load public data error:', error);
                            this.showToastMessage('Using predefined portfolio data', 'info');
                            this.usePredefinedData();
                        })
                        .finally(() => {
                            this.isLoading = false;
                            this.portfolioDataLoaded = true;
                        });
                },

                // UPDATE DATA DARI FIREBASE
                updateDataFromFirebase(data) {
                    try {
                        console.log(' Updating data from Firebase...');
                        
                        if (data.skills && Array.isArray(data.skills)) {
                            this.skills = data.skills;
                            console.log(` Loaded ${this.skills.length} skills`);
                        }
                        
                        if (data.projects && Array.isArray(data.projects)) {
                            this.projects = data.projects;
                            this.updateProjectSlides();
                            console.log(` Loaded ${this.projects.length} projects`);
                        }
                        
                        if (data.profile) {
                            Object.assign(this.profile, data.profile);
                            console.log(' Profile data loaded');
                        }
                        
                        if (data.socialLinks) {
                            this.socialLinks = data.socialLinks.map(link => ({
                                platform: link.platform,
                                url: link.url || '',
                                icon: link.icon || this.getSocialIcon(link.platform)
                            }));
                            console.log(` Loaded ${this.socialLinks.length} social links`);
                        }
                        
                        if (data.technologySpectrum && Array.isArray(data.technologySpectrum)) {
                            this.technologySpectrum = data.technologySpectrum;
                            console.log(` Loaded ${this.technologySpectrum.length} technologies`);
                        }
                        
                        this.saveToLocalStorage();
                        
                    } catch (error) {
                        console.error('Error updating data from Firebase:', error);
                        this.showToastMessage('Error loading cloud data', 'warning');
                    }
                },

                // USE PREDEFINED DATA (fallback)
                usePredefinedData() {
                    console.log(' Using predefined portfolio data');
                    
                    this.skills = [...predefinedPublicData.skills];
                    this.projects = [...predefinedPublicData.projects];
                    this.profile = { ...predefinedPublicData.profile };
                    this.socialLinks = [...predefinedPublicData.socialLinks];
                    this.technologySpectrum = [...predefinedPublicData.technologySpectrum];
                    
                    this.updateProjectSlides();
                    this.saveToLocalStorage();
                    
                    this.isLoading = false;
                    this.portfolioDataLoaded = true;
                },

                // AUTH METHODS
                loginWithGoogle() {
                    console.log(' Memulai login Google...');
                    this.isSyncing = true;
                    this.showToastMessage('Sedang login...', 'info');
                    
                    try {
                        // Pastikan Firebase diinisialisasi
                        if (!this.firebaseApp) {
                            console.log(' Menginisialisasi Firebase untuk auth...');
                            this.firebaseApp = firebase.initializeApp(firebaseConfig);
                            this.auth = firebase.auth(this.firebaseApp);
                        }
                        
                        const provider = new firebase.auth.GoogleAuthProvider();
                        provider.addScope('profile');
                        provider.addScope('email');
                        provider.setCustomParameters({ prompt: 'select_account' });
                        
                        console.log(' Login dengan popup...');
                        
                        this.auth.signInWithPopup(provider)
                            .then((result) => {
                                console.log(' Login BERHASIL! User:', result.user.email);
                                
                                this.userId = result.user.uid;
                                this.userEmail = result.user.email;
                                this.isSyncing = false;
                                this.isPublicMode = false;
                                this.isOwner = true;
                                
                                // Simpan data auth
                                this.saveAuthData(result.user);
                                
                                this.showToastMessage(` Selamat datang ${result.user.displayName || result.user.email}! Mode edit diaktifkan.`, 'success');
                                
                                // Muat data pengguna
                                setTimeout(() => {
                                    this.loadUserData();
                                }, 500);
                                
                            })
                            .catch((error) => {
                                console.error(' Error login:', error);
                                this.isSyncing = false;
                                
                                let errorMessage = 'Login gagal';
                                if (error.code === 'auth/popup-blocked') {
                                    errorMessage = 'Popup login diblokir. Silakan izinkan pop-up.';
                                } else if (error.code === 'auth/popup-closed-by-user') {
                                    errorMessage = 'Login dibatalkan';
                                } else if (error.code === 'auth/network-request-failed') {
                                    errorMessage = 'Error jaringan. Cek koneksi internet Anda.';
                                }
                                
                                this.showToastMessage(` ${errorMessage}`, 'error');
                            });
                            
                    } catch (setupError) {
                        console.error(' Setup login error:', setupError);
                        this.isSyncing = false;
                        this.showToastMessage('Setup login gagal. Silakan coba lagi.', 'error');
                    }
                },

                saveAuthData(user) {
                    try {
                        const authData = {
                            uid: user.uid,
                            email: user.email,
                            displayName: user.displayName,
                            photoURL: user.photoURL,
                            lastLogin: new Date().toISOString(),
                        };
                        
                        localStorage.setItem('firebase_auth', JSON.stringify(authData));
                        console.log(' Data auth disimpan');
                        
                    } catch (error) {
                        console.error(' Error menyimpan data auth:', error);
                    }
                },

                signOut() {
                    if (!this.auth) {
                        this.showToastMessage('Firebase Auth tidak terinisialisasi', 'warning');
                        return;
                    }
                    
                    if (confirm('Apakah Anda yakin ingin logout?')) {
                        this.auth.signOut()
                            .then(() => {
                                console.log(' Logout berhasil');
                                
                                localStorage.removeItem('firebase_auth');
                                this.userId = null;
                                this.userEmail = null;
                                this.isOwner = false;
                                this.isPublicMode = true;
                                
                                // Muat ulang data publik
                                this.loadPublicData();
                                
                                this.showToastMessage('Logout berhasil', 'success');
                                
                            })
                            .catch((error) => {
                                console.error('Error logout:', error);
                                this.showToastMessage('Logout gagal', 'error');
                            });
                    }
                },

                loadUserData() {
                    if (!this.userId || !this.firestore || !this.isOnline) {
                        console.log(' Tidak bisa memuat data pengguna');
                        return;
                    }
                    
                    console.log(' Memuat data pengguna untuk:', this.userId);
                    this.showToastMessage('Memuat data pribadi Anda...', 'info');
                    
                    this.firestore.collection('portfolios').doc(this.userId).get()
                        .then((doc) => {
                            if (doc.exists) {
                                const data = doc.data();
                                console.log(' Data pengguna dimuat');
                                
                                // Gabungkan dengan data publik
                                this.mergeUserData(data);
                                this.showToastMessage('Data Anda dimuat dari cloud', 'success');
                            } else {
                                console.log(' Tidak ada data pengguna ditemukan, menggunakan data saat ini');
                                this.showToastMessage('Membuat profil baru untuk Anda', 'info');
                            }
                        })
                        .catch((error) => {
                            console.error(' Error memuat data pengguna:', error);
                            this.showToastMessage('Error memuat data pribadi', 'warning');
                        });
                },

                mergeUserData(userData) {
                    try {
                        console.log(' Menggabungkan data pengguna...');
                        
                        if (userData.skills && Array.isArray(userData.skills)) {
                            this.skills = userData.skills;
                            console.log(` Dimuat ${this.skills.length} skill`);
                        }
                        
                        if (userData.projects && Array.isArray(userData.projects)) {
                            this.projects = userData.projects;
                            this.updateProjectSlides();
                            console.log(` Dimuat ${this.projects.length} proyek`);
                        }
                        
                        if (userData.profile) {
                            Object.assign(this.profile, userData.profile);
                            console.log(' Data profil dimuat');
                        }
                        
                        if (userData.socialLinks) {
                            this.socialLinks = userData.socialLinks.map(link => ({
                                platform: link.platform,
                                url: link.url || '',
                                icon: link.icon || this.getSocialIcon(link.platform)
                            }));
                            console.log(` Dimuat ${this.socialLinks.length} link sosial`);
                        }
                        
                        if (userData.technologySpectrum && Array.isArray(userData.technologySpectrum)) {
                            this.technologySpectrum = userData.technologySpectrum;
                            console.log(` Dimuat ${this.technologySpectrum.length} technologies`);
                        }
                        
                        this.saveToLocalStorage();
                        
                    } catch (error) {
                        console.error('Error menggabungkan data pengguna:', error);
                        this.showToastMessage('Error menggabungkan data', 'warning');
                    }
                },

                publishToPublic() {
                    if (!this.userId) {
                        this.showToastMessage('Silakan login terlebih dahulu untuk publish', 'warning');
                        setTimeout(() => {
                            this.loginWithGoogle();
                        }, 500);
                        return;
                    }
                    
                    if (!this.firestore) {
                        this.showToastMessage('Firebase Firestore tidak tersedia', 'error');
                        return;
                    }
                    
                    if (!this.isOnline) {
                        this.showToastMessage('Anda offline. Tidak bisa publish ke cloud.', 'warning');
                        return;
                    }
                    
                    if (!confirm('Publish perubahan Anda untuk membuatnya terlihat publik?')) {
                        return;
                    }
                    
                    this.isSyncing = true;
                    this.showToastMessage('Mempublish portfolio Anda...', 'info');
                    
                    const data = {
                        skills: this.skills,
                        projects: this.projects,
                        profile: this.profile,
                        socialLinks: this.socialLinks,
                        technologySpectrum: this.technologySpectrum,
                        lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                        updatedBy: this.userEmail,
                        version: '2.0',
                        published: true
                    };
                    
                    console.log('Mempublish data ke koleksi publik...');
                    
                    this.firestore.collection('publicPortfolios').doc('main')
                        .set(data, { merge: true })
                        .then(() => {
                            console.log(' Terpublish ke koleksi publik');
                            
                            // Juga simpan ke koleksi pribadi pengguna
                            return this.firestore.collection('portfolios').doc(this.userId)
                                .set({ ...data, userId: this.userId }, { merge: true });
                        })
                        .then(() => {
                            console.log(' Disimpan ke koleksi pengguna');
                            
                            this.lastSyncTime = new Date().toLocaleTimeString();
                            this.dataStatus = 'synced';
                            this.isSyncing = false;
                            
                            this.showToastMessage(' Portfolio berhasil dipublish!', 'success');
                            this.addToSyncHistory('Data dipublish', 'success');
                            
                        })
                        .catch((error) => {
                            console.error(' Error publish:', error);
                            this.isSyncing = false;
                            
                            let errorMessage = 'Publish gagal';
                            if (error.code === 'permission-denied') {
                                errorMessage = 'Izin ditolak. Anda mungkin tidak punya akses tulis.';
                            }
                            
                            this.showToastMessage(` ${errorMessage}`, 'error');
                            this.addToSyncHistory('Publish gagal', 'error');
                        });
                },

                // EVENT LISTENERS
                setupEventListeners() {
                    window.addEventListener('scroll', this.handleScroll.bind(this));
                    window.addEventListener('resize', this.handleResize.bind(this));
                    
                    window.addEventListener('beforeunload', () => {
                        if (!this.isPublicMode) {
                            this.saveToLocalStorage();
                        }
                    });
                },

                handleScroll() {
                    const winScroll = document.documentElement.scrollTop || document.body.scrollTop;
                    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                    this.scrollProgress = height > 0 ? (winScroll / height) * 100 : 0;
                    
                    this.isAtTop = window.scrollY < 50;
                    
                    const sections = ['home', 'skills', 'projects', 'contact'];
                    for (const section of sections) {
                        const element = document.getElementById(section);
                        if (element) {
                            const rect = element.getBoundingClientRect();
                            if (rect.top <= 100 && rect.bottom >= 100) {
                                this.activeSection = section;
                                break;
                            }
                        }
                    }
                },

                handleResize() {
                    if (window.innerWidth < 768) {
                        this.projectsPerSlide = 1;
                    } else if (window.innerWidth < 1024) {
                        this.projectsPerSlide = 2;
                    } else {
                        this.projectsPerSlide = 3;
                    }
                    
                    this.updateProjectSlides();
                },

                toggleTheme() {
                    this.isDark = !this.isDark;
                    localStorage.setItem('theme', this.isDark ? 'dark' : 'light');
                    
                    if (window.pJSDom && window.pJSDom.length > 0) {
                        const particles = window.pJSDom[0].pJS;
                        if (particles) {
                            particles.particles.color.value = this.isDark ? "#ffffff" : "#6366f1";
                            particles.particles.line_linked.color = this.isDark ? "#ffffff" : "#6366f1";
                            particles.fn.particlesRefresh();
                        }
                    }
                },

                scrollTo(sectionId) {
                    const element = document.getElementById(sectionId);
                    if (element) {
                        const offset = 80;
                        const elementPosition = element.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - offset;

                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                    }
                    this.mobileMenu = false;
                },

                // MODAL METHODS
                openModal(modalName) {
                    if (this.isPublicMode && (modalName === 'addSkill' || modalName === 'addProject' || modalName === 'editProfile' || modalName === 'editSocialLinks' || modalName === 'editTechnologySpectrum' || modalName === 'deleteConfirm')) {
                        this.showToastMessage('Please switch to edit mode to make changes', 'info');
                        return;
                    }
                    this.modals[modalName] = true;
                    document.body.style.overflow = 'hidden';
                },

                closeModal(modalName) {
                    this.modals[modalName] = false;
                    document.body.style.overflow = 'auto';
                    
                    if (modalName === 'addSkill') {
                        this.resetSkillForm();
                    } else if (modalName === 'addProject') {
                        this.resetProjectForm();
                    } else if (modalName === 'editTechnologySpectrum') {
                        this.resetTechForm();
                    }
                },

                // SKILL METHODS
                filterSkillSuggestions() {
                    const query = this.newSkill.name.toLowerCase();
                    if (query.length < 2) {
                        this.skillSuggestions = [];
                        return;
                    }
                    
                    this.skillSuggestions = skillsDatabase
                        .filter(skill => 
                            skill.toLowerCase().includes(query) &&
                            !this.skills.some(s => s.name === skill)
                        )
                        .slice(0, 10);
                },

                selectSkillSuggestion(skill) {
                    this.newSkill.name = skill;
                    this.skillSuggestions = [];
                    
                    // Auto-set category and icon based on skill name
                    const skillLower = skill.toLowerCase();
                    
                    if (skillLower.includes('react') || skillLower.includes('vue') || skillLower.includes('angular') || 
                        skillLower.includes('html') || skillLower.includes('css') || skillLower.includes('javascript')) {
                        this.newSkill.category = 'frontend';
                        this.newSkill.icon = this.getTechIcon(skill);
                    } else if (skillLower.includes('node') || skillLower.includes('python') || skillLower.includes('java') || 
                               skillLower.includes('php') || skillLower.includes('ruby') || skillLower.includes('go')) {
                        this.newSkill.category = 'backend';
                        this.newSkill.icon = this.getTechIcon(skill);
                    } else if (skillLower.includes('mongo') || skillLower.includes('sql') || skillLower.includes('database') || 
                               skillLower.includes('redis')) {
                        this.newSkill.category = 'database';
                        this.newSkill.icon = this.getTechIcon(skill);
                    } else if (skillLower.includes('docker') || skillLower.includes('kubernetes') || skillLower.includes('aws') || 
                               skillLower.includes('azure') || skillLower.includes('devops')) {
                        this.newSkill.category = 'devops';
                        this.newSkill.icon = this.getTechIcon(skill);
                    }
                },

                addNewSkill() {
                    if (this.isPublicMode) return;
                    
                    try {
                        this.isSubmitting = true;

                        const newSkill = {
                            id: this.editingSkill ? this.editingSkill.id : Date.now(),
                            ...this.newSkill,
                            icon: this.newSkill.icon || this.getTechIcon(this.newSkill.name)
                        };

                        if (this.editingSkill) {
                            const index = this.skills.findIndex(s => s.id === this.editingSkill.id);
                            if (index !== -1) {
                                this.skills[index] = newSkill;
                            }
                            this.showToastMessage('Skill updated successfully', 'success');
                        } else {
                            this.skills.push(newSkill);
                            this.showToastMessage('Skill added successfully', 'success');
                        }

                        // Update average proficiency to ensure minimum 70%
                        this.ensureMinimumProficiency();
                        
                        this.saveToLocalStorage();
                        this.closeModal('addSkill');
                        this.resetSkillForm();
                    } catch (error) {
                        this.showToastMessage('Error saving skill', 'error');
                        console.error('Error adding skill:', error);
                    } finally {
                        this.isSubmitting = false;
                    }
                },

                ensureMinimumProficiency() {
                    // Ensure at least one skill has 90%+ to maintain 70% average
                    const hasHighProficiency = this.skills.some(skill => skill.level >= 90);
                    if (!hasHighProficiency && this.skills.length > 0) {
                        this.skills[0].level = 95;
                    }
                },

                // PROJECT METHODS
                filterTechSuggestions() {
                    const query = this.techInput.toLowerCase();
                    if (query.length < 2) {
                        this.techSuggestions = [];
                        return;
                    }
                    
                    // Get all technologies from database
                    const allTechs = [];
                    Object.values(technologyDatabase).forEach(category => {
                        category.forEach(tech => {
                            if (!allTechs.includes(tech.name)) {
                                allTechs.push(tech.name);
                            }
                        });
                    });
                    
                    this.techSuggestions = allTechs
                        .filter(tech => 
                            tech.toLowerCase().includes(query) &&
                            !this.newProject.technologies.includes(tech)
                        )
                        .slice(0, 10);
                },

                addTechnology() {
                    if (this.techInput.trim() && !this.newProject.technologies.includes(this.techInput.trim())) {
                        this.newProject.technologies.push(this.techInput.trim());
                        this.techInput = '';
                        this.techSuggestions = [];
                    }
                },

                addTechFromSuggestion(tech) {
                    if (!this.newProject.technologies.includes(tech)) {
                        this.newProject.technologies.push(tech);
                        this.techInput = '';
                        this.techSuggestions = [];
                    }
                },

                removeTech(tech) {
                    this.newProject.technologies = this.newProject.technologies.filter(t => t !== tech);
                },

                addNewProject() {
                    if (this.isPublicMode) return;
                    
                    try {
                        this.isSubmitting = true;

                        const newProject = {
                            id: this.editingProject ? this.editingProject.id : Date.now(),
                            ...this.newProject,
                            date: new Date().getFullYear().toString()
                        };

                        if (this.editingProject) {
                            const index = this.projects.findIndex(p => p.id === this.editingProject.id);
                            if (index !== -1) {
                                this.projects[index] = newProject;
                            }
                            this.showToastMessage('Project updated successfully', 'success');
                        } else {
                            this.projects.push(newProject);
                            this.showToastMessage('Project added successfully', 'success');
                        }

                        this.updateProjectSlides();
                        this.saveToLocalStorage();
                        this.closeModal('addProject');
                        this.resetProjectForm();
                    } catch (error) {
                        this.showToastMessage('Error saving project', 'error');
                        console.error('Error adding project:', error);
                    } finally {
                        this.isSubmitting = false;
                    }
                },

                // DELETE METHODS
                confirmDelete(type, id, name) {
                    if (this.isPublicMode) return;
                    
                    this.deleteItem = { type, id, name };
                    this.openModal('deleteConfirm');
                },

                executeDelete() {
                    if (this.isPublicMode) return;
                    
                    if (this.deleteItem.type === 'skill') {
                        this.skills = this.skills.filter(skill => skill.id !== this.deleteItem.id);
                        this.showToastMessage('Skill deleted successfully', 'success');
                    } else if (this.deleteItem.type === 'project') {
                        this.projects = this.projects.filter(project => project.id !== this.deleteItem.id);
                        this.updateProjectSlides();
                        this.showToastMessage('Project deleted successfully', 'success');
                    }
                    
                    this.saveToLocalStorage();
                    this.closeModal('deleteConfirm');
                },

                // PROFILE METHODS
                updateProfile() {
                    if (this.isPublicMode) return;
                    
                    try {
                        this.saveToLocalStorage();
                        this.showToastMessage('Profile updated successfully', 'success');
                        this.closeModal('editProfile');
                    } catch (error) {
                        this.showToastMessage('Error updating profile', 'error');
                        console.error('Error updating profile:', error);
                    }
                },

                // SOCIAL LINKS METHODS
                saveSocialLinks() {
                    if (this.isPublicMode) return;
                    
                    try {
                        // Validate URLs
                        for (const link of this.socialLinks) {
                            if (link.url && !this.isValidUrl(link.url)) {
                                this.showToastMessage(`Invalid URL for ${link.platform}: ${link.url}`, 'error');
                                return;
                            }
                        }
                        
                        this.saveToLocalStorage();
                        this.showToastMessage('Social links saved successfully', 'success');
                        this.closeModal('editSocialLinks');
                    } catch (error) {
                        this.showToastMessage('Error saving social links', 'error');
                        console.error('Error saving social links:', error);
                    }
                },

                addSocialLink() {
                    if (this.isPublicMode) return;
                    
                    this.socialLinks.push({
                        platform: 'GitHub',
                        url: '',
                        icon: 'fab fa-github'
                    });
                },

                addQuickSocialLink(platform) {
                    if (this.isPublicMode) return;
                    
                    const platformData = socialPlatformsDatabase.find(p => p.name === platform);
                    if (platformData) {
                        this.socialLinks.push({
                            platform: platformData.name,
                            url: platformData.placeholder.includes('username') ? '' : platformData.placeholder,
                            icon: platformData.icon
                        });
                    }
                },

                removeSocialLink(index) {
                    if (this.isPublicMode) return;
                    
                    this.socialLinks.splice(index, 1);
                },

                moveSocialLink(index, direction) {
                    if (this.isPublicMode) return;
                    
                    if (direction === 'up' && index > 0) {
                        const temp = this.socialLinks[index];
                        this.socialLinks[index] = this.socialLinks[index - 1];
                        this.socialLinks[index - 1] = temp;
                    } else if (direction === 'down' && index < this.socialLinks.length - 1) {
                        const temp = this.socialLinks[index];
                        this.socialLinks[index] = this.socialLinks[index + 1];
                        this.socialLinks[index + 1] = temp;
                    }
                },

                handlePlatformChange(link, index) {
                    if (this.isPublicMode) return;
                    
                    const platformData = socialPlatformsDatabase.find(p => p.name === link.platform);
                    if (platformData) {
                        link.icon = platformData.icon;
                        if (!link.url || link.url === this.socialLinks[index].url) {
                            link.url = platformData.placeholder.includes('username') ? '' : platformData.placeholder;
                        }
                    }
                },

                // TECHNOLOGY SPECTRUM METHODS
                addTechnologyToSpectrum() {
                    if (this.isPublicMode || !this.newTech.name.trim()) return;
                    
                    const newTech = {
                        id: Date.now(),
                        ...this.newTech,
                        icon: this.getTechIcon(this.newTech.name),
                        order: this.technologySpectrum.length + 1
                    };
                    
                    this.technologySpectrum.push(newTech);
                    this.resetTechForm();
                    this.showToastMessage('Technology added to spectrum', 'success');
                },

                editTechnology(tech) {
                    if (this.isPublicMode) return;
                    
                    this.newTech = { ...tech };
                    // Scroll to top of modal
                    const modal = document.querySelector('.modal-content');
                    if (modal) {
                        modal.scrollTop = 0;
                    }
                },

                removeTechnologyFromSpectrum(id) {
                    if (this.isPublicMode) return;
                    
                    this.technologySpectrum = this.technologySpectrum.filter(tech => tech.id !== id);
                    // Update order
                    this.technologySpectrum.forEach((tech, index) => {
                        tech.order = index + 1;
                    });
                    this.showToastMessage('Technology removed from spectrum', 'success');
                },

                saveTechnologySpectrum() {
                    if (this.isPublicMode) return;
                    
                    try {
                        this.saveToLocalStorage();
                        this.showToastMessage('Technology spectrum saved successfully', 'success');
                        this.closeModal('editTechnologySpectrum');
                    } catch (error) {
                        this.showToastMessage('Error saving technology spectrum', 'error');
                        console.error('Error saving technology spectrum:', error);
                    }
                },

                handleTechDragStart(index) {
                    this.draggingTechIndex = index;
                },

                handleTechDragEnd() {
                    this.draggingTechIndex = null;
                },

                handleTechDrop(event) {
                    event.preventDefault();
                    if (this.draggingTechIndex === null) return;
                    
                    const dropIndex = Array.from(event.target.closest('.sortable-list').children)
                        .findIndex(child => child.contains(event.target));
                    
                    if (dropIndex !== -1 && dropIndex !== this.draggingTechIndex) {
                        const draggedItem = this.technologySpectrum[this.draggingTechIndex];
                        this.technologySpectrum.splice(this.draggingTechIndex, 1);
                        this.technologySpectrum.splice(dropIndex, 0, draggedItem);
                        
                        // Update order
                        this.technologySpectrum.forEach((tech, index) => {
                            tech.order = index + 1;
                        });
                    }
                },

                // CONTACT FORM
                submitContact() {
                    try {
                        this.isSubmitting = true;
                        
                        if (!this.contactForm.name || !this.contactForm.email || !this.contactForm.message) {
                            this.showToastMessage('Please fill in all fields', 'error');
                            this.isSubmitting = false;
                            return;
                        }
                        
                        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        if (!emailRegex.test(this.contactForm.email)) {
                            this.showToastMessage('Please enter a valid email address', 'error');
                            this.isSubmitting = false;
                            return;
                        }
                        
                        console.log('Starting email sending process...');
                        
                        const serviceID = 'service_fkkrcdr';
                        const templateID = 'template_g9cfnn2';
                        const publicKey = 'GIIXeb6Xt3whWfqvo';
                        
                        if (typeof emailjs === 'undefined') {
                            console.error('EmailJS is not loaded');
                            this.showToastMessage('Email service not available. Please refresh the page.', 'error');
                            this.isSubmitting = false;
                            return;
                        }
                        
                        emailjs.init(publicKey);
                        
                        const templateParams = {
                            from_name: this.contactForm.name,
                            from_email: this.contactForm.email,
                            message: this.contactForm.message,
                            to_name: this.profile.name,
                            to_email: this.profile.email,
                            reply_to: this.contactForm.email
                        };
                        
                        emailjs.send(serviceID, templateID, templateParams)
                            .then((response) => {
                                console.log('Email response:', response);
                                
                                if (response.status === 200) {
                                    this.showToastMessage('Message sent successfully! I\'ll get back to you soon.', 'success');
                                    
                                    this.contactForm = {
                                        name: '',
                                        email: '',
                                        message: ''
                                    };
                                } else {
                                    throw new Error(`EmailJS responded with status: ${response.status}`);
                                }
                            })
                            .catch((error) => {
                                console.error('Email sending error:', error);
                                
                                let errorMessage = 'Error sending message. Please try again later.';
                                
                                if (error.text) {
                                    console.error('EmailJS error text:', error.text);
                                }
                                
                                this.showToastMessage(errorMessage, 'error');
                            })
                            .finally(() => {
                                this.isSubmitting = false;
                            });
                        
                    } catch (error) {
                        console.error('Email sending error:', error);
                        this.showToastMessage('Error sending message. Please try again later.', 'error');
                        this.isSubmitting = false;
                    }
                },

                // HELPER METHODS
                generateDefaultAvatar() {
                    const name = this.profile.name || 'John Doe';
                    const initials = name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
                    const bgColor = '6366f1';
                    const textColor = 'ffffff';
                    const size = '400';
                    
                    return `https://ui-avatars.com/api/?name=${encodeURIComponent(initials)}&background=${bgColor}&color=${textColor}&size=${size}&bold=true&font-size=0.5`;
                },

                showToastMessage(message, type = 'success') {
                    this.toastMessage = message;
                    this.toastType = type;
                    this.showToast = true;
                    
                    setTimeout(() => {
                        this.showToast = false;
                    }, 3000);
                },

                initParticles() {
                    if (typeof particlesJS === 'function') {
                        particlesJS('particles-js', {
                            particles: {
                                number: { 
                                    value: 80, 
                                    density: { 
                                        enable: true, 
                                        value_area: 800 
                                    } 
                                },
                                color: { 
                                    value: this.isDark ? "#ffffff" : "#6366f1" 
                                },
                                shape: { 
                                    type: "circle" 
                                },
                                opacity: { 
                                    value: 0.3, 
                                    random: true
                                },
                                size: { 
                                    value: 3, 
                                    random: true
                                },
                                line_linked: {
                                    enable: true,
                                    distance: 150,
                                    color: this.isDark ? "#ffffff" : "#6366f1",
                                    opacity: 0.2,
                                    width: 1
                                },
                                move: {
                                    enable: true,
                                    speed: 1,
                                    direction: "none",
                                    random: true,
                                    straight: false
                                }
                            },
                            interactivity: {
                                events: {
                                    onhover: { 
                                        enable: true, 
                                        mode: "grab" 
                                    }
                                }
                            }
                        });
                    }
                },

                // DATA MANAGEMENT METHODS
                saveToLocalStorage() {
                    if (this.isPublicMode) return;
                    
                    try {
                        localStorage.setItem('portfolioSkills', JSON.stringify(this.skills));
                        localStorage.setItem('portfolioProjects', JSON.stringify(this.projects));
                        localStorage.setItem('portfolioProfile', JSON.stringify(this.profile));
                        localStorage.setItem('portfolioSocialLinks', JSON.stringify(this.socialLinks));
                        localStorage.setItem('portfolioTechnologySpectrum', JSON.stringify(this.technologySpectrum));
                        
                        localStorage.setItem('portfolioCacheTime', new Date().toISOString());
                        
                        console.log(' Data saved locally');
                        this.calculateStorageUsage();
                        
                    } catch (error) {
                        console.error(' Save error:', error);
                    }
                },

                calculateStorageUsage() {
                    try {
                        let totalBytes = 0;
                        for (let i = 0; i < localStorage.length; i++) {
                            const key = localStorage.key(i);
                            if (key && key.startsWith('portfolio')) {
                                const value = localStorage.getItem(key);
                                totalBytes += new Blob([value]).size;
                            }
                        }
                        
                        this.storageUsage = this.formatBytes(totalBytes);
                    } catch (error) {
                        console.error('Error calculating storage usage:', error);
                        this.storageUsage = 'Unknown';
                    }
                },

                formatBytes(bytes, decimals = 2) {
                    if (bytes === 0) return '0 Bytes';
                    
                    const k = 1024;
                    const dm = decimals < 0 ? 0 : decimals;
                    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                    
                    const i = Math.floor(Math.log(bytes) / Math.log(k));
                    
                    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
                },

                addToSyncHistory(action, status) {
                    this.syncHistory.unshift({
                        action,
                        status,
                        timestamp: new Date().toISOString()
                    });
                    
                    if (this.syncHistory.length > 10) {
                        this.syncHistory.pop();
                    }
                    
                    localStorage.setItem('portfolioSyncHistory', JSON.stringify(this.syncHistory));
                },

                // PROJECT SLIDER METHODS
                updateProjectSlides() {
                    this.projectSlides = [];
                    
                    if (this.projects.length <= 6) {
                        this.projectView = 'grid';
                        return;
                    }
                    
                    for (let i = 0; i < this.projects.length; i += this.projectsPerSlide) {
                        this.projectSlides.push(this.projects.slice(i, i + this.projectsPerSlide));
                    }
                    
                    if (this.currentSlide >= this.projectSlides.length) {
                        this.currentSlide = 0;
                    }
                },

                setProjectView(view) {
                    this.projectView = view;
                    if (view === 'slider') {
                        this.currentSlide = 0;
                    }
                },

                nextSlide() {
                    if (this.currentSlide < this.projectSlides.length - 1) {
                        this.currentSlide++;
                    }
                },

                prevSlide() {
                    if (this.currentSlide > 0) {
                        this.currentSlide--;
                    }
                },

                goToSlide(index) {
                    if (index >= 0 && index < this.projectSlides.length) {
                        this.currentSlide = index;
                    }
                },

                toggleAutoSlide() {
                    this.autoSlideEnabled = !this.autoSlideEnabled;
                    
                    if (this.autoSlideEnabled) {
                        this.autoSlideInterval = setInterval(() => {
                            if (this.currentSlide < this.projectSlides.length - 1) {
                                this.currentSlide++;
                            } else {
                                this.currentSlide = 0;
                            }
                        }, 5000);
                    } else if (this.autoSlideInterval) {
                        clearInterval(this.autoSlideInterval);
                        this.autoSlideInterval = null;
                    }
                },

                // CATEGORY & ICON HELPER METHODS
                getCategoryName(category) {
                    const names = {
                        'frontend': 'Frontend',
                        'backend': 'Backend',
                        'database': 'Database',
                        'mobile': 'Mobile',
                        'devops': 'DevOps',
                        'cloud': 'Cloud',
                        'tools': 'Tools',
                        'design': 'Design',
                        'ai': 'AI/ML'
                    };
                    return names[category] || category;
                },

                getCategoryIcon(category) {
                    const icons = {
                        'frontend': 'fas fa-code',
                        'backend': 'fas fa-server',
                        'database': 'fas fa-database',
                        'mobile': 'fas fa-mobile-alt',
                        'devops': 'fas fa-cogs',
                        'cloud': 'fas fa-cloud',
                        'tools': 'fas fa-tools',
                        'design': 'fas fa-palette',
                        'ai': 'fas fa-brain'
                    };
                    return icons[category] || 'fas fa-code';
                },

                getSkillCategoryColor(category) {
                    const colors = {
                        'frontend': 'bg-blue-500',
                        'backend': 'bg-green-500',
                        'database': 'bg-yellow-500',
                        'mobile': 'bg-purple-500',
                        'devops': 'bg-red-500',
                        'cloud': 'bg-indigo-500',
                        'tools': 'bg-pink-500',
                        'design': 'bg-teal-500',
                        'ai': 'bg-orange-500'
                    };
                    return colors[category] || 'bg-slate-500';
                },

                getProficiencyLevel(level) {
                    if (level >= 90) return 'Expert';
                    if (level >= 70) return 'Advanced';
                    if (level >= 50) return 'Intermediate';
                    if (level >= 30) return 'Beginner';
                    return 'Novice';
                },

                getProficiencyIcon(level) {
                    if (level >= 90) return 'fas fa-fire';
                    if (level >= 70) return 'fas fa-chart-line';
                    if (level >= 50) return 'fas fa-seedling';
                    return 'fas fa-leaf';
                },

                getProjectTypeName(type) {
                    const names = {
                        'web': 'Web App',
                        'mobile': 'Mobile App',
                        'api': 'API',
                        'desktop': 'Desktop',
                        'ai': 'AI/ML',
                        'saas': 'SaaS'
                    };
                    return names[type] || type;
                },

                getTechIcon(tech) {
                    // Search through technology database
                    for (const category in technologyDatabase) {
                        const found = technologyDatabase[category].find(item => 
                            item.name.toLowerCase() === tech.toLowerCase()
                        );
                        if (found) {
                            return found.icon;
                        }
                    }
                    
                    // Fallback icons based on tech name
                    const techLower = tech.toLowerCase();
                    if (techLower.includes('react')) return 'fab fa-react';
                    if (techLower.includes('vue')) return 'fab fa-vuejs';
                    if (techLower.includes('angular')) return 'fab fa-angular';
                    if (techLower.includes('node')) return 'fab fa-node-js';
                    if (techLower.includes('python')) return 'fab fa-python';
                    if (techLower.includes('java')) return 'fab fa-java';
                    if (techLower.includes('php')) return 'fab fa-php';
                    if (techLower.includes('laravel')) return 'fab fa-laravel';
                    if (techLower.includes('docker')) return 'fab fa-docker';
                    if (techLower.includes('aws')) return 'fab fa-aws';
                    if (techLower.includes('database') || techLower.includes('sql') || techLower.includes('mongo')) return 'fas fa-database';
                    if (techLower.includes('git')) return 'fab fa-git-alt';
                    if (techLower.includes('html')) return 'fab fa-html5';
                    if (techLower.includes('css')) return 'fab fa-css3-alt';
                    if (techLower.includes('javascript') || techLower.includes('typescript')) return 'fab fa-js';
                    
                    return 'fas fa-code';
                },

                getTechColor(color) {
                    const colors = {
                        'blue': 'linear-gradient(135deg, #3b82f6, #1d4ed8)',
                        'green': 'linear-gradient(135deg, #10b981, #059669)',
                        'purple': 'linear-gradient(135deg, #8b5cf6, #7c3aed)',
                        'pink': 'linear-gradient(135deg, #ec4899, #db2777)',
                        'orange': 'linear-gradient(135deg, #f97316, #ea580c)',
                        'red': 'linear-gradient(135deg, #ef4444, #dc2626)',
                        'teal': 'linear-gradient(135deg, #14b8a6, #0d9488)',
                        'indigo': 'linear-gradient(135deg, #6366f1, #4f46e5)'
                    };
                    return colors[color] || colors.blue;
                },

                getTechTextColor(color) {
                    const colors = {
                        'blue': 'text-blue-100',
                        'green': 'text-green-100',
                        'purple': 'text-purple-100',
                        'pink': 'text-pink-100',
                        'orange': 'text-orange-100',
                        'red': 'text-red-100',
                        'teal': 'text-teal-100',
                        'indigo': 'text-indigo-100'
                    };
                    return colors[color] || colors.blue;
                },

                // SOCIAL MEDIA HELPER METHODS
                getSocialIcon(platform) {
                    const platformData = socialPlatformsDatabase.find(p => p.name === platform);
                    return platformData ? platformData.icon : 'fas fa-external-link-alt';
                },

                getSocialPlaceholder(platform) {
                    const platformData = socialPlatformsDatabase.find(p => p.name === platform);
                    return platformData ? platformData.placeholder : 'https://example.com';
                },

                getSocialPlatformName(platform) {
                    return platform;
                },

                getSocialPlatformColor(platform) {
                    const colors = {
                        'GitHub': 'linear-gradient(135deg, #333, #000)',
                        'LinkedIn': 'linear-gradient(135deg, #0077b5, #006699)',
                        'Twitter': 'linear-gradient(135deg, #1da1f2, #1a8cd8)',
                        'Instagram': 'linear-gradient(135deg, #e4405f, #c13584)',
                        'YouTube': 'linear-gradient(135deg, #ff0000, #cc0000)',
                        'Facebook': 'linear-gradient(135deg, #1877f2, #166fe5)',
                        'Email': 'linear-gradient(135deg, #ea4335, #d93025)',
                        'GitLab': 'linear-gradient(135deg, #fc6d26, #e24329)',
                        'Stack Overflow': 'linear-gradient(135deg, #f48024, #e06c1f)',
                        'Medium': 'linear-gradient(135deg, #000, #333)',
                        'Dev.to': 'linear-gradient(135deg, #0a0a0a, #000)',
                        'Dribbble': 'linear-gradient(135deg, #ea4c89, #d6417a)',
                        'Behance': 'linear-gradient(135deg, #1769ff, #0057ff)',
                        'Figma': 'linear-gradient(135deg, #f24e1e, #e34a1c)',
                        'CodePen': 'linear-gradient(135deg, #000, #333)'
                    };
                    return colors[platform] || 'linear-gradient(135deg, #6366f1, #8b5cf6)';
                },

                isValidUrl(url) {
                    try {
                        new URL(url);
                        return true;
                    } catch (_) {
                        return false;
                    }
                },

                getSocialUsername(url) {
                    if (!url) return 'Not set';
                    try {
                        const urlObj = new URL(url);
                        if (url.includes('github.com')) {
                            const path = urlObj.pathname.split('/').filter(p => p);
                            return path[0] || 'username';
                        }
                        if (url.includes('linkedin.com/in/')) {
                            return urlObj.pathname.split('/in/')[1] || 'username';
                        }
                        if (url.includes('twitter.com/')) {
                            return urlObj.pathname.split('/')[1] || 'username';
                        }
                        if (url.includes('instagram.com/')) {
                            return urlObj.pathname.split('/')[1] || 'username';
                        }
                        return urlObj.hostname.replace('www.', '');
                    } catch (_) {
                        return url;
                    }
                },

                // RESET METHODS
                resetSkillForm() {
                    this.newSkill = {
                        name: '',
                        category: 'frontend',
                        level: 70,
                        years: 1,
                        projects: 0,
                        icon: 'fas fa-code',
                        description: ''
                    };
                    this.skillSuggestions = [];
                    this.editingSkill = null;
                },

                resetProjectForm() {
                    this.newProject = {
                        name: '',
                        description: '',
                        type: 'web',
                        technologies: [],
                        image: '',
                        demoUrl: '',
                        sourceUrl: '',
                        startDate: '',
                        endDate: '',
                        isOngoing: false,
                        role: '',
                        teamSize: 1,
                        status: 'completed',
                        client: '',
                        challenges: '',
                        features: []
                    };
                    this.techInput = '';
                    this.techSuggestions = [];
                    this.editingProject = null;
                },

                resetTechForm() {
                    this.newTech = {
                        name: '',
                        icon: 'fas fa-code',
                        description: '',
                        category: 'frontend',
                        color: 'blue',
                        order: 0
                    };
                },

                // EDIT SKILL/PROJECT METHODS
                editSkill(skill) {
                    if (this.isPublicMode) return;
                    
                    this.editingSkill = { ...skill };
                    this.newSkill = { ...skill };
                    this.openModal('addSkill');
                },

                editProject(project) {
                    if (this.isPublicMode) return;
                    
                    this.editingProject = { ...project };
                    this.newProject = { ...project };
                    this.openModal('addProject');
                },

                viewProject(projectId) {
                    this.selectedProject = this.projects.find(p => p.id === projectId);
                    this.openModal('projectDetail');
                },

                // IMAGE UPLOAD METHODS
                uploadProfileImage(event) {
                    const file = event.target.files[0];
                    if (file) {
                        if (file.size > this.storageConfig.maxImageSize) {
                            this.showToastMessage('Image size too large. Max 1MB.', 'error');
                            return;
                        }
                        
                        this.uploadingProfileImage = true;
                        
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            this.profile.image = e.target.result;
                            this.uploadingProfileImage = false;
                            this.showToastMessage('Profile image updated successfully', 'success');
                        };
                        reader.readAsDataURL(file);
                    }
                },

                handleProjectImageError(event, projectId) {
                    console.error('Error loading project image:', event);
                    event.target.src = 'https://images.unsplash.com/photo-1551650975-87deedd944c3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
                    
                    const projectIndex = this.projects.findIndex(p => p.id === projectId);
                    if (projectIndex !== -1) {
                        this.projects[projectIndex].image = event.target.src;
                    }
                }
            };
        }
    </script>
</body>
</html>
